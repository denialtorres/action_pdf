Generated by [trace_location](https://github.com/yhirano55/trace_location) at 2024-12-08 05:59:27 +0000

<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:43</summary>

##### Rails.application

```ruby
def application
  @application ||= (app_class.instance if app_class)
end

# called from (pry):13
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:534</summary>

##### Rails::Engine#call

```ruby
def call(env)
  req = build_request env
  app.call req.env
end

# called from (pry):13
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libapplication.rb:693</summary>

##### Rails::Application#build_request

```ruby
def build_request(env)
  req = super
  env["ORIGINAL_FULLPATH"] = req.fullpath
  env["ORIGINAL_SCRIPT_NAME"] = req.script_name
  req
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:535
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:743</summary>

##### Rails::Application#build_request

```ruby
def build_request(env)
  req = super
  env["ORIGINAL_FULLPATH"] = req.fullpath
  env["ORIGINAL_SCRIPT_NAME"] = req.script_name
  req
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libapplication.rb:694
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libapplication.rb:303</summary>

##### Rails::Application#env_config

```ruby
def env_config
  @app_env_config ||= super.merge(
      "action_dispatch.parameter_filter" => filter_parameters,
      "action_dispatch.redirect_filter" => config.filter_redirect,
      "action_dispatch.secret_key_base" => secret_key_base,
      "action_dispatch.show_exceptions" => config.action_dispatch.show_exceptions,
      "action_dispatch.show_detailed_exceptions" => config.consider_all_requests_local,
      "action_dispatch.log_rescued_responses" => config.action_dispatch.log_rescued_responses,
      "action_dispatch.debug_exception_log_level" => ActiveSupport::Logger.const_get(config.action_dispatch.debug_exception_log_level.to_s.upcase),
      "action_dispatch.logger" => Rails.logger,
      "action_dispatch.backtrace_cleaner" => Rails.backtrace_cleaner,
      "action_dispatch.key_generator" => key_generator,
      "action_dispatch.http_auth_salt" => config.action_dispatch.http_auth_salt,
      "action_dispatch.signed_cookie_salt" => config.action_dispatch.signed_cookie_salt,
      "action_dispatch.encrypted_cookie_salt" => config.action_dispatch.encrypted_cookie_salt,
      "action_dispatch.encrypted_signed_cookie_salt" => config.action_dispatch.encrypted_signed_cookie_salt,
      "action_dispatch.authenticated_encrypted_cookie_salt" => config.action_dispatch.authenticated_encrypted_cookie_salt,
      "action_dispatch.use_authenticated_cookie_encryption" => config.action_dispatch.use_authenticated_cookie_encryption,
      "action_dispatch.encrypted_cookie_cipher" => config.action_dispatch.encrypted_cookie_cipher,
      "action_dispatch.signed_cookie_digest" => config.action_dispatch.signed_cookie_digest,
      "action_dispatch.cookies_serializer" => config.action_dispatch.cookies_serializer,
      "action_dispatch.cookies_digest" => config.action_dispatch.cookies_digest,
      "action_dispatch.cookies_rotations" => config.action_dispatch.cookies_rotations,
      "action_dispatch.cookies_same_site_protection" => coerce_same_site_protection(config.action_dispatch.cookies_same_site_protection),
      "action_dispatch.use_cookies_with_metadata" => config.action_dispatch.use_cookies_with_metadata,
      "action_dispatch.content_security_policy" => config.content_security_policy,
      "action_dispatch.content_security_policy_report_only" => config.content_security_policy_report_only,
      "action_dispatch.content_security_policy_nonce_generator" => config.content_security_policy_nonce_generator,
      "action_dispatch.content_security_policy_nonce_directives" => config.content_security_policy_nonce_directives,
      "action_dispatch.permissions_policy" => config.permissions_policy,
    )
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:744
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:60</summary>

##### ActionDispatch::Request#initialize

```ruby
def initialize(env)
  super
  @method            = nil
  @request_method    = nil
  @remote_ip         = nil
  @original_fullpath = nil
  @fullpath          = nil
  @ip                = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:745
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:86</summary>

##### ActionDispatch::Request#initialize

```ruby
def initialize(env)
  super
  @method            = nil
  @request_method    = nil
  @remote_ip         = nil
  @original_fullpath = nil
  @fullpath          = nil
  @ip                = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:61
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/url.rb:179</summary>

##### ActionDispatch::Request#initialize

```ruby
def initialize(env)
  super
  @method            = nil
  @request_method    = nil
  @remote_ip         = nil
  @original_fullpath = nil
  @fullpath          = nil
  @ip                = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:90
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/filter_parameters.rb:21</summary>

##### ActionDispatch::Request#initialize

```ruby
def initialize(env)
  super
  @method            = nil
  @request_method    = nil
  @remote_ip         = nil
  @original_fullpath = nil
  @fullpath          = nil
  @ip                = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/url.rb:180
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:546</summary>

##### Rails::Engine#routes

```ruby
def routes(&block)
  @routes ||= ActionDispatch::Routing::RouteSet.new_with_config(config)
  @routes.append(&block) if block_given?
  @routes
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:746
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:164</summary>

##### ActionDispatch::Request#routes=

```ruby
def routes=(routes) # :nodoc:
  set_header("action_dispatch.routes", routes)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:746
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:116</summary>

##### Rack::Request::Env#set_header

```ruby
def set_header(name, v)
  @env[name] = v
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:165
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:191</summary>

##### Rack::Request::Helpers#script_name

```ruby
def script_name;     get_header(SCRIPT_NAME).to_s                   end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:747
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:100</summary>

##### Rack::Request::Env#get_header

```ruby
def get_header(name)
  @env[name]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:191
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:172</summary>

##### ActionDispatch::Request#engine_script_name=

```ruby
def engine_script_name=(name) # :nodoc:
  set_header(routes.env_key, name.dup)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:747
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:160</summary>

##### ActionDispatch::Request#routes

```ruby
def routes # :nodoc:
  get_header("action_dispatch.routes")
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:173
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:100</summary>

##### Rack::Request::Env#get_header

```ruby
def get_header(name)
  @env[name]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:161
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:116</summary>

##### Rack::Request::Env#set_header

```ruby
def set_header(name, v)
  @env[name] = v
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:173
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:264</summary>

##### ActionDispatch::Request#fullpath

```ruby
def fullpath
  @fullpath ||= super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libapplication.rb:695
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:603</summary>

##### ActionDispatch::Request#fullpath

```ruby
def fullpath
  @fullpath ||= super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:265
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:198</summary>

##### Rack::Request::Helpers#query_string

```ruby
def query_string;    get_header(QUERY_STRING).to_s                  end

# called from /usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:604
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:100</summary>

##### Rack::Request::Env#get_header

```ruby
def get_header(name)
  @env[name]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:198
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:599</summary>

##### Rack::Request::Helpers#path

```ruby
def path
  script_name + path_info
end

# called from /usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:604
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:191</summary>

##### Rack::Request::Helpers#script_name

```ruby
def script_name;     get_header(SCRIPT_NAME).to_s                   end

# called from /usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:600
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:100</summary>

##### Rack::Request::Env#get_header

```ruby
def get_header(name)
  @env[name]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:191
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:194</summary>

##### Rack::Request::Helpers#path_info

```ruby
def path_info;       get_header(PATH_INFO).to_s                     end

# called from /usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:600
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:100</summary>

##### Rack::Request::Env#get_header

```ruby
def get_header(name)
  @env[name]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:194
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:191</summary>

##### Rack::Request::Helpers#script_name

```ruby
def script_name;     get_header(SCRIPT_NAME).to_s                   end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libapplication.rb:696
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:100</summary>

##### Rack::Request::Env#get_header

```ruby
def get_header(name)
  @env[name]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:191
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:517</summary>

##### Rails::Engine#app

```ruby
def app
  @app || @app_build_lock.synchronize {
    @app ||= begin
      stack = default_middleware_stack
      config.middleware = build_middleware.merge_into(stack)
      config.middleware.build(endpoint)
    end
  }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:536
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:133</summary>

##### ActionDispatch::HostAuthorization#call

```ruby
def call(env)
  return @app.call(env) if @permissions.empty?

  request = Request.new(env)
  hosts = blocked_hosts(request)

  if hosts.empty? || excluded?(request)
    mark_as_authorized(request)
    @app.call(env)
  else
    env["action_dispatch.blocked_hosts"] = hosts
    @response_app.call(env)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libengine.rb:536
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:38</summary>

##### ActionDispatch::HostAuthorization::Permissions#empty?

```ruby
def empty?
  @hosts.empty?
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:134
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:60</summary>

##### ActionDispatch::Request#initialize

```ruby
def initialize(env)
  super
  @method            = nil
  @request_method    = nil
  @remote_ip         = nil
  @original_fullpath = nil
  @fullpath          = nil
  @ip                = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:136
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:86</summary>

##### ActionDispatch::Request#initialize

```ruby
def initialize(env)
  super
  @method            = nil
  @request_method    = nil
  @remote_ip         = nil
  @original_fullpath = nil
  @fullpath          = nil
  @ip                = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:61
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/url.rb:179</summary>

##### ActionDispatch::Request#initialize

```ruby
def initialize(env)
  super
  @method            = nil
  @request_method    = nil
  @remote_ip         = nil
  @original_fullpath = nil
  @fullpath          = nil
  @ip                = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:90
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/filter_parameters.rb:21</summary>

##### ActionDispatch::Request#initialize

```ruby
def initialize(env)
  super
  @method            = nil
  @request_method    = nil
  @remote_ip         = nil
  @original_fullpath = nil
  @fullpath          = nil
  @ip                = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/url.rb:180
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:149</summary>

##### ActionDispatch::HostAuthorization#blocked_hosts

```ruby
def blocked_hosts(request)
  hosts = []

  origin_host = request.get_header("HTTP_HOST")
  hosts << origin_host unless @permissions.allows?(origin_host)

  forwarded_host = request.x_forwarded_host&.split(/,\s?/)&.last
  hosts << forwarded_host unless forwarded_host.blank? || @permissions.allows?(forwarded_host)

  hosts
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:137
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:100</summary>

##### Rack::Request::Env#get_header

```ruby
def get_header(name)
  @env[name]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:152
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:42</summary>

##### ActionDispatch::HostAuthorization::Permissions#allows?

```ruby
def allows?(host)
  @hosts.any? do |allowed|
    if allowed.is_a?(IPAddr)
      begin
        allowed === extract_hostname(host)
      rescue
        # IPAddr#=== raises an error if you give it a hostname instead of
        # IP. Treat similar errors as blocked access.
        false
      end
    else
      allowed === host
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:153
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:81</summary>

##### ActionDispatch::HostAuthorization::Permissions#extract_hostname

```ruby
def extract_hostname(host)
  host.slice(VALID_IP_HOSTNAME, "host") || host
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:46
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:81</summary>

##### ActionDispatch::HostAuthorization::Permissions#extract_hostname

```ruby
def extract_hostname(host)
  host.slice(VALID_IP_HOSTNAME, "host") || host
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:46
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:50</summary>

##### ActionDispatch::Request#x_forwarded_host

```ruby
def #{env.delete_prefix("HTTP_").downcase}  # def accept_charset
  get_header "#{env}"                       #   get_header "HTTP_ACCEPT_CHARSET"
end                                         # end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:155
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:100</summary>

##### Rack::Request::Env#get_header

```ruby
def get_header(name)
  @env[name]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:51
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/object/blank.rb:56</summary>

##### NilClass#blank?

```ruby
def blank?
  true
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:156
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:161</summary>

##### ActionDispatch::HostAuthorization#excluded?

```ruby
def excluded?(request)
  @exclude && @exclude.call(request)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:139
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:89</summary>

##### ActionDispatch::HostAuthorization::DefaultResponseApp#call

```ruby
def call(env)
  request = Request.new(env)
  format = request.xhr? ? "text/plain" : "text/html"

  log_error(request)
  response(format, response_body(request))
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:144
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:60</summary>

##### ActionDispatch::Request#initialize

```ruby
def initialize(env)
  super
  @method            = nil
  @request_method    = nil
  @remote_ip         = nil
  @original_fullpath = nil
  @fullpath          = nil
  @ip                = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:90
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:86</summary>

##### ActionDispatch::Request#initialize

```ruby
def initialize(env)
  super
  @method            = nil
  @request_method    = nil
  @remote_ip         = nil
  @original_fullpath = nil
  @fullpath          = nil
  @ip                = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:61
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/url.rb:179</summary>

##### ActionDispatch::Request#initialize

```ruby
def initialize(env)
  super
  @method            = nil
  @request_method    = nil
  @remote_ip         = nil
  @original_fullpath = nil
  @fullpath          = nil
  @ip                = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:90
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/filter_parameters.rb:21</summary>

##### ActionDispatch::Request#initialize

```ruby
def initialize(env)
  super
  @method            = nil
  @request_method    = nil
  @remote_ip         = nil
  @original_fullpath = nil
  @fullpath          = nil
  @ip                = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/url.rb:180
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:293</summary>

##### ActionDispatch::Request#xml_http_request?

```ruby
def xml_http_request?
  /XMLHttpRequest/i.match?(get_header("HTTP_X_REQUESTED_WITH"))
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:91
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:100</summary>

##### Rack::Request::Env#get_header

```ruby
def get_header(name)
  @env[name]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:294
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:112</summary>

##### ActionDispatch::HostAuthorization::DefaultResponseApp#log_error

```ruby
def log_error(request)
  logger = available_logger(request)

  return unless logger

  logger.error("[#{self.class.name}] Blocked hosts: #{request.env["action_dispatch.blocked_hosts"].join(", ")}")
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:93
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:120</summary>

##### ActionDispatch::HostAuthorization::DefaultResponseApp#available_logger

```ruby
def available_logger(request)
  request.logger || ActionView::Base.logger
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:113
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:437</summary>

##### ActionDispatch::Request#logger

```ruby
def logger
  get_header("action_dispatch.logger")
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:121
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:100</summary>

##### Rack::Request::Env#get_header

```ruby
def get_header(name)
  @env[name]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/request.rb:438
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:133</summary>

##### ActiveSupport::BroadcastLogger#error

```ruby
def error(*args, &block)
  dispatch { |logger| logger.error(*args, &block) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:117
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:230</summary>

##### ActiveSupport::BroadcastLogger#dispatch

```ruby
def dispatch(&block)
  @broadcasts.each { |logger| block.call(logger) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:134
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:713</summary>

##### Logger#error

```ruby
def error(progname = nil, &block)
  add(ERROR, nil, progname, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:134
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:656</summary>

##### Logger#add

```ruby
def add(severity, message = nil, progname = nil)
  severity ||= UNKNOWN
  if @logdev.nil? or severity < level
    return true
  end
  if progname.nil?
    progname = @progname
  end
  if message.nil?
    if block_given?
      message = yield
    else
      message = progname
      progname = @progname
    end
  end
  @logdev.write(
    format_message(format_severity(severity), Time.now, progname, message))
  true
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:714
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:38</summary>

##### ActiveSupport::LoggerThreadSafeLevel#level

```ruby
def level
  local_level || super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:658
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:18</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level

```ruby
def local_level
  IsolatedExecutionState[local_level_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:39
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:383</summary>

##### ActiveSupport::LoggerThreadSafeLevel#level

```ruby
def level
  local_level || super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:39
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:750</summary>

##### Logger#level_override

```ruby
def level_override
  @level_override ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:384
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:745</summary>

##### Logger#format_severity

```ruby
def format_severity(severity)
  SEV_LABEL[severity] || 'ANY'
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:673
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:754</summary>

##### Logger#format_message

```ruby
def format_message(severity, datetime, progname, msg)
  (@formatter || @default_formatter).call(severity, datetime, progname, msg)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:673
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:33</summary>

##### ActiveSupport::TaggedLogging::Formatter#call

```ruby
def call(severity, timestamp, progname, msg)
  super(severity, timestamp, progname, tag_stack.format_message(msg))
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:755
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:56</summary>

##### ActiveSupport::TaggedLogging::Formatter#tag_stack

```ruby
def tag_stack
  # We use our object ID here to avoid conflicting with other instances
  @thread_key ||= "activesupport_tagged_logging_tags:#{object_id}"
  IsolatedExecutionState[@thread_key] ||= TagStack.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:34
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:97</summary>

##### ActiveSupport::TaggedLogging::TagStack#format_message

```ruby
def format_message(message)
  if @tags.empty?
    message
  elsif @tags.size == 1
    "[#{@tags[0]}] #{message}"
  else
    @tags_string ||= "[#{@tags.join("] [")}] "
    "#{@tags_string}#{message}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:34
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger.rb:37</summary>

##### ActiveSupport::TaggedLogging::Formatter#call

```ruby
def call(severity, timestamp, progname, msg)
  super(severity, timestamp, progname, tag_stack.format_message(msg))
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:34
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger/log_device.rb:32</summary>

##### Logger::LogDevice#write

```ruby
def write(message)
  begin
    synchronize do
      if @shift_age and @dev.respond_to?(:stat)
        begin
          check_shift_log
        rescue *@reraise_write_errors
          raise
        rescue
          warn("log shifting failed. #{$!}")
        end
      end
      begin
        @dev.write(message)
      rescue *@reraise_write_errors
        raise
      rescue
        warn("log writing failed. #{$!}")
      end
    end
  rescue *@reraise_write_errors
    raise
  rescue Exception => ignored
    warn("log writing failed. #{ignored}")
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:672
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/monitor.rb:201</summary>

##### MonitorMixin#mon_synchronize

```ruby
def mon_synchronize(&b)
  @mon_data.synchronize(&b)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger/log_device.rb:34
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger/log_device.rb:132</summary>

##### Logger::LogDevice#check_shift_log

```ruby
def check_shift_log
  if @shift_age.is_a?(Integer)
    # Note: always returns false if '0'.
    if @filename && (@shift_age > 0) && (@dev.stat.size > @shift_size)
      lock_shift_log { shift_log_age }
    end
  else
    now = Time.now
    if now >= @next_rotate_time
      @next_rotate_time = next_rotate_time(now, @shift_age)
      lock_shift_log { shift_log_period(previous_period_end(now, @shift_age)) }
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger/log_device.rb:37
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:713</summary>

##### Logger#error

```ruby
def error(progname = nil, &block)
  add(ERROR, nil, progname, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:134
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:656</summary>

##### Logger#add

```ruby
def add(severity, message = nil, progname = nil)
  severity ||= UNKNOWN
  if @logdev.nil? or severity < level
    return true
  end
  if progname.nil?
    progname = @progname
  end
  if message.nil?
    if block_given?
      message = yield
    else
      message = progname
      progname = @progname
    end
  end
  @logdev.write(
    format_message(format_severity(severity), Time.now, progname, message))
  true
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:714
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:38</summary>

##### ActiveSupport::LoggerThreadSafeLevel#level

```ruby
def level
  local_level || super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:658
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:18</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level

```ruby
def local_level
  IsolatedExecutionState[local_level_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:39
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:383</summary>

##### ActiveSupport::LoggerThreadSafeLevel#level

```ruby
def level
  local_level || super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:39
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:750</summary>

##### Logger#level_override

```ruby
def level_override
  @level_override ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:384
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:745</summary>

##### Logger#format_severity

```ruby
def format_severity(severity)
  SEV_LABEL[severity] || 'ANY'
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:673
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:754</summary>

##### Logger#format_message

```ruby
def format_message(severity, datetime, progname, msg)
  (@formatter || @default_formatter).call(severity, datetime, progname, msg)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:673
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:33</summary>

##### ActiveSupport::TaggedLogging::Formatter#call

```ruby
def call(severity, timestamp, progname, msg)
  super(severity, timestamp, progname, tag_stack.format_message(msg))
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:755
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:56</summary>

##### ActiveSupport::TaggedLogging::Formatter#tag_stack

```ruby
def tag_stack
  # We use our object ID here to avoid conflicting with other instances
  @thread_key ||= "activesupport_tagged_logging_tags:#{object_id}"
  IsolatedExecutionState[@thread_key] ||= TagStack.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:34
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:97</summary>

##### ActiveSupport::TaggedLogging::TagStack#format_message

```ruby
def format_message(message)
  if @tags.empty?
    message
  elsif @tags.size == 1
    "[#{@tags[0]}] #{message}"
  else
    @tags_string ||= "[#{@tags.join("] [")}] "
    "#{@tags_string}#{message}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:34
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger.rb:37</summary>

##### ActiveSupport::TaggedLogging::Formatter#call

```ruby
def call(severity, timestamp, progname, msg)
  super(severity, timestamp, progname, tag_stack.format_message(msg))
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/tagged_logging.rb:34
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger/log_device.rb:32</summary>

##### Logger::LogDevice#write

```ruby
def write(message)
  begin
    synchronize do
      if @shift_age and @dev.respond_to?(:stat)
        begin
          check_shift_log
        rescue *@reraise_write_errors
          raise
        rescue
          warn("log shifting failed. #{$!}")
        end
      end
      begin
        @dev.write(message)
      rescue *@reraise_write_errors
        raise
      rescue
        warn("log writing failed. #{$!}")
      end
    end
  rescue *@reraise_write_errors
    raise
  rescue Exception => ignored
    warn("log writing failed. #{ignored}")
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:672
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/monitor.rb:201</summary>

##### MonitorMixin#mon_synchronize

```ruby
def mon_synchronize(&b)
  @mon_data.synchronize(&b)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger/log_device.rb:34
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:318</summary>

##### Puma::ThreadPool#reap

```ruby
def reap
  with_mutex do
    dead_workers = @workers.reject(&:alive?)

    dead_workers.each do |worker|
      worker.kill
      @spawned -= 1
    end

    @workers.delete_if do |w|
      dead_workers.include?(w)
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:348
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:216</summary>

##### Puma::ThreadPool#with_mutex

```ruby
def with_mutex(&block)
  @mutex.owned? ?
    yield :
    @mutex.synchronize(&block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:319
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:98</summary>

##### ActionDispatch::HostAuthorization::DefaultResponseApp#response_body

```ruby
def response_body(request)
  return "" unless request.get_header("action_dispatch.show_detailed_exceptions")

  template = DebugView.new(hosts: request.env["action_dispatch.blocked_hosts"])
  template.render(template: "rescues/blocked_host", layout: "rescues/layout")
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:94
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/rack-3.1.7/lib/rack/request.rb:100</summary>

##### Rack::Request::Env#get_header

```ruby
def get_header(name)
  @env[name]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:99
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/debug_view.rb:12</summary>

##### ActionDispatch::DebugView#initialize

```ruby
def initialize(assigns)
  paths = RESCUES_TEMPLATE_PATHS.dup
  lookup_context = ActionView::LookupContext.new(paths)
  super(lookup_context, assigns, nil)
  @exception_wrapper = assigns[:exception_wrapper]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:101
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:232</summary>

##### ActionView::LookupContext#initialize

```ruby
def initialize(view_paths, details = {}, prefixes = [])
  @details_key = nil
  @digest_cache = nil
  @cache = true
  @prefixes = prefixes

  @details = initialize_details({}, details)
  @view_paths = build_view_paths(view_paths)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/debug_view.rb:14
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:253</summary>

##### ActionView::LookupContext#initialize_details

```ruby
def initialize_details(target, details)
  LookupContext.registered_details.each do |k|
    target[k] = details[k] || Accessors::DEFAULT_PROCS[k].call
  end
  target
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:238
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:69</summary>

##### I18n::Base.locale

```ruby
def #{method}
  config.#{method}
end

def #{method}=(value)
  config.#{method} = (value)
end
      DELEGATORS
    end

    # Tells the backend to reload translations. Used in situations like the
    # Rails development environment. Backends can implement whatever strategy
    # is useful.
    def reload!
      config.clear_available_locales_set
      config.backend.reload!
    end

    # Tells the backend to load translations now. Used in situations like the
    # Rails production environment. Backends can implement whatever strategy
    # is useful.
    def eager_load!
      config.backend.eager_load!
    end

    # Translates, pluralizes and interpolates a given key using a given locale,
    # scope, and default, as well as interpolation values.
    #
    # *LOOKUP*
    #
    # Translation data is organized as a nested hash using the upper-level keys
    # as namespaces. <em>E.g.</em>, ActionView ships with the translation:
    # <tt>:date => {:formats => {:short => "%b %d"}}</tt>.
    #
    # Translations can be looked up at any level of this hash using the key argument
    # and the scope option. <em>E.g.</em>, in this example <tt>I18n.t :date</tt>
    # returns the whole translations hash <tt>{:formats => {:short => "%b %d"}}</tt>.
    #
    # Key can be either a single key or a dot-separated key (both Strings and Symbols
    # work). <em>E.g.</em>, the short format can be looked up using both:
    #   I18n.t 'date.formats.short'
    #   I18n.t :'date.formats.short'
    #
    # Scope can be either a single key, a dot-separated key or an array of keys
    # or dot-separated keys. Keys and scopes can be combined freely. So these
    # examples will all look up the same short date format:
    #   I18n.t 'date.formats.short'
    #   I18n.t 'formats.short', :scope => 'date'
    #   I18n.t 'short', :scope => 'date.formats'
    #   I18n.t 'short', :scope => %w(date formats)
    #
    # *INTERPOLATION*
    #
    # Translations can contain interpolation variables which will be replaced by
    # values passed to #translate as part of the options hash, with the keys matching
    # the interpolation variable names.
    #
    # <em>E.g.</em>, with a translation <tt>:foo => "foo %{bar}"</tt> the option
    # value for the key +bar+ will be interpolated into the translation:
    #   I18n.t :foo, :bar => 'baz' # => 'foo baz'
    #
    # *PLURALIZATION*
    #
    # Translation data can contain pluralized translations. Pluralized translations
    # are arrays of singular/plural versions of translations like <tt>['Foo', 'Foos']</tt>.
    #
    # Note that <tt>I18n::Backend::Simple</tt> only supports an algorithm for English
    # pluralization rules. Other algorithms can be supported by custom backends.
    #
    # This returns the singular version of a pluralized translation:
    #   I18n.t :foo, :count => 1 # => 'Foo'
    #
    # These both return the plural version of a pluralized translation:
    #   I18n.t :foo, :count => 0 # => 'Foos'
    #   I18n.t :foo, :count => 2 # => 'Foos'
    #
    # The <tt>:count</tt> option can be used both for pluralization and interpolation.
    # <em>E.g.</em>, with the translation
    # <tt>:foo => ['%{count} foo', '%{count} foos']</tt>, count will
    # be interpolated to the pluralized translation:
    #   I18n.t :foo, :count => 1 # => '1 foo'
    #
    # *DEFAULTS*
    #
    # This returns the translation for <tt>:foo</tt> or <tt>default</tt> if no translation was found:
    #   I18n.t :foo, :default => 'default'
    #
    # This returns the translation for <tt>:foo</tt> or the translation for <tt>:bar</tt> if no
    # translation for <tt>:foo</tt> was found:
    #   I18n.t :foo, :default => :bar
    #
    # Returns the translation for <tt>:foo</tt> or the translation for <tt>:bar</tt>
    # or <tt>default</tt> if no translations for <tt>:foo</tt> and <tt>:bar</tt> were found.
    #   I18n.t :foo, :default => [:bar, 'default']
    #
    # *BULK LOOKUP*
    #
    # This returns an array with the translations for <tt>:foo</tt> and <tt>:bar</tt>.
    #   I18n.t [:foo, :bar]
    #
    # Can be used with dot-separated nested keys:
    #   I18n.t [:'baz.foo', :'baz.bar']
    #
    # Which is the same as using a scope option:
    #   I18n.t [:foo, :bar], :scope => :baz
    #
    # *LAMBDAS*
    #
    # Both translations and defaults can be given as Ruby lambdas. Lambdas will be
    # called and passed the key and options.
    #
    # E.g. assuming the key <tt>:salutation</tt> resolves to:
    #   lambda { |key, options| options[:gender] == 'm' ? "Mr. #{options[:name]}" : "Mrs. #{options[:name]}" }
    #
    # Then <tt>I18n.t(:salutation, :gender => 'w', :name => 'Smith') will result in "Mrs. Smith".
    #
    # Note that the string returned by lambda will go through string interpolation too,
    # so the following lambda would give the same result:
    #   lambda { |key, options| options[:gender] == 'm' ? "Mr. %{name}" : "Mrs. %{name}" }
    #
    # It is recommended to use/implement lambdas in an "idempotent" way. E.g. when
    # a cache layer is put in front of I18n.translate it will generate a cache key
    # from the argument values passed to #translate. Therefore your lambdas should
    # always return the same translations/values per unique combination of argument
    # values.
    #
    # *Ruby 2.7+ keyword arguments warning*
    #
    # This method uses keyword arguments.
    # There is a breaking change in ruby that produces warning with ruby 2.7 and won't work as expected with ruby 3.0
    # The "hash" parameter must be passed as keyword argument.
    #
    # Good:
    #  I18n.t(:salutation, :gender => 'w', :name => 'Smith')
    #  I18n.t(:salutation, **{ :gender => 'w', :name => 'Smith' })
    #  I18n.t(:salutation, **any_hash)
    #
    # Bad:
    #  I18n.t(:salutation, { :gender => 'w', :name => 'Smith' })
    #  I18n.t(:salutation, any_hash)
    #
    def translate(key = nil, throw: false, raise: false, locale: nil, **options) # TODO deprecate :raise
      locale ||= config.locale
      raise Disabled.new('t') if locale == false
      enforce_available_locales!(locale)

      backend = config.backend

      if key.is_a?(Array)
key.map do |k|
  translate_key(k, throw, raise, locale, backend, options)
end
      else
translate_key(key, throw, raise, locale, backend, options)
      end
    end
    alias :t :translate

    # Wrapper for <tt>translate</tt> that adds <tt>:raise => true</tt>. With
    # this option, if no translation is found, it will raise <tt>I18n::MissingTranslationData</tt>
    def translate!(key, **options)
      translate(key, **options, raise: true)
    end
    alias :t! :translate!

    # Returns an array of interpolation keys for the given translation key
    #
    # *Examples*
    #
    # Suppose we have the following:
    #   I18n.t 'example.zero' == 'Zero interpolations'
    #   I18n.t 'example.one' == 'One interpolation %{foo}'
    #   I18n.t 'example.two' == 'Two interpolations %{foo} %{bar}'
    #   I18n.t 'example.three' == ['One %{foo}', 'Two %{bar}', 'Three %{baz}']
    #   I18n.t 'example.one', locale: :other == 'One interpolation %{baz}'
    #
    # Then we can expect the following results:
    #   I18n.interpolation_keys('example.zero') #=> []
    #   I18n.interpolation_keys('example.one') #=> ['foo']
    #   I18n.interpolation_keys('example.two') #=> ['foo', 'bar']
    #   I18n.interpolation_keys('example.three') #=> ['foo', 'bar', 'baz']
    #   I18n.interpolation_keys('one', scope: 'example', locale: :other) #=> ['baz']
    #   I18n.interpolation_keys('does-not-exist') #=> []
    #   I18n.interpolation_keys('example') #=> []
    def interpolation_keys(key, **options)
      raise I18n::ArgumentError if !key.is_a?(String) || key.empty?

      return [] unless exists?(key, **options.slice(:locale, :scope))

      translation = translate(key, **options.slice(:locale, :scope))
      interpolation_keys_from_translation(translation)
.flatten.compact
    end

    # Returns true if a translation exists for a given key, otherwise returns false.
    def exists?(key, _locale = nil, locale: _locale, **options)
      locale ||= config.locale
      raise Disabled.new('exists?') if locale == false
      raise I18n::ArgumentError if key.is_a?(String) && key.empty?
      config.backend.exists?(locale, key, options)
    end

    # Transliterates UTF-8 characters to ASCII. By default this method will
    # transliterate only Latin strings to an ASCII approximation:
    #
    #    I18n.transliterate("rskbing")
    #    # => "AEroskobing"
    #
    #    I18n.transliterate("")
    #    # => "???"
    #
    # It's also possible to add support for per-locale transliterations. I18n
    # expects transliteration rules to be stored at
    # <tt>i18n.transliterate.rule</tt>.
    #
    # Transliteration rules can either be a Hash or a Proc. Procs must accept a
    # single string argument. Hash rules inherit the default transliteration
    # rules, while Procs do not.
    #
    # *Examples*
    #
    # Setting a Hash in <locale>.yml:
    #
    #    i18n:
    #      transliterate:
    #        rule:
    #          : "ue"
    #          : "oe"
    #
    # Setting a Hash using Ruby:
    #
    #     store_translations(:de, i18n: {
    #                          transliterate: {
    #                            rule: {
    #                              '' => 'ue',
    #                              '' => 'oe'
    #                            }
    #                          }
    #                        })
    #
    # Setting a Proc:
    #
    #     translit = lambda {|string| MyTransliterator.transliterate(string) }
    #     store_translations(:xx, :i18n => {:transliterate => {:rule => translit})
    #
    # Transliterating strings:
    #
    #     I18n.locale = :en
    #     I18n.transliterate("Jrgen") # => "Jurgen"
    #     I18n.locale = :de
    #     I18n.transliterate("Jrgen") # => "Juergen"
    #     I18n.transliterate("Jrgen", :locale => :en) # => "Jurgen"
    #     I18n.transliterate("Jrgen", :locale => :de) # => "Juergen"
    def transliterate(key, throw: false, raise: false, locale: nil, replacement: nil, **options)
      locale ||= config.locale
      raise Disabled.new('transliterate') if locale == false
      enforce_available_locales!(locale)

      config.backend.transliterate(locale, key, replacement)
    rescue I18n::ArgumentError => exception
      handle_exception((throw && :throw || raise && :raise), exception, locale, key, options)
    end

    # Localizes certain objects, such as dates and numbers to local formatting.
    def localize(object, locale: nil, format: nil, **options)
      locale ||= config.locale
      raise Disabled.new('l') if locale == false
      enforce_available_locales!(locale)

      format ||= :default
      config.backend.localize(locale, object, format, options)
    end
    alias :l :localize

    # Executes block with given I18n.locale set.
    def with_locale(tmp_locale = nil)
      if tmp_locale == nil
yield
      else
current_locale = self.locale
self.locale = tmp_locale
begin
  yield
ensure
  self.locale = current_locale
end
      end
    end

    # Merges the given locale, key and scope into a single array of keys.
    # Splits keys that contain dots into multiple keys. Makes sure all
    # keys are Symbols.
    def normalize_keys(locale, key, scope, separator = nil)
      separator ||= I18n.default_separator

      [
*normalize_key(locale, separator),
*normalize_key(scope, separator),
*normalize_key(key, separator)
      ]
    end

    # Returns true when the passed locale, which can be either a String or a
    # Symbol, is in the list of available locales. Returns false otherwise.
    def locale_available?(locale)
      I18n.config.available_locales_set.include?(locale)
    end

    # Raises an InvalidLocale exception when the passed locale is not available.
    def enforce_available_locales!(locale)
      if locale != false && config.enforce_available_locales
raise I18n::InvalidLocale.new(locale) if !locale_available?(locale)
      end
    end

    def available_locales_initialized?
      config.available_locales_initialized?
    end

  private

    def translate_key(key, throw, raise, locale, backend, options)
      result = catch(:exception) do
backend.translate(locale, key, options)
      end

      if result.is_a?(MissingTranslation)
handle_exception((throw && :throw || raise && :raise), result, locale, key, options)
      else
result
      end
    end

    # Any exceptions thrown in translate will be sent to the @@exception_handler
    # which can be a Symbol, a Proc or any other Object unless they're forced to
    # be raised or thrown (MissingTranslation).
    #
    # If exception_handler is a Symbol then it will simply be sent to I18n as
    # a method call. A Proc will simply be called. In any other case the
    # method #call will be called on the exception_handler object.
    #
    # Examples:
    #
    #   I18n.exception_handler = :custom_exception_handler              # this is the default
    #   I18n.custom_exception_handler(exception, locale, key, options)  # will be called like this
    #
    #   I18n.exception_handler = lambda { |*args| ... }                 # a lambda
    #   I18n.exception_handler.call(exception, locale, key, options)    # will be called like this
    #
    #   I18n.exception_handler = I18nExceptionHandler.new               # an object
    #   I18n.exception_handler.call(exception, locale, key, options)    # will be called like this
    def handle_exception(handling, exception, locale, key, options)
      case handling
      when :raise
raise exception.respond_to?(:to_exception) ? exception.to_exception : exception
      when :throw
throw :exception, exception
      else
case handler = options[:exception_handler] || config.exception_handler
when Symbol
  send(handler, exception, locale, key, options)
else
  handler.call(exception, locale, key, options)
end
      end
    end

    @@normalized_key_cache = I18n.new_double_nested_cache

    def normalize_key(key, separator)
      @@normalized_key_cache[separator][key] ||=
case key
when Array
  key.flat_map { |k| normalize_key(k, separator) }
else
  keys = key.to_s.split(separator)
  keys.delete('')
  keys.map! do |k|
    case k
    when /\A[-+]?([1-9]\d*|0)\z/ # integer
      k.to_i
    when 'true'
      true
    when 'false'
      false
    else
      k.to_sym
    end
  end
  keys
end
    end

    def interpolation_keys_from_translation(translation)
      case translation
      when ::String
translation.scan(Regexp.union(I18n.config.interpolation_patterns))
      when ::Array
translation.map { |element| interpolation_keys_from_translation(element) }
      else
[]
      end
    end
  end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:56</summary>

##### I18n::Base.config

```ruby
def config
  Thread.current[:i18n_config] ||= I18n::Config.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/rendering.rb:17</summary>

##### ActionView::I18nProxy#locale

```ruby
def locale
  @original_config.locale
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/config.rb:9</summary>

##### I18n::Config#locale

```ruby
def locale
  defined?(@locale) && @locale != nil ? @locale : default_locale
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/rendering.rb:18
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/config.rb:30</summary>

##### I18n::Config#default_locale

```ruby
def default_locale
  @@default_locale ||= :en
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/config.rb:10
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/backend/fallbacks.rb:17</summary>

##### I18n.fallbacks

```ruby
def fallbacks
  @@fallbacks ||= I18n::Locale::Fallbacks.new
  Thread.current[:i18n_fallbacks] || @@fallbacks
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:45
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:69</summary>

##### I18n::Base.locale

```ruby
def #{method}
  config.#{method}
end

def #{method}=(value)
  config.#{method} = (value)
end
      DELEGATORS
    end

    # Tells the backend to reload translations. Used in situations like the
    # Rails development environment. Backends can implement whatever strategy
    # is useful.
    def reload!
      config.clear_available_locales_set
      config.backend.reload!
    end

    # Tells the backend to load translations now. Used in situations like the
    # Rails production environment. Backends can implement whatever strategy
    # is useful.
    def eager_load!
      config.backend.eager_load!
    end

    # Translates, pluralizes and interpolates a given key using a given locale,
    # scope, and default, as well as interpolation values.
    #
    # *LOOKUP*
    #
    # Translation data is organized as a nested hash using the upper-level keys
    # as namespaces. <em>E.g.</em>, ActionView ships with the translation:
    # <tt>:date => {:formats => {:short => "%b %d"}}</tt>.
    #
    # Translations can be looked up at any level of this hash using the key argument
    # and the scope option. <em>E.g.</em>, in this example <tt>I18n.t :date</tt>
    # returns the whole translations hash <tt>{:formats => {:short => "%b %d"}}</tt>.
    #
    # Key can be either a single key or a dot-separated key (both Strings and Symbols
    # work). <em>E.g.</em>, the short format can be looked up using both:
    #   I18n.t 'date.formats.short'
    #   I18n.t :'date.formats.short'
    #
    # Scope can be either a single key, a dot-separated key or an array of keys
    # or dot-separated keys. Keys and scopes can be combined freely. So these
    # examples will all look up the same short date format:
    #   I18n.t 'date.formats.short'
    #   I18n.t 'formats.short', :scope => 'date'
    #   I18n.t 'short', :scope => 'date.formats'
    #   I18n.t 'short', :scope => %w(date formats)
    #
    # *INTERPOLATION*
    #
    # Translations can contain interpolation variables which will be replaced by
    # values passed to #translate as part of the options hash, with the keys matching
    # the interpolation variable names.
    #
    # <em>E.g.</em>, with a translation <tt>:foo => "foo %{bar}"</tt> the option
    # value for the key +bar+ will be interpolated into the translation:
    #   I18n.t :foo, :bar => 'baz' # => 'foo baz'
    #
    # *PLURALIZATION*
    #
    # Translation data can contain pluralized translations. Pluralized translations
    # are arrays of singular/plural versions of translations like <tt>['Foo', 'Foos']</tt>.
    #
    # Note that <tt>I18n::Backend::Simple</tt> only supports an algorithm for English
    # pluralization rules. Other algorithms can be supported by custom backends.
    #
    # This returns the singular version of a pluralized translation:
    #   I18n.t :foo, :count => 1 # => 'Foo'
    #
    # These both return the plural version of a pluralized translation:
    #   I18n.t :foo, :count => 0 # => 'Foos'
    #   I18n.t :foo, :count => 2 # => 'Foos'
    #
    # The <tt>:count</tt> option can be used both for pluralization and interpolation.
    # <em>E.g.</em>, with the translation
    # <tt>:foo => ['%{count} foo', '%{count} foos']</tt>, count will
    # be interpolated to the pluralized translation:
    #   I18n.t :foo, :count => 1 # => '1 foo'
    #
    # *DEFAULTS*
    #
    # This returns the translation for <tt>:foo</tt> or <tt>default</tt> if no translation was found:
    #   I18n.t :foo, :default => 'default'
    #
    # This returns the translation for <tt>:foo</tt> or the translation for <tt>:bar</tt> if no
    # translation for <tt>:foo</tt> was found:
    #   I18n.t :foo, :default => :bar
    #
    # Returns the translation for <tt>:foo</tt> or the translation for <tt>:bar</tt>
    # or <tt>default</tt> if no translations for <tt>:foo</tt> and <tt>:bar</tt> were found.
    #   I18n.t :foo, :default => [:bar, 'default']
    #
    # *BULK LOOKUP*
    #
    # This returns an array with the translations for <tt>:foo</tt> and <tt>:bar</tt>.
    #   I18n.t [:foo, :bar]
    #
    # Can be used with dot-separated nested keys:
    #   I18n.t [:'baz.foo', :'baz.bar']
    #
    # Which is the same as using a scope option:
    #   I18n.t [:foo, :bar], :scope => :baz
    #
    # *LAMBDAS*
    #
    # Both translations and defaults can be given as Ruby lambdas. Lambdas will be
    # called and passed the key and options.
    #
    # E.g. assuming the key <tt>:salutation</tt> resolves to:
    #   lambda { |key, options| options[:gender] == 'm' ? "Mr. #{options[:name]}" : "Mrs. #{options[:name]}" }
    #
    # Then <tt>I18n.t(:salutation, :gender => 'w', :name => 'Smith') will result in "Mrs. Smith".
    #
    # Note that the string returned by lambda will go through string interpolation too,
    # so the following lambda would give the same result:
    #   lambda { |key, options| options[:gender] == 'm' ? "Mr. %{name}" : "Mrs. %{name}" }
    #
    # It is recommended to use/implement lambdas in an "idempotent" way. E.g. when
    # a cache layer is put in front of I18n.translate it will generate a cache key
    # from the argument values passed to #translate. Therefore your lambdas should
    # always return the same translations/values per unique combination of argument
    # values.
    #
    # *Ruby 2.7+ keyword arguments warning*
    #
    # This method uses keyword arguments.
    # There is a breaking change in ruby that produces warning with ruby 2.7 and won't work as expected with ruby 3.0
    # The "hash" parameter must be passed as keyword argument.
    #
    # Good:
    #  I18n.t(:salutation, :gender => 'w', :name => 'Smith')
    #  I18n.t(:salutation, **{ :gender => 'w', :name => 'Smith' })
    #  I18n.t(:salutation, **any_hash)
    #
    # Bad:
    #  I18n.t(:salutation, { :gender => 'w', :name => 'Smith' })
    #  I18n.t(:salutation, any_hash)
    #
    def translate(key = nil, throw: false, raise: false, locale: nil, **options) # TODO deprecate :raise
      locale ||= config.locale
      raise Disabled.new('t') if locale == false
      enforce_available_locales!(locale)

      backend = config.backend

      if key.is_a?(Array)
key.map do |k|
  translate_key(k, throw, raise, locale, backend, options)
end
      else
translate_key(key, throw, raise, locale, backend, options)
      end
    end
    alias :t :translate

    # Wrapper for <tt>translate</tt> that adds <tt>:raise => true</tt>. With
    # this option, if no translation is found, it will raise <tt>I18n::MissingTranslationData</tt>
    def translate!(key, **options)
      translate(key, **options, raise: true)
    end
    alias :t! :translate!

    # Returns an array of interpolation keys for the given translation key
    #
    # *Examples*
    #
    # Suppose we have the following:
    #   I18n.t 'example.zero' == 'Zero interpolations'
    #   I18n.t 'example.one' == 'One interpolation %{foo}'
    #   I18n.t 'example.two' == 'Two interpolations %{foo} %{bar}'
    #   I18n.t 'example.three' == ['One %{foo}', 'Two %{bar}', 'Three %{baz}']
    #   I18n.t 'example.one', locale: :other == 'One interpolation %{baz}'
    #
    # Then we can expect the following results:
    #   I18n.interpolation_keys('example.zero') #=> []
    #   I18n.interpolation_keys('example.one') #=> ['foo']
    #   I18n.interpolation_keys('example.two') #=> ['foo', 'bar']
    #   I18n.interpolation_keys('example.three') #=> ['foo', 'bar', 'baz']
    #   I18n.interpolation_keys('one', scope: 'example', locale: :other) #=> ['baz']
    #   I18n.interpolation_keys('does-not-exist') #=> []
    #   I18n.interpolation_keys('example') #=> []
    def interpolation_keys(key, **options)
      raise I18n::ArgumentError if !key.is_a?(String) || key.empty?

      return [] unless exists?(key, **options.slice(:locale, :scope))

      translation = translate(key, **options.slice(:locale, :scope))
      interpolation_keys_from_translation(translation)
.flatten.compact
    end

    # Returns true if a translation exists for a given key, otherwise returns false.
    def exists?(key, _locale = nil, locale: _locale, **options)
      locale ||= config.locale
      raise Disabled.new('exists?') if locale == false
      raise I18n::ArgumentError if key.is_a?(String) && key.empty?
      config.backend.exists?(locale, key, options)
    end

    # Transliterates UTF-8 characters to ASCII. By default this method will
    # transliterate only Latin strings to an ASCII approximation:
    #
    #    I18n.transliterate("rskbing")
    #    # => "AEroskobing"
    #
    #    I18n.transliterate("")
    #    # => "???"
    #
    # It's also possible to add support for per-locale transliterations. I18n
    # expects transliteration rules to be stored at
    # <tt>i18n.transliterate.rule</tt>.
    #
    # Transliteration rules can either be a Hash or a Proc. Procs must accept a
    # single string argument. Hash rules inherit the default transliteration
    # rules, while Procs do not.
    #
    # *Examples*
    #
    # Setting a Hash in <locale>.yml:
    #
    #    i18n:
    #      transliterate:
    #        rule:
    #          : "ue"
    #          : "oe"
    #
    # Setting a Hash using Ruby:
    #
    #     store_translations(:de, i18n: {
    #                          transliterate: {
    #                            rule: {
    #                              '' => 'ue',
    #                              '' => 'oe'
    #                            }
    #                          }
    #                        })
    #
    # Setting a Proc:
    #
    #     translit = lambda {|string| MyTransliterator.transliterate(string) }
    #     store_translations(:xx, :i18n => {:transliterate => {:rule => translit})
    #
    # Transliterating strings:
    #
    #     I18n.locale = :en
    #     I18n.transliterate("Jrgen") # => "Jurgen"
    #     I18n.locale = :de
    #     I18n.transliterate("Jrgen") # => "Juergen"
    #     I18n.transliterate("Jrgen", :locale => :en) # => "Jurgen"
    #     I18n.transliterate("Jrgen", :locale => :de) # => "Juergen"
    def transliterate(key, throw: false, raise: false, locale: nil, replacement: nil, **options)
      locale ||= config.locale
      raise Disabled.new('transliterate') if locale == false
      enforce_available_locales!(locale)

      config.backend.transliterate(locale, key, replacement)
    rescue I18n::ArgumentError => exception
      handle_exception((throw && :throw || raise && :raise), exception, locale, key, options)
    end

    # Localizes certain objects, such as dates and numbers to local formatting.
    def localize(object, locale: nil, format: nil, **options)
      locale ||= config.locale
      raise Disabled.new('l') if locale == false
      enforce_available_locales!(locale)

      format ||= :default
      config.backend.localize(locale, object, format, options)
    end
    alias :l :localize

    # Executes block with given I18n.locale set.
    def with_locale(tmp_locale = nil)
      if tmp_locale == nil
yield
      else
current_locale = self.locale
self.locale = tmp_locale
begin
  yield
ensure
  self.locale = current_locale
end
      end
    end

    # Merges the given locale, key and scope into a single array of keys.
    # Splits keys that contain dots into multiple keys. Makes sure all
    # keys are Symbols.
    def normalize_keys(locale, key, scope, separator = nil)
      separator ||= I18n.default_separator

      [
*normalize_key(locale, separator),
*normalize_key(scope, separator),
*normalize_key(key, separator)
      ]
    end

    # Returns true when the passed locale, which can be either a String or a
    # Symbol, is in the list of available locales. Returns false otherwise.
    def locale_available?(locale)
      I18n.config.available_locales_set.include?(locale)
    end

    # Raises an InvalidLocale exception when the passed locale is not available.
    def enforce_available_locales!(locale)
      if locale != false && config.enforce_available_locales
raise I18n::InvalidLocale.new(locale) if !locale_available?(locale)
      end
    end

    def available_locales_initialized?
      config.available_locales_initialized?
    end

  private

    def translate_key(key, throw, raise, locale, backend, options)
      result = catch(:exception) do
backend.translate(locale, key, options)
      end

      if result.is_a?(MissingTranslation)
handle_exception((throw && :throw || raise && :raise), result, locale, key, options)
      else
result
      end
    end

    # Any exceptions thrown in translate will be sent to the @@exception_handler
    # which can be a Symbol, a Proc or any other Object unless they're forced to
    # be raised or thrown (MissingTranslation).
    #
    # If exception_handler is a Symbol then it will simply be sent to I18n as
    # a method call. A Proc will simply be called. In any other case the
    # method #call will be called on the exception_handler object.
    #
    # Examples:
    #
    #   I18n.exception_handler = :custom_exception_handler              # this is the default
    #   I18n.custom_exception_handler(exception, locale, key, options)  # will be called like this
    #
    #   I18n.exception_handler = lambda { |*args| ... }                 # a lambda
    #   I18n.exception_handler.call(exception, locale, key, options)    # will be called like this
    #
    #   I18n.exception_handler = I18nExceptionHandler.new               # an object
    #   I18n.exception_handler.call(exception, locale, key, options)    # will be called like this
    def handle_exception(handling, exception, locale, key, options)
      case handling
      when :raise
raise exception.respond_to?(:to_exception) ? exception.to_exception : exception
      when :throw
throw :exception, exception
      else
case handler = options[:exception_handler] || config.exception_handler
when Symbol
  send(handler, exception, locale, key, options)
else
  handler.call(exception, locale, key, options)
end
      end
    end

    @@normalized_key_cache = I18n.new_double_nested_cache

    def normalize_key(key, separator)
      @@normalized_key_cache[separator][key] ||=
case key
when Array
  key.flat_map { |k| normalize_key(k, separator) }
else
  keys = key.to_s.split(separator)
  keys.delete('')
  keys.map! do |k|
    case k
    when /\A[-+]?([1-9]\d*|0)\z/ # integer
      k.to_i
    when 'true'
      true
    when 'false'
      false
    else
      k.to_sym
    end
  end
  keys
end
    end

    def interpolation_keys_from_translation(translation)
      case translation
      when ::String
translation.scan(Regexp.union(I18n.config.interpolation_patterns))
      when ::Array
translation.map { |element| interpolation_keys_from_translation(element) }
      else
[]
      end
    end
  end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:45
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:56</summary>

##### I18n::Base.config

```ruby
def config
  Thread.current[:i18n_config] ||= I18n::Config.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/rendering.rb:17</summary>

##### ActionView::I18nProxy#locale

```ruby
def locale
  @original_config.locale
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/config.rb:9</summary>

##### I18n::Config#locale

```ruby
def locale
  defined?(@locale) && @locale != nil ? @locale : default_locale
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/rendering.rb:18
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/config.rb:30</summary>

##### I18n::Config#default_locale

```ruby
def default_locale
  @@default_locale ||= :en
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/config.rb:10
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/locale/fallbacks.rb:60</summary>

##### I18n::Locale::Fallbacks#[]

```ruby
def [](locale)
  raise InvalidLocale.new(locale) if locale.nil?
  raise Disabled.new('fallback#[]') if locale == false
  locale = locale.to_sym
  super || store(locale, compute(locale))
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:45
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/time/calculations.rb:332</summary>

##### Time#compare_with_coercion

```ruby
def compare_with_coercion(other)
  # we're avoiding Time#to_datetime and Time#to_time because they're expensive
  if other.class == Time
    compare_without_coercion(other)
  elsif other.is_a?(Time)
    compare_without_coercion(other.to_time)
  else
    to_datetime <=> other
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/puma-6.4.2/lib/puma/plugin/tmp_restart.rb:28
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:69</summary>

##### I18n::Base.default_locale

```ruby
def #{method}
  config.#{method}
end

def #{method}=(value)
  config.#{method} = (value)
end
      DELEGATORS
    end

    # Tells the backend to reload translations. Used in situations like the
    # Rails development environment. Backends can implement whatever strategy
    # is useful.
    def reload!
      config.clear_available_locales_set
      config.backend.reload!
    end

    # Tells the backend to load translations now. Used in situations like the
    # Rails production environment. Backends can implement whatever strategy
    # is useful.
    def eager_load!
      config.backend.eager_load!
    end

    # Translates, pluralizes and interpolates a given key using a given locale,
    # scope, and default, as well as interpolation values.
    #
    # *LOOKUP*
    #
    # Translation data is organized as a nested hash using the upper-level keys
    # as namespaces. <em>E.g.</em>, ActionView ships with the translation:
    # <tt>:date => {:formats => {:short => "%b %d"}}</tt>.
    #
    # Translations can be looked up at any level of this hash using the key argument
    # and the scope option. <em>E.g.</em>, in this example <tt>I18n.t :date</tt>
    # returns the whole translations hash <tt>{:formats => {:short => "%b %d"}}</tt>.
    #
    # Key can be either a single key or a dot-separated key (both Strings and Symbols
    # work). <em>E.g.</em>, the short format can be looked up using both:
    #   I18n.t 'date.formats.short'
    #   I18n.t :'date.formats.short'
    #
    # Scope can be either a single key, a dot-separated key or an array of keys
    # or dot-separated keys. Keys and scopes can be combined freely. So these
    # examples will all look up the same short date format:
    #   I18n.t 'date.formats.short'
    #   I18n.t 'formats.short', :scope => 'date'
    #   I18n.t 'short', :scope => 'date.formats'
    #   I18n.t 'short', :scope => %w(date formats)
    #
    # *INTERPOLATION*
    #
    # Translations can contain interpolation variables which will be replaced by
    # values passed to #translate as part of the options hash, with the keys matching
    # the interpolation variable names.
    #
    # <em>E.g.</em>, with a translation <tt>:foo => "foo %{bar}"</tt> the option
    # value for the key +bar+ will be interpolated into the translation:
    #   I18n.t :foo, :bar => 'baz' # => 'foo baz'
    #
    # *PLURALIZATION*
    #
    # Translation data can contain pluralized translations. Pluralized translations
    # are arrays of singular/plural versions of translations like <tt>['Foo', 'Foos']</tt>.
    #
    # Note that <tt>I18n::Backend::Simple</tt> only supports an algorithm for English
    # pluralization rules. Other algorithms can be supported by custom backends.
    #
    # This returns the singular version of a pluralized translation:
    #   I18n.t :foo, :count => 1 # => 'Foo'
    #
    # These both return the plural version of a pluralized translation:
    #   I18n.t :foo, :count => 0 # => 'Foos'
    #   I18n.t :foo, :count => 2 # => 'Foos'
    #
    # The <tt>:count</tt> option can be used both for pluralization and interpolation.
    # <em>E.g.</em>, with the translation
    # <tt>:foo => ['%{count} foo', '%{count} foos']</tt>, count will
    # be interpolated to the pluralized translation:
    #   I18n.t :foo, :count => 1 # => '1 foo'
    #
    # *DEFAULTS*
    #
    # This returns the translation for <tt>:foo</tt> or <tt>default</tt> if no translation was found:
    #   I18n.t :foo, :default => 'default'
    #
    # This returns the translation for <tt>:foo</tt> or the translation for <tt>:bar</tt> if no
    # translation for <tt>:foo</tt> was found:
    #   I18n.t :foo, :default => :bar
    #
    # Returns the translation for <tt>:foo</tt> or the translation for <tt>:bar</tt>
    # or <tt>default</tt> if no translations for <tt>:foo</tt> and <tt>:bar</tt> were found.
    #   I18n.t :foo, :default => [:bar, 'default']
    #
    # *BULK LOOKUP*
    #
    # This returns an array with the translations for <tt>:foo</tt> and <tt>:bar</tt>.
    #   I18n.t [:foo, :bar]
    #
    # Can be used with dot-separated nested keys:
    #   I18n.t [:'baz.foo', :'baz.bar']
    #
    # Which is the same as using a scope option:
    #   I18n.t [:foo, :bar], :scope => :baz
    #
    # *LAMBDAS*
    #
    # Both translations and defaults can be given as Ruby lambdas. Lambdas will be
    # called and passed the key and options.
    #
    # E.g. assuming the key <tt>:salutation</tt> resolves to:
    #   lambda { |key, options| options[:gender] == 'm' ? "Mr. #{options[:name]}" : "Mrs. #{options[:name]}" }
    #
    # Then <tt>I18n.t(:salutation, :gender => 'w', :name => 'Smith') will result in "Mrs. Smith".
    #
    # Note that the string returned by lambda will go through string interpolation too,
    # so the following lambda would give the same result:
    #   lambda { |key, options| options[:gender] == 'm' ? "Mr. %{name}" : "Mrs. %{name}" }
    #
    # It is recommended to use/implement lambdas in an "idempotent" way. E.g. when
    # a cache layer is put in front of I18n.translate it will generate a cache key
    # from the argument values passed to #translate. Therefore your lambdas should
    # always return the same translations/values per unique combination of argument
    # values.
    #
    # *Ruby 2.7+ keyword arguments warning*
    #
    # This method uses keyword arguments.
    # There is a breaking change in ruby that produces warning with ruby 2.7 and won't work as expected with ruby 3.0
    # The "hash" parameter must be passed as keyword argument.
    #
    # Good:
    #  I18n.t(:salutation, :gender => 'w', :name => 'Smith')
    #  I18n.t(:salutation, **{ :gender => 'w', :name => 'Smith' })
    #  I18n.t(:salutation, **any_hash)
    #
    # Bad:
    #  I18n.t(:salutation, { :gender => 'w', :name => 'Smith' })
    #  I18n.t(:salutation, any_hash)
    #
    def translate(key = nil, throw: false, raise: false, locale: nil, **options) # TODO deprecate :raise
      locale ||= config.locale
      raise Disabled.new('t') if locale == false
      enforce_available_locales!(locale)

      backend = config.backend

      if key.is_a?(Array)
key.map do |k|
  translate_key(k, throw, raise, locale, backend, options)
end
      else
translate_key(key, throw, raise, locale, backend, options)
      end
    end
    alias :t :translate

    # Wrapper for <tt>translate</tt> that adds <tt>:raise => true</tt>. With
    # this option, if no translation is found, it will raise <tt>I18n::MissingTranslationData</tt>
    def translate!(key, **options)
      translate(key, **options, raise: true)
    end
    alias :t! :translate!

    # Returns an array of interpolation keys for the given translation key
    #
    # *Examples*
    #
    # Suppose we have the following:
    #   I18n.t 'example.zero' == 'Zero interpolations'
    #   I18n.t 'example.one' == 'One interpolation %{foo}'
    #   I18n.t 'example.two' == 'Two interpolations %{foo} %{bar}'
    #   I18n.t 'example.three' == ['One %{foo}', 'Two %{bar}', 'Three %{baz}']
    #   I18n.t 'example.one', locale: :other == 'One interpolation %{baz}'
    #
    # Then we can expect the following results:
    #   I18n.interpolation_keys('example.zero') #=> []
    #   I18n.interpolation_keys('example.one') #=> ['foo']
    #   I18n.interpolation_keys('example.two') #=> ['foo', 'bar']
    #   I18n.interpolation_keys('example.three') #=> ['foo', 'bar', 'baz']
    #   I18n.interpolation_keys('one', scope: 'example', locale: :other) #=> ['baz']
    #   I18n.interpolation_keys('does-not-exist') #=> []
    #   I18n.interpolation_keys('example') #=> []
    def interpolation_keys(key, **options)
      raise I18n::ArgumentError if !key.is_a?(String) || key.empty?

      return [] unless exists?(key, **options.slice(:locale, :scope))

      translation = translate(key, **options.slice(:locale, :scope))
      interpolation_keys_from_translation(translation)
.flatten.compact
    end

    # Returns true if a translation exists for a given key, otherwise returns false.
    def exists?(key, _locale = nil, locale: _locale, **options)
      locale ||= config.locale
      raise Disabled.new('exists?') if locale == false
      raise I18n::ArgumentError if key.is_a?(String) && key.empty?
      config.backend.exists?(locale, key, options)
    end

    # Transliterates UTF-8 characters to ASCII. By default this method will
    # transliterate only Latin strings to an ASCII approximation:
    #
    #    I18n.transliterate("rskbing")
    #    # => "AEroskobing"
    #
    #    I18n.transliterate("")
    #    # => "???"
    #
    # It's also possible to add support for per-locale transliterations. I18n
    # expects transliteration rules to be stored at
    # <tt>i18n.transliterate.rule</tt>.
    #
    # Transliteration rules can either be a Hash or a Proc. Procs must accept a
    # single string argument. Hash rules inherit the default transliteration
    # rules, while Procs do not.
    #
    # *Examples*
    #
    # Setting a Hash in <locale>.yml:
    #
    #    i18n:
    #      transliterate:
    #        rule:
    #          : "ue"
    #          : "oe"
    #
    # Setting a Hash using Ruby:
    #
    #     store_translations(:de, i18n: {
    #                          transliterate: {
    #                            rule: {
    #                              '' => 'ue',
    #                              '' => 'oe'
    #                            }
    #                          }
    #                        })
    #
    # Setting a Proc:
    #
    #     translit = lambda {|string| MyTransliterator.transliterate(string) }
    #     store_translations(:xx, :i18n => {:transliterate => {:rule => translit})
    #
    # Transliterating strings:
    #
    #     I18n.locale = :en
    #     I18n.transliterate("Jrgen") # => "Jurgen"
    #     I18n.locale = :de
    #     I18n.transliterate("Jrgen") # => "Juergen"
    #     I18n.transliterate("Jrgen", :locale => :en) # => "Jurgen"
    #     I18n.transliterate("Jrgen", :locale => :de) # => "Juergen"
    def transliterate(key, throw: false, raise: false, locale: nil, replacement: nil, **options)
      locale ||= config.locale
      raise Disabled.new('transliterate') if locale == false
      enforce_available_locales!(locale)

      config.backend.transliterate(locale, key, replacement)
    rescue I18n::ArgumentError => exception
      handle_exception((throw && :throw || raise && :raise), exception, locale, key, options)
    end

    # Localizes certain objects, such as dates and numbers to local formatting.
    def localize(object, locale: nil, format: nil, **options)
      locale ||= config.locale
      raise Disabled.new('l') if locale == false
      enforce_available_locales!(locale)

      format ||= :default
      config.backend.localize(locale, object, format, options)
    end
    alias :l :localize

    # Executes block with given I18n.locale set.
    def with_locale(tmp_locale = nil)
      if tmp_locale == nil
yield
      else
current_locale = self.locale
self.locale = tmp_locale
begin
  yield
ensure
  self.locale = current_locale
end
      end
    end

    # Merges the given locale, key and scope into a single array of keys.
    # Splits keys that contain dots into multiple keys. Makes sure all
    # keys are Symbols.
    def normalize_keys(locale, key, scope, separator = nil)
      separator ||= I18n.default_separator

      [
*normalize_key(locale, separator),
*normalize_key(scope, separator),
*normalize_key(key, separator)
      ]
    end

    # Returns true when the passed locale, which can be either a String or a
    # Symbol, is in the list of available locales. Returns false otherwise.
    def locale_available?(locale)
      I18n.config.available_locales_set.include?(locale)
    end

    # Raises an InvalidLocale exception when the passed locale is not available.
    def enforce_available_locales!(locale)
      if locale != false && config.enforce_available_locales
raise I18n::InvalidLocale.new(locale) if !locale_available?(locale)
      end
    end

    def available_locales_initialized?
      config.available_locales_initialized?
    end

  private

    def translate_key(key, throw, raise, locale, backend, options)
      result = catch(:exception) do
backend.translate(locale, key, options)
      end

      if result.is_a?(MissingTranslation)
handle_exception((throw && :throw || raise && :raise), result, locale, key, options)
      else
result
      end
    end

    # Any exceptions thrown in translate will be sent to the @@exception_handler
    # which can be a Symbol, a Proc or any other Object unless they're forced to
    # be raised or thrown (MissingTranslation).
    #
    # If exception_handler is a Symbol then it will simply be sent to I18n as
    # a method call. A Proc will simply be called. In any other case the
    # method #call will be called on the exception_handler object.
    #
    # Examples:
    #
    #   I18n.exception_handler = :custom_exception_handler              # this is the default
    #   I18n.custom_exception_handler(exception, locale, key, options)  # will be called like this
    #
    #   I18n.exception_handler = lambda { |*args| ... }                 # a lambda
    #   I18n.exception_handler.call(exception, locale, key, options)    # will be called like this
    #
    #   I18n.exception_handler = I18nExceptionHandler.new               # an object
    #   I18n.exception_handler.call(exception, locale, key, options)    # will be called like this
    def handle_exception(handling, exception, locale, key, options)
      case handling
      when :raise
raise exception.respond_to?(:to_exception) ? exception.to_exception : exception
      when :throw
throw :exception, exception
      else
case handler = options[:exception_handler] || config.exception_handler
when Symbol
  send(handler, exception, locale, key, options)
else
  handler.call(exception, locale, key, options)
end
      end
    end

    @@normalized_key_cache = I18n.new_double_nested_cache

    def normalize_key(key, separator)
      @@normalized_key_cache[separator][key] ||=
case key
when Array
  key.flat_map { |k| normalize_key(k, separator) }
else
  keys = key.to_s.split(separator)
  keys.delete('')
  keys.map! do |k|
    case k
    when /\A[-+]?([1-9]\d*|0)\z/ # integer
      k.to_i
    when 'true'
      true
    when 'false'
      false
    else
      k.to_sym
    end
  end
  keys
end
    end

    def interpolation_keys_from_translation(translation)
      case translation
      when ::String
translation.scan(Regexp.union(I18n.config.interpolation_patterns))
      when ::Array
translation.map { |element| interpolation_keys_from_translation(element) }
      else
[]
      end
    end
  end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:46
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:56</summary>

##### I18n::Base.config

```ruby
def config
  Thread.current[:i18n_config] ||= I18n::Config.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/config.rb:30</summary>

##### I18n::Config#default_locale

```ruby
def default_locale
  @@default_locale ||= :en
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:157</summary>

##### ActionView::Base.default_formats

```ruby
cattr_accessor :default_formats

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:50
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:23</summary>

##### ActionView::Template::Handlers.extensions

```ruby
def self.extensions
  @@template_extensions ||= @@template_handlers.keys
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:52
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:166</summary>

##### ActionView::LookupContext::ViewPaths#build_view_paths

```ruby
def build_view_paths(paths)
  if ActionView::PathSet === paths
    paths
  else
    ActionView::PathSet.new(Array(paths))
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:239
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:18</summary>

##### ActionView::PathSet#initialize

```ruby
def initialize(paths = [])
  @paths = typecast(paths).freeze
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:170
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:67</summary>

##### ActionView::PathSet#typecast

```ruby
def typecast(paths)
  paths.map do |path|
    case path
    when Pathname, String
      # This path should only be reached by "direct" users of
      # ActionView::Base (not using the ViewPaths or Renderer modules).
      # We can't cache/de-dup the file system resolver in this case as we
      # don't know which compiled_method_container we'll be rendering to.
      FileSystemResolver.new(path)
    when Resolver
      path
    else
      raise TypeError, "#{path.inspect} is not a valid path: must be a String, Pathname, or Resolver"
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:96</summary>

##### ActionView::FileSystemResolver#initialize

```ruby
def initialize(path)
  raise ArgumentError, "path already is a Resolver class" if path.is_a?(Resolver)
  @unbound_templates = Concurrent::Map.new
  @path_parser = PathParser.new
  @path = File.expand_path(path)
  super()
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:75
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:12</summary>

##### Concurrent::Collection::MriMapBackend#initialize

```ruby
def initialize(options = nil, &default_proc)
  super(options, &default_proc)
  @write_lock = Mutex.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:98
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:15</summary>

##### Concurrent::Collection::MriMapBackend#initialize

```ruby
def initialize(options = nil, &default_proc)
  super(options, &default_proc)
  @write_lock = Mutex.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:13
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:116</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#set_backend

```ruby
def set_backend(default_proc)
  if default_proc
    @backend = ::Hash.new { |_h, key| default_proc.call(self, key) }
  else
    @backend = {}
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:17
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:228</summary>

##### ActionDispatch::DebugView#initialize

```ruby
def initialize(assigns)
  paths = RESCUES_TEMPLATE_PATHS.dup
  lookup_context = ActionView::LookupContext.new(paths)
  super(lookup_context, assigns, nil)
  @exception_wrapper = assigns[:exception_wrapper]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/debug_view.rb:15
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/ordered_options.rb:94</summary>

##### ActiveSupport::InheritableOptions#initialize

```ruby
def initialize(parent = nil)
  if parent.kind_of?(OrderedOptions)
    # use the faster _get when dealing with OrderedOptions
    super() { |h, k| parent._get(k) }
  elsif parent
    super() { |h, k| parent[k] }
  else
    super()
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:229
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/renderer.rb:18</summary>

##### ActionView::Renderer#initialize

```ruby
def initialize(lookup_context)
  @lookup_context = lookup_context
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:233
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/helpers/controller_helper.rb:20</summary>

##### ActionView::Helpers::ControllerHelper#assign_controller

```ruby
def assign_controller(controller)
  if @_controller = controller
    @_request = controller.request if controller.respond_to?(:request)
    @_config  = controller.config.inheritable_copy if controller.respond_to?(:config)
    @_default_form_builder = controller.default_form_builder if controller.respond_to?(:default_form_builder)
  else
    @_request ||= nil
    @_config ||= nil
    @_default_form_builder ||= nil
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:236
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/context.rb:18</summary>

##### ActionView::Context#_prepare_context

```ruby
def _prepare_context
  @view_flow     = OutputFlow.new
  @output_buffer = ActionView::OutputBuffer.new
  @virtual_path  = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:237
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/flows.rb:9</summary>

##### ActionView::OutputFlow#initialize

```ruby
def initialize
  @content = Hash.new { |h, k| h[k] = ActiveSupport::SafeBuffer.new }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/context.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:22</summary>

##### ActionView::OutputBuffer#initialize

```ruby
def initialize(buffer = "")
  @raw_buffer = String.new(buffer)
  @raw_buffer.encode!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/context.rb:20
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:207</summary>

##### ActionView::Base#assign

```ruby
def assign(new_assigns) # :nodoc:
  @_assigns = new_assigns
  new_assigns.each { |key, value| instance_variable_set("@#{key}", value) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:242
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/debug_view.rb:51</summary>

##### ActionDispatch::DebugView#render

```ruby
def render(*)
  logger = ActionView::Base.logger

  if logger && logger.respond_to?(:silence)
    logger.silence { super }
  else
    super
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:102
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:166</summary>

##### ActionView::Base.logger

```ruby
class_attribute :logger

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/debug_view.rb:52
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_silence.rb:17</summary>

##### ActiveSupport::LoggerSilence#silence

```ruby
def silence(severity = Logger::ERROR)
  silencer ? log_at(severity) { yield self } : yield(self)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/debug_view.rb:55
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_silence.rb:12</summary>

##### ActiveSupport::BroadcastLogger#silencer

```ruby
cattr_accessor :silencer, default: true

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_silence.rb:18
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:43</summary>

##### ActiveSupport::LoggerThreadSafeLevel#log_at

```ruby
def log_at(level)
  old_local_level, self.local_level = local_level, level
  yield
ensure
  self.local_level = old_local_level
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_silence.rb:18
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:18</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level

```ruby
def local_level
  IsolatedExecutionState[local_level_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:156</summary>

##### ActiveSupport::BroadcastLogger#local_level=

```ruby
def local_level=(level)
  dispatch do |logger|
    logger.local_level = level if logger.respond_to?(:local_level=)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:230</summary>

##### ActiveSupport::BroadcastLogger#dispatch

```ruby
def dispatch(&block)
  @broadcasts.each { |logger| block.call(logger) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:157
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:22</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level=

```ruby
def local_level=(level)
  case level
  when Integer
  when Symbol
    level = Logger::Severity.const_get(level.to_s.upcase)
  when nil
  else
    raise ArgumentError, "Invalid log level: #{level.inspect}"
  end
  if level.nil?
    IsolatedExecutionState.delete(local_level_key)
  else
    IsolatedExecutionState[local_level_key] = level
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:158
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:34
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:41</summary>

##### ActiveSupport::IsolatedExecutionState.[]=

```ruby
def []=(key, value)
  state[key] = value
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:34
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:42
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:22</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level=

```ruby
def local_level=(level)
  case level
  when Integer
  when Symbol
    level = Logger::Severity.const_get(level.to_s.upcase)
  when nil
  else
    raise ArgumentError, "Invalid log level: #{level.inspect}"
  end
  if level.nil?
    IsolatedExecutionState.delete(local_level_key)
  else
    IsolatedExecutionState[local_level_key] = level
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:158
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:34
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:41</summary>

##### ActiveSupport::IsolatedExecutionState.[]=

```ruby
def []=(key, value)
  state[key] = value
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:34
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:42
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/helpers/rendering_helper.rb:30</summary>

##### ActionDispatch::DebugView#render

```ruby
def render(*)
  logger = ActionView::Base.logger

  if logger && logger.respond_to?(:silence)
    logger.silence { super }
  else
    super
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/debug_view.rb:55
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:278</summary>

##### ActionView::Base#in_rendering_context

```ruby
def in_rendering_context(options)
  old_view_renderer  = @view_renderer
  old_lookup_context = @lookup_context

  if !lookup_context.html_fallback_for_js && options[:formats]
    formats = Array(options[:formats])
    if formats == [:js]
      formats << :html
    end
    @lookup_context = lookup_context.with_prepended_formats(formats)
    @view_renderer = ActionView::Renderer.new @lookup_context
  end

  yield @view_renderer
ensure
  @view_renderer = old_view_renderer
  @lookup_context = old_lookup_context
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/helpers/rendering_helper.rb:33
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/renderer.rb:23</summary>

##### ActionView::Renderer#render

```ruby
def render(context, options)
  render_to_object(context, options).body
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/helpers/rendering_helper.rb:37
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/renderer.rb:27</summary>

##### ActionView::Renderer#render_to_object

```ruby
def render_to_object(context, options) # :nodoc:
  if options.key?(:partial)
    render_partial_to_object(context, options)
  else
    render_template_to_object(context, options)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/renderer.rb:24
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/renderer.rb:62</summary>

##### ActionView::Renderer#render_template_to_object

```ruby
def render_template_to_object(context, options) # :nodoc:
  TemplateRenderer.new(@lookup_context).render(context, options)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/renderer.rb:31
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/abstract_renderer.rb:24</summary>

##### ActionView::AbstractRenderer#initialize

```ruby
def initialize(lookup_context)
  @lookup_context = lookup_context
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/renderer.rb:63
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:5</summary>

##### ActionView::TemplateRenderer#render

```ruby
def render(context, options)
  @details = extract_details(options)
  template = determine_template(options)

  prepend_formats(template.format)

  render_template(context, template, options[:layout], options[:locals] || {})
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/renderer.rb:63
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/abstract_renderer.rb:159</summary>

##### ActionView::AbstractRenderer#extract_details

```ruby
def extract_details(options) # :doc:
  details = nil
  LookupContext.registered_details.each do |key|
    value = options[key]

    if value
      (details ||= {})[key] = Array(value)
    end
  end
  details || NO_DETAILS
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:6
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:16</summary>

##### ActionView::TemplateRenderer#determine_template

```ruby
def determine_template(options)
  keys = options.has_key?(:locals) ? options[:locals].keys : []

  if options.key?(:body)
    Template::Text.new(options[:body])
  elsif options.key?(:plain)
    Template::Text.new(options[:plain])
  elsif options.key?(:html)
    Template::HTML.new(options[:html], formats.first)
  elsif options.key?(:file)
    if File.exist?(options[:file])
      Template::RawFile.new(options[:file])
    else
      if Pathname.new(options[:file]).absolute?
        raise ArgumentError, "File #{options[:file]} does not exist"
      else
        raise ArgumentError, "`render file:` should be given the absolute path to a file. '#{options[:file]}' was given instead"
      end
    end
  elsif options.key?(:inline)
    handler = Template.handler_for_extension(options[:type] || "erb")
    format = if handler.respond_to?(:default_format)
      handler.default_format
    else
      @lookup_context.formats.first
    end
    Template::Inline.new(options[:inline], "inline template", handler, locals: keys, format: format)
  elsif options.key?(:renderable)
    Template::Renderable.new(options[:renderable])
  elsif options.key?(:template)
    if options[:template].respond_to?(:render)
      options[:template]
    else
      @lookup_context.find_template(options[:template], options[:prefixes], false, keys, @details)
    end
  else
    raise ArgumentError, "You invoked render but did not give any of :body, :file, :html, :inline, :partial, :plain, :renderable, or :template option."
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:7
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:128</summary>

##### ActionView::LookupContext::ViewPaths#find

```ruby
def find(name, prefixes = [], partial = false, keys = [], options = {})
  name, prefixes = normalize_name(name, prefixes)
  details, details_key = detail_args_for(options)
  @view_paths.find(name, prefixes, partial, details, details_key, keys)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:49
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:209</summary>

##### ActionView::LookupContext::ViewPaths#normalize_name

```ruby
def normalize_name(name, prefixes)
  name = name.to_s
  idx = name.rindex("/")
  return name, prefixes.presence || [""] unless idx

  path_prefix = name[0, idx]
  path_prefix = path_prefix.from(1) if path_prefix.start_with?("/")
  name = name.from(idx + 1)

  if !prefixes || prefixes.empty?
    prefixes = [path_prefix]
  else
    prefixes = prefixes.map { |p| "#{p}/#{path_prefix}" }
  end

  return name, prefixes
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:129
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/access.rb:46</summary>

##### String#from

```ruby
def from(position)
  self[position, length]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:216
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:175</summary>

##### ActionView::LookupContext::ViewPaths#detail_args_for

```ruby
def detail_args_for(options) # :doc:
  return @details, details_key if options.empty? # most common path.
  user_details = @details.merge(options)

  if @cache
    details_key = DetailsKey.details_cache_key(user_details)
  else
    details_key = nil
  end

  [user_details, details_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:130
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:103</summary>

##### ActionView::LookupContext::DetailsCache#details_key

```ruby
def details_key # :nodoc:
  @details_key ||= DetailsKey.details_cache_key(@details) if @cache
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:176
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:65</summary>

##### ActionView::LookupContext::DetailsKey.details_cache_key

```ruby
def self.details_cache_key(details)
  @details_keys.fetch(details) do
    if formats = details[:formats]
      unless Template::Types.valid_symbols?(formats)
        details = details.dup
        details[:formats] &= Template::Types.symbols
      end
    end
    @details_keys[details] ||= TemplateDetails::Requested.new(**details)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:104
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/map.rb:183</summary>

##### Concurrent::Map#fetch

```ruby
def fetch(key, default_value = NULL)
  if NULL != (value = get_or_default(key, NULL))
    value
  elsif block_given?
    yield key
  elsif NULL != default_value
    default_value
  else
    raise_fetch_no_key
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:66
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:110</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#get_or_default

```ruby
def get_or_default(key, default_value)
  @backend.fetch(key, default_value)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/map.rb:184
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:40</summary>

##### ActionView::PathSet#find

```ruby
def find(path, prefixes, partial, details, details_key, locals)
  find_all(path, prefixes, partial, details, details_key, locals).first ||
    raise(MissingTemplate.new(self, path, prefixes, partial, details, details_key, locals))
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:131
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:45</summary>

##### ActionView::PathSet#find_all

```ruby
def find_all(path, prefixes, partial, details, details_key, locals)
  search_combinations(prefixes) do |resolver, prefix|
    templates = resolver.find_all(path, prefix, partial, details, details_key, locals)
    return templates unless templates.empty?
  end
  []
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:41
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:58</summary>

##### ActionView::PathSet#search_combinations

```ruby
def search_combinations(prefixes)
  prefixes = Array(prefixes)
  prefixes.each do |prefix|
    paths.each do |resolver|
      yield resolver, prefix
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:46
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:63</summary>

##### ActionView::Resolver#find_all

```ruby
def find_all(name, prefix = nil, partial = false, details = {}, key = nil, locals = [])
  _find_all(name, prefix, partial, details, key, locals)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:47
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:134</summary>

##### ActionView::FileSystemResolver#_find_all

```ruby
def _find_all(name, prefix, partial, details, key, locals)
  requested_details = key || TemplateDetails::Requested.new(**details)
  cache = key ? @unbound_templates : Concurrent::Map.new

  unbound_templates =
    cache.compute_if_absent(TemplatePath.virtual(name, prefix, partial)) do
      path = TemplatePath.build(name, prefix, partial)
      unbound_templates_from_path(path)
    end

  filter_and_sort_by_details(unbound_templates, requested_details).map do |unbound_template|
    unbound_template.bind_locals(locals)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:64
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:17</summary>

##### ActionView::TemplatePath.virtual

```ruby
def self.virtual(name, prefix, partial)
  if prefix.empty?
    "#{partial ? "_" : ""}#{name}"
  elsif partial
    "#{prefix}/_#{name}"
  else
    "#{prefix}/#{name}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:139
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:21</summary>

##### Concurrent::Collection::MriMapBackend#compute_if_absent

```ruby
def compute_if_absent(key)
  if NULL != (stored_value = @backend.fetch(key, NULL)) # fast non-blocking path for the most likely case
    stored_value
  else
    @write_lock.synchronize { super }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:139
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:29</summary>

##### Concurrent::Collection::MriMapBackend#compute_if_absent

```ruby
def compute_if_absent(key)
  if NULL != (stored_value = @backend.fetch(key, NULL)) # fast non-blocking path for the most likely case
    stored_value
  else
    @write_lock.synchronize { super }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:25
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:43</summary>

##### ActionView::TemplatePath.build

```ruby
def self.build(name, prefix, partial)
  new name, prefix, partial, virtual(name, prefix, partial)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:140
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:17</summary>

##### ActionView::TemplatePath.virtual

```ruby
def self.virtual(name, prefix, partial)
  if prefix.empty?
    "#{partial ? "_" : ""}#{name}"
  elsif partial
    "#{prefix}/_#{name}"
  else
    "#{prefix}/#{name}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:47</summary>

##### ActionView::TemplatePath#initialize

```ruby
def initialize(name, prefix, partial, virtual)
  @name    = name
  @prefix  = prefix
  @partial = partial
  @virtual = virtual
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:166</summary>

##### ActionView::FileSystemResolver#unbound_templates_from_path

```ruby
def unbound_templates_from_path(path)
  if path.name.include?(".")
    return []
  end

  # Instead of checking for every possible path, as our other globs would
  # do, scan the directory for files with the right prefix.
  paths = template_glob("#{escape_entry(path.to_s)}*")

  paths.map do |path|
    build_unbound_template(path)
  end.select do |template|
    # Select for exact virtual path match, including case sensitivity
    template.virtual_path == path.virtual
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:141
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:211</summary>

##### ActionView::FileSystemResolver#escape_entry

```ruby
def escape_entry(entry)
  entry.gsub(/[*?{}\[\]]/, '\\\\\\&')
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:173
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:198</summary>

##### ActionView::FileSystemResolver#template_glob

```ruby
def template_glob(glob)
  query = File.join(escape_entry(@path), glob)
  path_with_slash = File.join(@path, "")

  Dir.glob(query).filter_map do |filename|
    filename = File.expand_path(filename)
    next if File.directory?(filename)
    next unless filename.start_with?(path_with_slash)

    filename
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:173
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:211</summary>

##### ActionView::FileSystemResolver#escape_entry

```ruby
def escape_entry(entry)
  entry.gsub(/[*?{}\[\]]/, '\\\\\\&')
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:199
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:153</summary>

##### ActionView::FileSystemResolver#build_unbound_template

```ruby
def build_unbound_template(template)
  parsed = @path_parser.parse(template.from(@path.size + 1))
  details = parsed.details
  source = source_for_template(template)

  UnboundTemplate.new(
    source,
    template,
    details: details,
    virtual_path: parsed.path.virtual,
  )
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:176
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/access.rb:46</summary>

##### String#from

```ruby
def from(position)
  self[position, length]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:154
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:39</summary>

##### ActionView::Resolver::PathParser#parse

```ruby
def parse(path)
  @regex ||= build_path_regex
  match = @regex.match(path)
  path = TemplatePath.build(match[:action], match[:prefix] || "", !!match[:partial])
  details = TemplateDetails.new(
    match[:locale]&.to_sym,
    match[:handler]&.to_sym,
    match[:format]&.to_sym,
    match[:variant]&.to_sym
  )
  ParsedPath.new(path, details)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:154
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:18</summary>

##### ActionView::Resolver::PathParser#build_path_regex

```ruby
def build_path_regex
  handlers = Regexp.union(Template::Handlers.extensions.map(&:to_s))
  formats = Regexp.union(Template::Types.symbols.map(&:to_s))
  available_locales = I18n.available_locales.map(&:to_s)
  regular_locales = [/[a-z]{2}(?:[-_][A-Z]{2})?/]
  locales = Regexp.union(available_locales + regular_locales)
  variants = "[^.]*"

  %r{
    \A
    (?:(?<prefix>.*)/)?
    (?<partial>_)?
    (?<action>.*?)
    (?:\.(?<locale>#{locales}))??
    (?:\.(?<format>#{formats}))??
    (?:\+(?<variant>#{variants}))??
    (?:\.(?<handler>#{handlers}))?
    \z
  }x
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:40
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:23</summary>

##### ActionView::Template::Handlers.extensions

```ruby
def self.extensions
  @@template_extensions ||= @@template_handlers.keys
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:54</summary>

##### Mime.symbols

```ruby
def symbols
  SET.symbols
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:20
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:69</summary>

##### I18n::Base.available_locales

```ruby
def #{method}
  config.#{method}
end

def #{method}=(value)
  config.#{method} = (value)
end
      DELEGATORS
    end

    # Tells the backend to reload translations. Used in situations like the
    # Rails development environment. Backends can implement whatever strategy
    # is useful.
    def reload!
      config.clear_available_locales_set
      config.backend.reload!
    end

    # Tells the backend to load translations now. Used in situations like the
    # Rails production environment. Backends can implement whatever strategy
    # is useful.
    def eager_load!
      config.backend.eager_load!
    end

    # Translates, pluralizes and interpolates a given key using a given locale,
    # scope, and default, as well as interpolation values.
    #
    # *LOOKUP*
    #
    # Translation data is organized as a nested hash using the upper-level keys
    # as namespaces. <em>E.g.</em>, ActionView ships with the translation:
    # <tt>:date => {:formats => {:short => "%b %d"}}</tt>.
    #
    # Translations can be looked up at any level of this hash using the key argument
    # and the scope option. <em>E.g.</em>, in this example <tt>I18n.t :date</tt>
    # returns the whole translations hash <tt>{:formats => {:short => "%b %d"}}</tt>.
    #
    # Key can be either a single key or a dot-separated key (both Strings and Symbols
    # work). <em>E.g.</em>, the short format can be looked up using both:
    #   I18n.t 'date.formats.short'
    #   I18n.t :'date.formats.short'
    #
    # Scope can be either a single key, a dot-separated key or an array of keys
    # or dot-separated keys. Keys and scopes can be combined freely. So these
    # examples will all look up the same short date format:
    #   I18n.t 'date.formats.short'
    #   I18n.t 'formats.short', :scope => 'date'
    #   I18n.t 'short', :scope => 'date.formats'
    #   I18n.t 'short', :scope => %w(date formats)
    #
    # *INTERPOLATION*
    #
    # Translations can contain interpolation variables which will be replaced by
    # values passed to #translate as part of the options hash, with the keys matching
    # the interpolation variable names.
    #
    # <em>E.g.</em>, with a translation <tt>:foo => "foo %{bar}"</tt> the option
    # value for the key +bar+ will be interpolated into the translation:
    #   I18n.t :foo, :bar => 'baz' # => 'foo baz'
    #
    # *PLURALIZATION*
    #
    # Translation data can contain pluralized translations. Pluralized translations
    # are arrays of singular/plural versions of translations like <tt>['Foo', 'Foos']</tt>.
    #
    # Note that <tt>I18n::Backend::Simple</tt> only supports an algorithm for English
    # pluralization rules. Other algorithms can be supported by custom backends.
    #
    # This returns the singular version of a pluralized translation:
    #   I18n.t :foo, :count => 1 # => 'Foo'
    #
    # These both return the plural version of a pluralized translation:
    #   I18n.t :foo, :count => 0 # => 'Foos'
    #   I18n.t :foo, :count => 2 # => 'Foos'
    #
    # The <tt>:count</tt> option can be used both for pluralization and interpolation.
    # <em>E.g.</em>, with the translation
    # <tt>:foo => ['%{count} foo', '%{count} foos']</tt>, count will
    # be interpolated to the pluralized translation:
    #   I18n.t :foo, :count => 1 # => '1 foo'
    #
    # *DEFAULTS*
    #
    # This returns the translation for <tt>:foo</tt> or <tt>default</tt> if no translation was found:
    #   I18n.t :foo, :default => 'default'
    #
    # This returns the translation for <tt>:foo</tt> or the translation for <tt>:bar</tt> if no
    # translation for <tt>:foo</tt> was found:
    #   I18n.t :foo, :default => :bar
    #
    # Returns the translation for <tt>:foo</tt> or the translation for <tt>:bar</tt>
    # or <tt>default</tt> if no translations for <tt>:foo</tt> and <tt>:bar</tt> were found.
    #   I18n.t :foo, :default => [:bar, 'default']
    #
    # *BULK LOOKUP*
    #
    # This returns an array with the translations for <tt>:foo</tt> and <tt>:bar</tt>.
    #   I18n.t [:foo, :bar]
    #
    # Can be used with dot-separated nested keys:
    #   I18n.t [:'baz.foo', :'baz.bar']
    #
    # Which is the same as using a scope option:
    #   I18n.t [:foo, :bar], :scope => :baz
    #
    # *LAMBDAS*
    #
    # Both translations and defaults can be given as Ruby lambdas. Lambdas will be
    # called and passed the key and options.
    #
    # E.g. assuming the key <tt>:salutation</tt> resolves to:
    #   lambda { |key, options| options[:gender] == 'm' ? "Mr. #{options[:name]}" : "Mrs. #{options[:name]}" }
    #
    # Then <tt>I18n.t(:salutation, :gender => 'w', :name => 'Smith') will result in "Mrs. Smith".
    #
    # Note that the string returned by lambda will go through string interpolation too,
    # so the following lambda would give the same result:
    #   lambda { |key, options| options[:gender] == 'm' ? "Mr. %{name}" : "Mrs. %{name}" }
    #
    # It is recommended to use/implement lambdas in an "idempotent" way. E.g. when
    # a cache layer is put in front of I18n.translate it will generate a cache key
    # from the argument values passed to #translate. Therefore your lambdas should
    # always return the same translations/values per unique combination of argument
    # values.
    #
    # *Ruby 2.7+ keyword arguments warning*
    #
    # This method uses keyword arguments.
    # There is a breaking change in ruby that produces warning with ruby 2.7 and won't work as expected with ruby 3.0
    # The "hash" parameter must be passed as keyword argument.
    #
    # Good:
    #  I18n.t(:salutation, :gender => 'w', :name => 'Smith')
    #  I18n.t(:salutation, **{ :gender => 'w', :name => 'Smith' })
    #  I18n.t(:salutation, **any_hash)
    #
    # Bad:
    #  I18n.t(:salutation, { :gender => 'w', :name => 'Smith' })
    #  I18n.t(:salutation, any_hash)
    #
    def translate(key = nil, throw: false, raise: false, locale: nil, **options) # TODO deprecate :raise
      locale ||= config.locale
      raise Disabled.new('t') if locale == false
      enforce_available_locales!(locale)

      backend = config.backend

      if key.is_a?(Array)
key.map do |k|
  translate_key(k, throw, raise, locale, backend, options)
end
      else
translate_key(key, throw, raise, locale, backend, options)
      end
    end
    alias :t :translate

    # Wrapper for <tt>translate</tt> that adds <tt>:raise => true</tt>. With
    # this option, if no translation is found, it will raise <tt>I18n::MissingTranslationData</tt>
    def translate!(key, **options)
      translate(key, **options, raise: true)
    end
    alias :t! :translate!

    # Returns an array of interpolation keys for the given translation key
    #
    # *Examples*
    #
    # Suppose we have the following:
    #   I18n.t 'example.zero' == 'Zero interpolations'
    #   I18n.t 'example.one' == 'One interpolation %{foo}'
    #   I18n.t 'example.two' == 'Two interpolations %{foo} %{bar}'
    #   I18n.t 'example.three' == ['One %{foo}', 'Two %{bar}', 'Three %{baz}']
    #   I18n.t 'example.one', locale: :other == 'One interpolation %{baz}'
    #
    # Then we can expect the following results:
    #   I18n.interpolation_keys('example.zero') #=> []
    #   I18n.interpolation_keys('example.one') #=> ['foo']
    #   I18n.interpolation_keys('example.two') #=> ['foo', 'bar']
    #   I18n.interpolation_keys('example.three') #=> ['foo', 'bar', 'baz']
    #   I18n.interpolation_keys('one', scope: 'example', locale: :other) #=> ['baz']
    #   I18n.interpolation_keys('does-not-exist') #=> []
    #   I18n.interpolation_keys('example') #=> []
    def interpolation_keys(key, **options)
      raise I18n::ArgumentError if !key.is_a?(String) || key.empty?

      return [] unless exists?(key, **options.slice(:locale, :scope))

      translation = translate(key, **options.slice(:locale, :scope))
      interpolation_keys_from_translation(translation)
.flatten.compact
    end

    # Returns true if a translation exists for a given key, otherwise returns false.
    def exists?(key, _locale = nil, locale: _locale, **options)
      locale ||= config.locale
      raise Disabled.new('exists?') if locale == false
      raise I18n::ArgumentError if key.is_a?(String) && key.empty?
      config.backend.exists?(locale, key, options)
    end

    # Transliterates UTF-8 characters to ASCII. By default this method will
    # transliterate only Latin strings to an ASCII approximation:
    #
    #    I18n.transliterate("rskbing")
    #    # => "AEroskobing"
    #
    #    I18n.transliterate("")
    #    # => "???"
    #
    # It's also possible to add support for per-locale transliterations. I18n
    # expects transliteration rules to be stored at
    # <tt>i18n.transliterate.rule</tt>.
    #
    # Transliteration rules can either be a Hash or a Proc. Procs must accept a
    # single string argument. Hash rules inherit the default transliteration
    # rules, while Procs do not.
    #
    # *Examples*
    #
    # Setting a Hash in <locale>.yml:
    #
    #    i18n:
    #      transliterate:
    #        rule:
    #          : "ue"
    #          : "oe"
    #
    # Setting a Hash using Ruby:
    #
    #     store_translations(:de, i18n: {
    #                          transliterate: {
    #                            rule: {
    #                              '' => 'ue',
    #                              '' => 'oe'
    #                            }
    #                          }
    #                        })
    #
    # Setting a Proc:
    #
    #     translit = lambda {|string| MyTransliterator.transliterate(string) }
    #     store_translations(:xx, :i18n => {:transliterate => {:rule => translit})
    #
    # Transliterating strings:
    #
    #     I18n.locale = :en
    #     I18n.transliterate("Jrgen") # => "Jurgen"
    #     I18n.locale = :de
    #     I18n.transliterate("Jrgen") # => "Juergen"
    #     I18n.transliterate("Jrgen", :locale => :en) # => "Jurgen"
    #     I18n.transliterate("Jrgen", :locale => :de) # => "Juergen"
    def transliterate(key, throw: false, raise: false, locale: nil, replacement: nil, **options)
      locale ||= config.locale
      raise Disabled.new('transliterate') if locale == false
      enforce_available_locales!(locale)

      config.backend.transliterate(locale, key, replacement)
    rescue I18n::ArgumentError => exception
      handle_exception((throw && :throw || raise && :raise), exception, locale, key, options)
    end

    # Localizes certain objects, such as dates and numbers to local formatting.
    def localize(object, locale: nil, format: nil, **options)
      locale ||= config.locale
      raise Disabled.new('l') if locale == false
      enforce_available_locales!(locale)

      format ||= :default
      config.backend.localize(locale, object, format, options)
    end
    alias :l :localize

    # Executes block with given I18n.locale set.
    def with_locale(tmp_locale = nil)
      if tmp_locale == nil
yield
      else
current_locale = self.locale
self.locale = tmp_locale
begin
  yield
ensure
  self.locale = current_locale
end
      end
    end

    # Merges the given locale, key and scope into a single array of keys.
    # Splits keys that contain dots into multiple keys. Makes sure all
    # keys are Symbols.
    def normalize_keys(locale, key, scope, separator = nil)
      separator ||= I18n.default_separator

      [
*normalize_key(locale, separator),
*normalize_key(scope, separator),
*normalize_key(key, separator)
      ]
    end

    # Returns true when the passed locale, which can be either a String or a
    # Symbol, is in the list of available locales. Returns false otherwise.
    def locale_available?(locale)
      I18n.config.available_locales_set.include?(locale)
    end

    # Raises an InvalidLocale exception when the passed locale is not available.
    def enforce_available_locales!(locale)
      if locale != false && config.enforce_available_locales
raise I18n::InvalidLocale.new(locale) if !locale_available?(locale)
      end
    end

    def available_locales_initialized?
      config.available_locales_initialized?
    end

  private

    def translate_key(key, throw, raise, locale, backend, options)
      result = catch(:exception) do
backend.translate(locale, key, options)
      end

      if result.is_a?(MissingTranslation)
handle_exception((throw && :throw || raise && :raise), result, locale, key, options)
      else
result
      end
    end

    # Any exceptions thrown in translate will be sent to the @@exception_handler
    # which can be a Symbol, a Proc or any other Object unless they're forced to
    # be raised or thrown (MissingTranslation).
    #
    # If exception_handler is a Symbol then it will simply be sent to I18n as
    # a method call. A Proc will simply be called. In any other case the
    # method #call will be called on the exception_handler object.
    #
    # Examples:
    #
    #   I18n.exception_handler = :custom_exception_handler              # this is the default
    #   I18n.custom_exception_handler(exception, locale, key, options)  # will be called like this
    #
    #   I18n.exception_handler = lambda { |*args| ... }                 # a lambda
    #   I18n.exception_handler.call(exception, locale, key, options)    # will be called like this
    #
    #   I18n.exception_handler = I18nExceptionHandler.new               # an object
    #   I18n.exception_handler.call(exception, locale, key, options)    # will be called like this
    def handle_exception(handling, exception, locale, key, options)
      case handling
      when :raise
raise exception.respond_to?(:to_exception) ? exception.to_exception : exception
      when :throw
throw :exception, exception
      else
case handler = options[:exception_handler] || config.exception_handler
when Symbol
  send(handler, exception, locale, key, options)
else
  handler.call(exception, locale, key, options)
end
      end
    end

    @@normalized_key_cache = I18n.new_double_nested_cache

    def normalize_key(key, separator)
      @@normalized_key_cache[separator][key] ||=
case key
when Array
  key.flat_map { |k| normalize_key(k, separator) }
else
  keys = key.to_s.split(separator)
  keys.delete('')
  keys.map! do |k|
    case k
    when /\A[-+]?([1-9]\d*|0)\z/ # integer
      k.to_i
    when 'true'
      true
    when 'false'
      false
    else
      k.to_sym
    end
  end
  keys
end
    end

    def interpolation_keys_from_translation(translation)
      case translation
      when ::String
translation.scan(Regexp.union(I18n.config.interpolation_patterns))
      when ::Array
translation.map { |element| interpolation_keys_from_translation(element) }
      else
[]
      end
    end
  end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:21
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:56</summary>

##### I18n::Base.config

```ruby
def config
  Thread.current[:i18n_config] ||= I18n::Config.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/config.rb:43</summary>

##### I18n::Config#available_locales

```ruby
def available_locales
  @@available_locales ||= nil
  @@available_locales || backend.available_locales
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/config.rb:20</summary>

##### I18n::Config#backend

```ruby
def backend
  @@backend ||= Backend::Simple.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/config.rb:45
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/backend/simple.rb:49</summary>

##### I18n::Backend::Simple::Implementation#available_locales

```ruby
def available_locales
  init_translations unless initialized?
  translations.inject([]) do |locales, (locale, data)|
    locales << locale unless data.size <= 1 && (data.empty? || data.has_key?(:i18n))
    locales
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/config.rb:45
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/backend/simple.rb:28</summary>

##### I18n::Backend::Simple::Implementation#initialized?

```ruby
def initialized?
  @initialized ||= false
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/backend/simple.rb:50
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/backend/simple.rb:69</summary>

##### I18n::Backend::Simple::Implementation#translations

```ruby
def translations(do_init: false)
  # To avoid returning empty translations,
  # call `init_translations`
  init_translations if do_init && !initialized?

  @translations ||= Concurrent::Hash.new do |h, k|
    MUTEX.synchronize do
      h[k] = Concurrent::Hash.new
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/i18n-1.14.5/lib/i18n/backend/simple.rb:51
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:43</summary>

##### ActionView::TemplatePath.build

```ruby
def self.build(name, prefix, partial)
  new name, prefix, partial, virtual(name, prefix, partial)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:42
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:17</summary>

##### ActionView::TemplatePath.virtual

```ruby
def self.virtual(name, prefix, partial)
  if prefix.empty?
    "#{partial ? "_" : ""}#{name}"
  elsif partial
    "#{prefix}/_#{name}"
  else
    "#{prefix}/#{name}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:47</summary>

##### ActionView::TemplatePath#initialize

```ruby
def initialize(name, prefix, partial, virtual)
  @name    = name
  @prefix  = prefix
  @partial = partial
  @virtual = virtual
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:35</summary>

##### ActionView::TemplateDetails#initialize

```ruby
def initialize(locale, handler, format, variant)
  @locale = locale
  @handler = handler
  @format = format
  @variant = variant
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:43
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:149</summary>

##### ActionView::FileSystemResolver#source_for_template

```ruby
def source_for_template(template)
  Template::Sources::File.new(template)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:156
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/sources/file.rb:7</summary>

##### ActionView::Template::Sources::File#initialize

```ruby
def initialize(filename)
  @filename = filename
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:150
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:10</summary>

##### ActionView::UnboundTemplate#initialize

```ruby
def initialize(source, identifier, details:, virtual_path:)
  @source = source
  @identifier = identifier
  @details = details
  @virtual_path = virtual_path

  @templates = Concurrent::Map.new(initial_capacity: 2)
  @write_lock = Mutex.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:158
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:12</summary>

##### Concurrent::Collection::MriMapBackend#initialize

```ruby
def initialize(options = nil, &default_proc)
  super(options, &default_proc)
  @write_lock = Mutex.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:16
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:15</summary>

##### Concurrent::Collection::MriMapBackend#initialize

```ruby
def initialize(options = nil, &default_proc)
  super(options, &default_proc)
  @write_lock = Mutex.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:13
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/map.rb:341</summary>

##### Concurrent::Map#validate_options_hash!

```ruby
def validate_options_hash!(options)
  if (initial_capacity = options[:initial_capacity]) && (!initial_capacity.kind_of?(Integer) || initial_capacity < 0)
    raise ArgumentError, ":initial_capacity must be a positive Integer"
  end
  if (load_factor = options[:load_factor]) && (!load_factor.kind_of?(Numeric) || load_factor <= 0 || load_factor > 1)
    raise ArgumentError, ":load_factor must be a number between 0 and 1"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:16
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:116</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#set_backend

```ruby
def set_backend(default_proc)
  if default_proc
    @backend = ::Hash.new { |_h, key| default_proc.call(self, key) }
  else
    @backend = {}
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:17
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:153</summary>

##### ActionView::FileSystemResolver#build_unbound_template

```ruby
def build_unbound_template(template)
  parsed = @path_parser.parse(template.from(@path.size + 1))
  details = parsed.details
  source = source_for_template(template)

  UnboundTemplate.new(
    source,
    template,
    details: details,
    virtual_path: parsed.path.virtual,
  )
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:176
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/access.rb:46</summary>

##### String#from

```ruby
def from(position)
  self[position, length]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:154
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:39</summary>

##### ActionView::Resolver::PathParser#parse

```ruby
def parse(path)
  @regex ||= build_path_regex
  match = @regex.match(path)
  path = TemplatePath.build(match[:action], match[:prefix] || "", !!match[:partial])
  details = TemplateDetails.new(
    match[:locale]&.to_sym,
    match[:handler]&.to_sym,
    match[:format]&.to_sym,
    match[:variant]&.to_sym
  )
  ParsedPath.new(path, details)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:154
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:43</summary>

##### ActionView::TemplatePath.build

```ruby
def self.build(name, prefix, partial)
  new name, prefix, partial, virtual(name, prefix, partial)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:42
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:17</summary>

##### ActionView::TemplatePath.virtual

```ruby
def self.virtual(name, prefix, partial)
  if prefix.empty?
    "#{partial ? "_" : ""}#{name}"
  elsif partial
    "#{prefix}/_#{name}"
  else
    "#{prefix}/#{name}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:47</summary>

##### ActionView::TemplatePath#initialize

```ruby
def initialize(name, prefix, partial, virtual)
  @name    = name
  @prefix  = prefix
  @partial = partial
  @virtual = virtual
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:35</summary>

##### ActionView::TemplateDetails#initialize

```ruby
def initialize(locale, handler, format, variant)
  @locale = locale
  @handler = handler
  @format = format
  @variant = variant
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:43
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:149</summary>

##### ActionView::FileSystemResolver#source_for_template

```ruby
def source_for_template(template)
  Template::Sources::File.new(template)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:156
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/sources/file.rb:7</summary>

##### ActionView::Template::Sources::File#initialize

```ruby
def initialize(filename)
  @filename = filename
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:150
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:10</summary>

##### ActionView::UnboundTemplate#initialize

```ruby
def initialize(source, identifier, details:, virtual_path:)
  @source = source
  @identifier = identifier
  @details = details
  @virtual_path = virtual_path

  @templates = Concurrent::Map.new(initial_capacity: 2)
  @write_lock = Mutex.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:158
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:12</summary>

##### Concurrent::Collection::MriMapBackend#initialize

```ruby
def initialize(options = nil, &default_proc)
  super(options, &default_proc)
  @write_lock = Mutex.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:16
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:15</summary>

##### Concurrent::Collection::MriMapBackend#initialize

```ruby
def initialize(options = nil, &default_proc)
  super(options, &default_proc)
  @write_lock = Mutex.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:13
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/map.rb:341</summary>

##### Concurrent::Map#validate_options_hash!

```ruby
def validate_options_hash!(options)
  if (initial_capacity = options[:initial_capacity]) && (!initial_capacity.kind_of?(Integer) || initial_capacity < 0)
    raise ArgumentError, ":initial_capacity must be a positive Integer"
  end
  if (load_factor = options[:load_factor]) && (!load_factor.kind_of?(Numeric) || load_factor <= 0 || load_factor > 1)
    raise ArgumentError, ":load_factor must be a number between 0 and 1"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:16
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:116</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#set_backend

```ruby
def set_backend(default_proc)
  if default_proc
    @backend = ::Hash.new { |_h, key| default_proc.call(self, key) }
  else
    @backend = {}
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:17
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:183</summary>

##### ActionView::FileSystemResolver#filter_and_sort_by_details

```ruby
def filter_and_sort_by_details(templates, requested_details)
  filtered_templates = templates.select do |template|
    template.details.matches?(requested_details)
  end

  if filtered_templates.count > 1
    filtered_templates.sort_by! do |template|
      template.details.sort_key_for(requested_details)
    end
  end

  filtered_templates
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:144
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:42</summary>

##### ActionView::TemplateDetails#matches?

```ruby
def matches?(requested)
  requested.formats_idx[@format] &&
    requested.locale_idx[@locale] &&
    requested.variants_idx[@variant] &&
    requested.handlers_idx[@handler]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:185
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:42</summary>

##### ActionView::TemplateDetails#matches?

```ruby
def matches?(requested)
  requested.formats_idx[@format] &&
    requested.locale_idx[@locale] &&
    requested.variants_idx[@variant] &&
    requested.handlers_idx[@handler]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:185
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:49</summary>

##### ActionView::TemplateDetails#sort_key_for

```ruby
def sort_key_for(requested)
  [
    requested.formats_idx[@format],
    requested.locale_idx[@locale],
    requested.variants_idx[@variant],
    requested.handlers_idx[@handler]
  ]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:190
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:49</summary>

##### ActionView::TemplateDetails#sort_key_for

```ruby
def sort_key_for(requested)
  [
    requested.formats_idx[@format],
    requested.locale_idx[@locale],
    requested.variants_idx[@variant],
    requested.handlers_idx[@handler]
  ]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:190
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:20</summary>

##### ActionView::UnboundTemplate#bind_locals

```ruby
def bind_locals(locals)
  unless template = @templates[locals]
    @write_lock.synchronize do
      normalized_locals = normalize_locals(locals)

      # We need ||=, both to dedup on the normalized locals and to check
      # while holding the lock.
      template = (@templates[normalized_locals] ||= build_template(normalized_locals))

      # This may have already been assigned, but we've already de-dup'd so
      # reassignment is fine.
      @templates[locals.dup] = template

      if template.strict_locals?
        # Under strict locals, we only need one template.
        # This replaces the @templates Concurrent::Map with a hash which
        # returns this template for every key.
        @templates = Hash.new(template).freeze
      end
    end
  end
  template
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:145
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:21</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#[]

```ruby
def [](key)
  @backend[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:21
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:63</summary>

##### ActionView::UnboundTemplate#normalize_locals

```ruby
def normalize_locals(locals)
  locals.map(&:to_sym).sort!.freeze
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:23
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:21</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#[]

```ruby
def [](key)
  @backend[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:27
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:49</summary>

##### ActionView::UnboundTemplate#build_template

```ruby
def build_template(locals)
  Template.new(
    @source,
    @identifier,
    details.handler_class,

    format: details.format_or_default,
    variant: variant&.to_s,
    virtual_path: @virtual_path,

    locals: locals.map(&:to_s)
  )
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:27
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:58</summary>

##### ActionView::TemplateDetails#handler_class

```ruby
def handler_class
  Template.handler_for_extension(handler)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:53
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:61</summary>

##### ActionView::Template::Handlers.handler_for_extension

```ruby
def handler_for_extension(extension)
  registered_template_handler(extension) || @@default_template_handlers
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:52</summary>

##### ActionView::Template::Handlers.registered_template_handler

```ruby
def registered_template_handler(extension)
  extension && @@template_handlers[extension.to_sym]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:62
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:62</summary>

##### ActionView::TemplateDetails#format_or_default

```ruby
def format_or_default
  format || handler_class.try(:default_format)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:55
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:8</summary>

##### ActionView::UnboundTemplate#variant

```ruby
delegate :locale, :format, :variant, :handler, to: :@details

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:56
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:186</summary>

##### ActionView::Template#initialize

```ruby
def initialize(source, identifier, handler, locals:, format: nil, variant: nil, virtual_path: nil)
  @source            = source.dup
  @identifier        = identifier
  @handler           = handler
  @compiled          = false
  @locals            = locals
  @virtual_path      = virtual_path

  @variable = if @virtual_path
    base = @virtual_path.end_with?("/") ? "" : ::File.basename(@virtual_path)
    base =~ /\A_?(.*?)(?:\.\w+)*\z/
    $1.to_sym
  end

  @format            = format
  @variant           = variant
  @compile_mutex     = Mutex.new
  @strict_locals     = NONE
  @strict_local_keys = nil
  @type              = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:50
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:17</summary>

##### Concurrent::Collection::MriMapBackend#[]=

```ruby
def []=(key, value)
  @write_lock.synchronize { super }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:27
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:25</summary>

##### Concurrent::Collection::MriMapBackend#[]=

```ruby
def []=(key, value)
  @write_lock.synchronize { super }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:18
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:17</summary>

##### Concurrent::Collection::MriMapBackend#[]=

```ruby
def []=(key, value)
  @write_lock.synchronize { super }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:31
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:25</summary>

##### Concurrent::Collection::MriMapBackend#[]=

```ruby
def []=(key, value)
  @write_lock.synchronize { super }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:18
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:356</summary>

##### ActionView::Template#strict_locals?

```ruby
def strict_locals?
  strict_locals!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:33
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:357
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:280</summary>

##### ActionView::Template#source

```ruby
def source
  @source.to_s
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:344
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/sources/file.rb:11</summary>

##### ActionView::Template::Sources::File#to_s

```ruby
def to_s
  ::File.binread @filename
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:281
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:318</summary>

##### Puma::ThreadPool#reap

```ruby
def reap
  with_mutex do
    dead_workers = @workers.reject(&:alive?)

    dead_workers.each do |worker|
      worker.kill
      @spawned -= 1
    end

    @workers.delete_if do |w|
      dead_workers.include?(w)
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:348
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:216</summary>

##### Puma::ThreadPool#with_mutex

```ruby
def with_mutex(&block)
  @mutex.owned? ?
    yield :
    @mutex.synchronize(&block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:319
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:20</summary>

##### ActionView::UnboundTemplate#bind_locals

```ruby
def bind_locals(locals)
  unless template = @templates[locals]
    @write_lock.synchronize do
      normalized_locals = normalize_locals(locals)

      # We need ||=, both to dedup on the normalized locals and to check
      # while holding the lock.
      template = (@templates[normalized_locals] ||= build_template(normalized_locals))

      # This may have already been assigned, but we've already de-dup'd so
      # reassignment is fine.
      @templates[locals.dup] = template

      if template.strict_locals?
        # Under strict locals, we only need one template.
        # This replaces the @templates Concurrent::Map with a hash which
        # returns this template for every key.
        @templates = Hash.new(template).freeze
      end
    end
  end
  template
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:145
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:21</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#[]

```ruby
def [](key)
  @backend[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:21
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:63</summary>

##### ActionView::UnboundTemplate#normalize_locals

```ruby
def normalize_locals(locals)
  locals.map(&:to_sym).sort!.freeze
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:23
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:21</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#[]

```ruby
def [](key)
  @backend[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:27
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:49</summary>

##### ActionView::UnboundTemplate#build_template

```ruby
def build_template(locals)
  Template.new(
    @source,
    @identifier,
    details.handler_class,

    format: details.format_or_default,
    variant: variant&.to_s,
    virtual_path: @virtual_path,

    locals: locals.map(&:to_s)
  )
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:27
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:58</summary>

##### ActionView::TemplateDetails#handler_class

```ruby
def handler_class
  Template.handler_for_extension(handler)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:53
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:61</summary>

##### ActionView::Template::Handlers.handler_for_extension

```ruby
def handler_for_extension(extension)
  registered_template_handler(extension) || @@default_template_handlers
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:52</summary>

##### ActionView::Template::Handlers.registered_template_handler

```ruby
def registered_template_handler(extension)
  extension && @@template_handlers[extension.to_sym]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:62
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:62</summary>

##### ActionView::TemplateDetails#format_or_default

```ruby
def format_or_default
  format || handler_class.try(:default_format)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:55
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:8</summary>

##### ActionView::UnboundTemplate#variant

```ruby
delegate :locale, :format, :variant, :handler, to: :@details

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:56
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:186</summary>

##### ActionView::Template#initialize

```ruby
def initialize(source, identifier, handler, locals:, format: nil, variant: nil, virtual_path: nil)
  @source            = source.dup
  @identifier        = identifier
  @handler           = handler
  @compiled          = false
  @locals            = locals
  @virtual_path      = virtual_path

  @variable = if @virtual_path
    base = @virtual_path.end_with?("/") ? "" : ::File.basename(@virtual_path)
    base =~ /\A_?(.*?)(?:\.\w+)*\z/
    $1.to_sym
  end

  @format            = format
  @variant           = variant
  @compile_mutex     = Mutex.new
  @strict_locals     = NONE
  @strict_local_keys = nil
  @type              = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:50
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:17</summary>

##### Concurrent::Collection::MriMapBackend#[]=

```ruby
def []=(key, value)
  @write_lock.synchronize { super }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:27
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:25</summary>

##### Concurrent::Collection::MriMapBackend#[]=

```ruby
def []=(key, value)
  @write_lock.synchronize { super }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:18
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:17</summary>

##### Concurrent::Collection::MriMapBackend#[]=

```ruby
def []=(key, value)
  @write_lock.synchronize { super }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:31
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:25</summary>

##### Concurrent::Collection::MriMapBackend#[]=

```ruby
def []=(key, value)
  @write_lock.synchronize { super }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:18
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:356</summary>

##### ActionView::Template#strict_locals?

```ruby
def strict_locals?
  strict_locals!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:33
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:357
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:280</summary>

##### ActionView::Template#source

```ruby
def source
  @source.to_s
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:344
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/sources/file.rb:11</summary>

##### ActionView::Template::Sources::File#to_s

```ruby
def to_s
  ::File.binread @filename
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:281
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/abstract_renderer.rb:171</summary>

##### ActionView::AbstractRenderer#prepend_formats

```ruby
def prepend_formats(formats) # :doc:
  formats = Array(formats)
  return if formats.empty? || @lookup_context.html_fallback_for_js

  @lookup_context.formats = formats | @lookup_context.formats
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:9
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:27</summary>

##### ActionView::LookupContext::Accessors#formats

```ruby
def #{name}
  @details[:#{name}] || []
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/abstract_renderer.rb:175
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:263</summary>

##### ActionView::LookupContext#formats=

```ruby
def formats=(values)
  if values
    values = values.dup
    values.concat(default_formats) if values.delete "*/*"
    values.uniq!

    unless Template::Types.valid_symbols?(values)
      invalid_values = values - Template::Types.symbols
      raise ArgumentError, "Invalid formats: #{invalid_values.map(&:inspect).join(", ")}"
    end

    if (values.length == 1) && (values[0] == :js)
      values << :html
      @html_fallback_for_js = true
    end
  end
  super(values)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/abstract_renderer.rb:175
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:58</summary>

##### Mime.valid_symbols?

```ruby
def valid_symbols?(symbols) # :nodoc:
  SET.valid_symbols?(symbols)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:269
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:39</summary>

##### Mime::Mimes#valid_symbols?

```ruby
def valid_symbols?(symbols) # :nodoc
  symbols.all? { |s| @symbols_set.include?(s) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:59
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/lib/ruby/3.0.0/set.rb:246</summary>

##### Set#include?

```ruby
def include?(o)
  @hash[o]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:40
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:31</summary>

##### ActionView::LookupContext#formats=

```ruby
def formats=(values)
  if values
    values = values.dup
    values.concat(default_formats) if values.delete "*/*"
    values.uniq!

    unless Template::Types.valid_symbols?(values)
      invalid_values = values - Template::Types.symbols
      raise ArgumentError, "Invalid formats: #{invalid_values.map(&:inspect).join(", ")}"
    end

    if (values.length == 1) && (values[0] == :js)
      values << :html
      @html_fallback_for_js = true
    end
  end
  super(values)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:279
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/object/blank.rb:25</summary>

##### Object#present?

```ruby
def present?
  !blank?
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:32
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:58</summary>

##### ActionView::TemplateRenderer#render_template

```ruby
def render_template(view, template, layout_name, locals)
  render_with_layout(view, template, layout_name, locals) do |layout|
    ActiveSupport::Notifications.instrument(
      "render_template.action_view",
      identifier: template.identifier,
      layout: layout && layout.virtual_path,
      locals: locals
    ) do
      template.render(view, locals) { |*name| view._layout_for(*name) }
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:11
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:71</summary>

##### ActionView::TemplateRenderer#render_with_layout

```ruby
def render_with_layout(view, template, path, locals)
  layout  = path && find_layout(path, locals.keys, [formats.first])

  body = if layout
    ActiveSupport::Notifications.instrument("render_layout.action_view", identifier: layout.identifier) do
      view.view_flow.set(:layout, yield(layout))
      layout.render(view, locals) { |*name| view._layout_for(*name) }
    end
  else
    yield
  end
  build_rendered_template(body, template)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/abstract_renderer.rb:22</summary>

##### ActionView::AbstractRenderer#formats

```ruby
delegate :template_exists?, :any_templates?, :formats, to: :@lookup_context

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:72
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:27</summary>

##### ActionView::LookupContext::Accessors#formats

```ruby
def #{name}
  @details[:#{name}] || []
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/abstract_renderer.rb:22
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:88</summary>

##### ActionView::TemplateRenderer#find_layout

```ruby
def find_layout(layout, keys, formats)
  resolve_layout(layout, keys, formats)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:72
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:92</summary>

##### ActionView::TemplateRenderer#resolve_layout

```ruby
def resolve_layout(layout, keys, formats)
  details = @details.dup
  details[:formats] = formats

  case layout
  when String
    begin
      if layout.start_with?("/")
        raise ArgumentError, "Rendering layouts from an absolute path is not supported."
      else
        @lookup_context.find_template(layout, nil, false, [], details)
      end
    rescue ActionView::MissingTemplate
      all_details = @details.merge(formats: @lookup_context.default_formats)
      raise unless template_exists?(layout, nil, false, [], **all_details)
    end
  when Proc
    resolve_layout(layout.call(@lookup_context, formats), keys, formats)
  else
    layout
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:89
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:128</summary>

##### ActionView::LookupContext::ViewPaths#find

```ruby
def find(name, prefixes = [], partial = false, keys = [], options = {})
  name, prefixes = normalize_name(name, prefixes)
  details, details_key = detail_args_for(options)
  @view_paths.find(name, prefixes, partial, details, details_key, keys)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:102
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:209</summary>

##### ActionView::LookupContext::ViewPaths#normalize_name

```ruby
def normalize_name(name, prefixes)
  name = name.to_s
  idx = name.rindex("/")
  return name, prefixes.presence || [""] unless idx

  path_prefix = name[0, idx]
  path_prefix = path_prefix.from(1) if path_prefix.start_with?("/")
  name = name.from(idx + 1)

  if !prefixes || prefixes.empty?
    prefixes = [path_prefix]
  else
    prefixes = prefixes.map { |p| "#{p}/#{path_prefix}" }
  end

  return name, prefixes
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:129
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/access.rb:46</summary>

##### String#from

```ruby
def from(position)
  self[position, length]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:216
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:175</summary>

##### ActionView::LookupContext::ViewPaths#detail_args_for

```ruby
def detail_args_for(options) # :doc:
  return @details, details_key if options.empty? # most common path.
  user_details = @details.merge(options)

  if @cache
    details_key = DetailsKey.details_cache_key(user_details)
  else
    details_key = nil
  end

  [user_details, details_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:130
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:65</summary>

##### ActionView::LookupContext::DetailsKey.details_cache_key

```ruby
def self.details_cache_key(details)
  @details_keys.fetch(details) do
    if formats = details[:formats]
      unless Template::Types.valid_symbols?(formats)
        details = details.dup
        details[:formats] &= Template::Types.symbols
      end
    end
    @details_keys[details] ||= TemplateDetails::Requested.new(**details)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:180
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/map.rb:183</summary>

##### Concurrent::Map#fetch

```ruby
def fetch(key, default_value = NULL)
  if NULL != (value = get_or_default(key, NULL))
    value
  elsif block_given?
    yield key
  elsif NULL != default_value
    default_value
  else
    raise_fetch_no_key
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:66
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:110</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#get_or_default

```ruby
def get_or_default(key, default_value)
  @backend.fetch(key, default_value)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/map.rb:184
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:40</summary>

##### ActionView::PathSet#find

```ruby
def find(path, prefixes, partial, details, details_key, locals)
  find_all(path, prefixes, partial, details, details_key, locals).first ||
    raise(MissingTemplate.new(self, path, prefixes, partial, details, details_key, locals))
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/lookup_context.rb:131
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:45</summary>

##### ActionView::PathSet#find_all

```ruby
def find_all(path, prefixes, partial, details, details_key, locals)
  search_combinations(prefixes) do |resolver, prefix|
    templates = resolver.find_all(path, prefix, partial, details, details_key, locals)
    return templates unless templates.empty?
  end
  []
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:41
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:58</summary>

##### ActionView::PathSet#search_combinations

```ruby
def search_combinations(prefixes)
  prefixes = Array(prefixes)
  prefixes.each do |prefix|
    paths.each do |resolver|
      yield resolver, prefix
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:46
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:63</summary>

##### ActionView::Resolver#find_all

```ruby
def find_all(name, prefix = nil, partial = false, details = {}, key = nil, locals = [])
  _find_all(name, prefix, partial, details, key, locals)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/path_set.rb:47
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:134</summary>

##### ActionView::FileSystemResolver#_find_all

```ruby
def _find_all(name, prefix, partial, details, key, locals)
  requested_details = key || TemplateDetails::Requested.new(**details)
  cache = key ? @unbound_templates : Concurrent::Map.new

  unbound_templates =
    cache.compute_if_absent(TemplatePath.virtual(name, prefix, partial)) do
      path = TemplatePath.build(name, prefix, partial)
      unbound_templates_from_path(path)
    end

  filter_and_sort_by_details(unbound_templates, requested_details).map do |unbound_template|
    unbound_template.bind_locals(locals)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:64
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:17</summary>

##### ActionView::TemplatePath.virtual

```ruby
def self.virtual(name, prefix, partial)
  if prefix.empty?
    "#{partial ? "_" : ""}#{name}"
  elsif partial
    "#{prefix}/_#{name}"
  else
    "#{prefix}/#{name}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:139
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:21</summary>

##### Concurrent::Collection::MriMapBackend#compute_if_absent

```ruby
def compute_if_absent(key)
  if NULL != (stored_value = @backend.fetch(key, NULL)) # fast non-blocking path for the most likely case
    stored_value
  else
    @write_lock.synchronize { super }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:139
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:29</summary>

##### Concurrent::Collection::MriMapBackend#compute_if_absent

```ruby
def compute_if_absent(key)
  if NULL != (stored_value = @backend.fetch(key, NULL)) # fast non-blocking path for the most likely case
    stored_value
  else
    @write_lock.synchronize { super }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:25
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:43</summary>

##### ActionView::TemplatePath.build

```ruby
def self.build(name, prefix, partial)
  new name, prefix, partial, virtual(name, prefix, partial)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:140
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:17</summary>

##### ActionView::TemplatePath.virtual

```ruby
def self.virtual(name, prefix, partial)
  if prefix.empty?
    "#{partial ? "_" : ""}#{name}"
  elsif partial
    "#{prefix}/_#{name}"
  else
    "#{prefix}/#{name}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:47</summary>

##### ActionView::TemplatePath#initialize

```ruby
def initialize(name, prefix, partial, virtual)
  @name    = name
  @prefix  = prefix
  @partial = partial
  @virtual = virtual
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:166</summary>

##### ActionView::FileSystemResolver#unbound_templates_from_path

```ruby
def unbound_templates_from_path(path)
  if path.name.include?(".")
    return []
  end

  # Instead of checking for every possible path, as our other globs would
  # do, scan the directory for files with the right prefix.
  paths = template_glob("#{escape_entry(path.to_s)}*")

  paths.map do |path|
    build_unbound_template(path)
  end.select do |template|
    # Select for exact virtual path match, including case sensitivity
    template.virtual_path == path.virtual
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:141
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:211</summary>

##### ActionView::FileSystemResolver#escape_entry

```ruby
def escape_entry(entry)
  entry.gsub(/[*?{}\[\]]/, '\\\\\\&')
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:173
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:198</summary>

##### ActionView::FileSystemResolver#template_glob

```ruby
def template_glob(glob)
  query = File.join(escape_entry(@path), glob)
  path_with_slash = File.join(@path, "")

  Dir.glob(query).filter_map do |filename|
    filename = File.expand_path(filename)
    next if File.directory?(filename)
    next unless filename.start_with?(path_with_slash)

    filename
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:173
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:211</summary>

##### ActionView::FileSystemResolver#escape_entry

```ruby
def escape_entry(entry)
  entry.gsub(/[*?{}\[\]]/, '\\\\\\&')
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:199
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:153</summary>

##### ActionView::FileSystemResolver#build_unbound_template

```ruby
def build_unbound_template(template)
  parsed = @path_parser.parse(template.from(@path.size + 1))
  details = parsed.details
  source = source_for_template(template)

  UnboundTemplate.new(
    source,
    template,
    details: details,
    virtual_path: parsed.path.virtual,
  )
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:176
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/access.rb:46</summary>

##### String#from

```ruby
def from(position)
  self[position, length]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:154
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:39</summary>

##### ActionView::Resolver::PathParser#parse

```ruby
def parse(path)
  @regex ||= build_path_regex
  match = @regex.match(path)
  path = TemplatePath.build(match[:action], match[:prefix] || "", !!match[:partial])
  details = TemplateDetails.new(
    match[:locale]&.to_sym,
    match[:handler]&.to_sym,
    match[:format]&.to_sym,
    match[:variant]&.to_sym
  )
  ParsedPath.new(path, details)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:154
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:43</summary>

##### ActionView::TemplatePath.build

```ruby
def self.build(name, prefix, partial)
  new name, prefix, partial, virtual(name, prefix, partial)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:42
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:17</summary>

##### ActionView::TemplatePath.virtual

```ruby
def self.virtual(name, prefix, partial)
  if prefix.empty?
    "#{partial ? "_" : ""}#{name}"
  elsif partial
    "#{prefix}/_#{name}"
  else
    "#{prefix}/#{name}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:47</summary>

##### ActionView::TemplatePath#initialize

```ruby
def initialize(name, prefix, partial, virtual)
  @name    = name
  @prefix  = prefix
  @partial = partial
  @virtual = virtual
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_path.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:35</summary>

##### ActionView::TemplateDetails#initialize

```ruby
def initialize(locale, handler, format, variant)
  @locale = locale
  @handler = handler
  @format = format
  @variant = variant
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:43
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:149</summary>

##### ActionView::FileSystemResolver#source_for_template

```ruby
def source_for_template(template)
  Template::Sources::File.new(template)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:156
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/sources/file.rb:7</summary>

##### ActionView::Template::Sources::File#initialize

```ruby
def initialize(filename)
  @filename = filename
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:150
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:10</summary>

##### ActionView::UnboundTemplate#initialize

```ruby
def initialize(source, identifier, details:, virtual_path:)
  @source = source
  @identifier = identifier
  @details = details
  @virtual_path = virtual_path

  @templates = Concurrent::Map.new(initial_capacity: 2)
  @write_lock = Mutex.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:158
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:12</summary>

##### Concurrent::Collection::MriMapBackend#initialize

```ruby
def initialize(options = nil, &default_proc)
  super(options, &default_proc)
  @write_lock = Mutex.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:16
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:15</summary>

##### Concurrent::Collection::MriMapBackend#initialize

```ruby
def initialize(options = nil, &default_proc)
  super(options, &default_proc)
  @write_lock = Mutex.new
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:13
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/map.rb:341</summary>

##### Concurrent::Map#validate_options_hash!

```ruby
def validate_options_hash!(options)
  if (initial_capacity = options[:initial_capacity]) && (!initial_capacity.kind_of?(Integer) || initial_capacity < 0)
    raise ArgumentError, ":initial_capacity must be a positive Integer"
  end
  if (load_factor = options[:load_factor]) && (!load_factor.kind_of?(Numeric) || load_factor <= 0 || load_factor > 1)
    raise ArgumentError, ":load_factor must be a number between 0 and 1"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:16
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:116</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#set_backend

```ruby
def set_backend(default_proc)
  if default_proc
    @backend = ::Hash.new { |_h, key| default_proc.call(self, key) }
  else
    @backend = {}
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:17
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:183</summary>

##### ActionView::FileSystemResolver#filter_and_sort_by_details

```ruby
def filter_and_sort_by_details(templates, requested_details)
  filtered_templates = templates.select do |template|
    template.details.matches?(requested_details)
  end

  if filtered_templates.count > 1
    filtered_templates.sort_by! do |template|
      template.details.sort_key_for(requested_details)
    end
  end

  filtered_templates
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:144
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:42</summary>

##### ActionView::TemplateDetails#matches?

```ruby
def matches?(requested)
  requested.formats_idx[@format] &&
    requested.locale_idx[@locale] &&
    requested.variants_idx[@variant] &&
    requested.handlers_idx[@handler]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:185
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:20</summary>

##### ActionView::UnboundTemplate#bind_locals

```ruby
def bind_locals(locals)
  unless template = @templates[locals]
    @write_lock.synchronize do
      normalized_locals = normalize_locals(locals)

      # We need ||=, both to dedup on the normalized locals and to check
      # while holding the lock.
      template = (@templates[normalized_locals] ||= build_template(normalized_locals))

      # This may have already been assigned, but we've already de-dup'd so
      # reassignment is fine.
      @templates[locals.dup] = template

      if template.strict_locals?
        # Under strict locals, we only need one template.
        # This replaces the @templates Concurrent::Map with a hash which
        # returns this template for every key.
        @templates = Hash.new(template).freeze
      end
    end
  end
  template
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/resolver.rb:145
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:21</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#[]

```ruby
def [](key)
  @backend[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:21
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:63</summary>

##### ActionView::UnboundTemplate#normalize_locals

```ruby
def normalize_locals(locals)
  locals.map(&:to_sym).sort!.freeze
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:23
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:21</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#[]

```ruby
def [](key)
  @backend[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:27
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:49</summary>

##### ActionView::UnboundTemplate#build_template

```ruby
def build_template(locals)
  Template.new(
    @source,
    @identifier,
    details.handler_class,

    format: details.format_or_default,
    variant: variant&.to_s,
    virtual_path: @virtual_path,

    locals: locals.map(&:to_s)
  )
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:27
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:58</summary>

##### ActionView::TemplateDetails#handler_class

```ruby
def handler_class
  Template.handler_for_extension(handler)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:53
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:61</summary>

##### ActionView::Template::Handlers.handler_for_extension

```ruby
def handler_for_extension(extension)
  registered_template_handler(extension) || @@default_template_handlers
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:52</summary>

##### ActionView::Template::Handlers.registered_template_handler

```ruby
def registered_template_handler(extension)
  extension && @@template_handlers[extension.to_sym]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:62
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:62</summary>

##### ActionView::TemplateDetails#format_or_default

```ruby
def format_or_default
  format || handler_class.try(:default_format)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:55
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:58</summary>

##### ActionView::TemplateDetails#handler_class

```ruby
def handler_class
  Template.handler_for_extension(handler)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:63
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:61</summary>

##### ActionView::Template::Handlers.handler_for_extension

```ruby
def handler_for_extension(extension)
  registered_template_handler(extension) || @@default_template_handlers
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:52</summary>

##### ActionView::Template::Handlers.registered_template_handler

```ruby
def registered_template_handler(extension)
  extension && @@template_handlers[extension.to_sym]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers.rb:62
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/object/try.rb:7</summary>

##### ActiveSupport::Tryable#try

```ruby
def try(*args, &block)
  if args.empty? && block_given?
    if block.arity == 0
      instance_eval(&block)
    else
      yield self
    end
  elsif respond_to?(args.first)
    public_send(*args, &block)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template_details.rb:63
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:8</summary>

##### ActionView::UnboundTemplate#variant

```ruby
delegate :locale, :format, :variant, :handler, to: :@details

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:56
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:186</summary>

##### ActionView::Template#initialize

```ruby
def initialize(source, identifier, handler, locals:, format: nil, variant: nil, virtual_path: nil)
  @source            = source.dup
  @identifier        = identifier
  @handler           = handler
  @compiled          = false
  @locals            = locals
  @virtual_path      = virtual_path

  @variable = if @virtual_path
    base = @virtual_path.end_with?("/") ? "" : ::File.basename(@virtual_path)
    base =~ /\A_?(.*?)(?:\.\w+)*\z/
    $1.to_sym
  end

  @format            = format
  @variant           = variant
  @compile_mutex     = Mutex.new
  @strict_locals     = NONE
  @strict_local_keys = nil
  @type              = nil
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:50
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:17</summary>

##### Concurrent::Collection::MriMapBackend#[]=

```ruby
def []=(key, value)
  @write_lock.synchronize { super }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:27
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:25</summary>

##### Concurrent::Collection::MriMapBackend#[]=

```ruby
def []=(key, value)
  @write_lock.synchronize { super }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:18
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:17</summary>

##### Concurrent::Collection::MriMapBackend#[]=

```ruby
def []=(key, value)
  @write_lock.synchronize { super }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:31
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:25</summary>

##### Concurrent::Collection::MriMapBackend#[]=

```ruby
def []=(key, value)
  @write_lock.synchronize { super }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:18
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:356</summary>

##### ActionView::Template#strict_locals?

```ruby
def strict_locals?
  strict_locals!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/unbound_template.rb:33
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:357
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:280</summary>

##### ActionView::Template#source

```ruby
def source
  @source.to_s
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:344
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/sources/file.rb:11</summary>

##### ActionView::Template::Sources::File#to_s

```ruby
def to_s
  ::File.binread @filename
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:281
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:204</summary>

##### ActiveSupport::Notifications.instrument

```ruby
def instrument(name, payload = {})
  if notifier.listening?(name)
    instrumenter.instrument(name, payload) { yield payload if block_given? }
  else
    yield payload if block_given?
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:75
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:314</summary>

##### ActiveSupport::Notifications::Fanout#listening?

```ruby
def listening?(name)
  all_listeners_for(name).any? { |s| !s.silenced?(name) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:205
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:301</summary>

##### ActiveSupport::Notifications::Fanout#all_listeners_for

```ruby
def all_listeners_for(name)
  # this is correctly done double-checked locking (Concurrent::Map's lookups have volatile semantics)
  @all_listeners_for[name] || synchronize do
    # use synchronisation when accessing @subscribers
    @all_listeners_for[name] ||=
      @string_subscribers[name] + @other_subscribers.select { |s| s.subscribed_to?(name) }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:315
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:21</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#[]

```ruby
def [](key)
  @backend[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:303
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:408</summary>

##### ActiveSupport::Notifications::Fanout::Subscribers::Evented#silenced?

```ruby
def silenced?(name)
  @silenceable && @delegate.silenced?(name)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:315
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:268</summary>

##### ActiveSupport::Notifications.instrumenter

```ruby
def instrumenter
  registry[notifier] ||= Instrumenter.new(notifier)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:206
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:273</summary>

##### ActiveSupport::Notifications.registry

```ruby
def registry
  ActiveSupport::IsolatedExecutionState[:active_support_notifications_registry] ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:269
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:274
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:54</summary>

##### ActiveSupport::Notifications::Instrumenter#instrument

```ruby
def instrument(name, payload = {})
  handle = build_handle(name, payload)
  handle.start
  begin
    yield payload if block_given?
  rescue Exception => e
    payload[:exception] = [e.class.name, e.message]
    payload[:exception_object] = e
    raise e
  ensure
    handle.finish
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:206
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:78</summary>

##### ActiveSupport::Notifications::Instrumenter#build_handle

```ruby
def build_handle(name, payload)
  @notifier.build_handle(name, @id, payload)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:55
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:276</summary>

##### ActiveSupport::Notifications::Fanout#build_handle

```ruby
def build_handle(name, id, payload)
  Handle.new(self, name, id, payload)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:79
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:234</summary>

##### ActiveSupport::Notifications::Fanout::Handle#initialize

```ruby
def initialize(notifier, name, id, payload) # :nodoc:
  @name = name
  @id = id
  @payload = payload
  @groups = notifier.groups_for(name).map do |group_klass, grouped_listeners|
    group_klass.new(grouped_listeners, name, id, payload)
  end
  @state = :initialized
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:277
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:191</summary>

##### ActiveSupport::Notifications::Fanout#groups_for

```ruby
def groups_for(name) # :nodoc:
  groups = @groups_for.compute_if_absent(name) do
    all_listeners_for(name).reject(&:silenceable).group_by(&:group_class).transform_values do |s|
      s.map(&:delegate)
    end
  end

  silenceable_groups = @silenceable_groups_for.compute_if_absent(name) do
    all_listeners_for(name).select(&:silenceable).group_by(&:group_class).transform_values do |s|
      s.map(&:delegate)
    end
  end

  unless silenceable_groups.empty?
    groups = groups.dup
    silenceable_groups.each do |group_class, subscriptions|
      active_subscriptions = subscriptions.reject { |s| s.silenced?(name) }
      unless active_subscriptions.empty?
        groups[group_class] = (groups[group_class] || []) + active_subscriptions
      end
    end
  end

  groups
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:238
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:21</summary>

##### Concurrent::Collection::MriMapBackend#compute_if_absent

```ruby
def compute_if_absent(key)
  if NULL != (stored_value = @backend.fetch(key, NULL)) # fast non-blocking path for the most likely case
    stored_value
  else
    @write_lock.synchronize { super }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:192
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:21</summary>

##### Concurrent::Collection::MriMapBackend#compute_if_absent

```ruby
def compute_if_absent(key)
  if NULL != (stored_value = @backend.fetch(key, NULL)) # fast non-blocking path for the most likely case
    stored_value
  else
    @write_lock.synchronize { super }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:198
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/log_subscriber.rb:145</summary>

##### ActiveSupport::LogSubscriber#silenced?

```ruby
def silenced?(event)
  logger.nil? || @event_levels[event]&.call(logger)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:207
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:58</summary>

##### ActionView::LogSubscriber::Utils#logger

```ruby
def logger
  ActionView::Base.logger
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/log_subscriber.rb:146
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:166</summary>

##### ActionView::Base.logger

```ruby
class_attribute :logger

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:58</summary>

##### ActionView::LogSubscriber::Utils#logger

```ruby
def logger
  ActionView::Base.logger
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/log_subscriber.rb:146
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:166</summary>

##### ActionView::Base.logger

```ruby
class_attribute :logger

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:179</summary>

##### ActiveSupport::BroadcastLogger#info?

```ruby
def info?
  @broadcasts.any? { |logger| logger.info? }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/log_subscriber.rb:91
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:12</summary>

##### ActiveSupport::LoggerThreadSafeLevel#info?

```ruby
def #{severity.downcase}?                # def debug?
  Logger::#{severity} >= level           #   DEBUG >= level
end                                      # end
      EOT
    end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:180
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:38</summary>

##### ActiveSupport::LoggerThreadSafeLevel#level

```ruby
def level
  local_level || super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:13
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:18</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level

```ruby
def local_level
  IsolatedExecutionState[local_level_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:39
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:12</summary>

##### ActiveSupport::LoggerThreadSafeLevel#info?

```ruby
def #{severity.downcase}?                # def debug?
  Logger::#{severity} >= level           #   DEBUG >= level
end                                      # end
      EOT
    end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:180
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:38</summary>

##### ActiveSupport::LoggerThreadSafeLevel#level

```ruby
def level
  local_level || super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:13
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:18</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level

```ruby
def local_level
  IsolatedExecutionState[local_level_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:39
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:120</summary>

##### ActiveSupport::Notifications::Fanout::BaseGroup#initialize

```ruby
def initialize(listeners, name, id, payload)
  @listeners = listeners
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:239
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:120</summary>

##### ActiveSupport::Notifications::Fanout::BaseGroup#initialize

```ruby
def initialize(listeners, name, id, payload)
  @listeners = listeners
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:239
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:244</summary>

##### ActiveSupport::Notifications::Fanout::Handle#start

```ruby
def start
  ensure_state! :initialized
  @state = :started

  iterate_guarding_exceptions(@groups) do |group|
    group.start(@name, @id, @payload)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:56
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:267</summary>

##### ActiveSupport::Notifications::Fanout::Handle#ensure_state!

```ruby
def ensure_state!(expected)
  if @state != expected
    raise ArgumentError, "expected state to be #{expected.inspect} but was #{@state.inspect}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:245
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:22</summary>

##### ActiveSupport::Notifications::FanoutIteration#iterate_guarding_exceptions

```ruby
def iterate_guarding_exceptions(collection)
  exceptions = nil

  collection.each do |s|
    yield s
  rescue Exception => e
    exceptions ||= []
    exceptions << e
  end

  if exceptions
    exceptions = exceptions.flat_map do |exception|
      exception.is_a?(InstrumentationSubscriberError) ? exception.exceptions : [exception]
    end
    if exceptions.size == 1
      raise exceptions.first
    else
      raise InstrumentationSubscriberError.new(exceptions), cause: exceptions.first
    end
  end

  collection
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:248
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:157</summary>

##### ActiveSupport::Notifications::Fanout::EventedGroup#start

```ruby
def start(name, id, payload)
  each do |s|
    s.start(name, id, payload)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:249
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:124</summary>

##### ActiveSupport::Notifications::Fanout::BaseGroup#each

```ruby
def each(&block)
  iterate_guarding_exceptions(@listeners, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:158
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:22</summary>

##### ActiveSupport::Notifications::FanoutIteration#iterate_guarding_exceptions

```ruby
def iterate_guarding_exceptions(collection)
  exceptions = nil

  collection.each do |s|
    yield s
  rescue Exception => e
    exceptions ||= []
    exceptions << e
  end

  if exceptions
    exceptions = exceptions.flat_map do |exception|
      exception.is_a?(InstrumentationSubscriberError) ? exception.exceptions : [exception]
    end
    if exceptions.size == 1
      raise exceptions.first
    else
      raise InstrumentationSubscriberError.new(exceptions), cause: exceptions.first
    end
  end

  collection
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:125
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:79</summary>

##### ActionView::LogSubscriber::Start#start

```ruby
def start(name, id, payload)
  return unless logger
  logger.debug do
    qualifier =
      if name == "render_template.action_view"
        ""
      elsif name == "render_layout.action_view"
        "layout "
      end

    return unless qualifier

    message = +"  Rendering #{qualifier}#{from_rails_root(payload[:identifier])}"
    message << " within #{from_rails_root(payload[:layout])}" if payload[:layout]
    message
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:159
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:58</summary>

##### ActionView::LogSubscriber::Utils#logger

```ruby
def logger
  ActionView::Base.logger
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:80
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:166</summary>

##### ActionView::Base.logger

```ruby
class_attribute :logger

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:58</summary>

##### ActionView::LogSubscriber::Utils#logger

```ruby
def logger
  ActionView::Base.logger
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:81
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:166</summary>

##### ActionView::Base.logger

```ruby
class_attribute :logger

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:121</summary>

##### ActiveSupport::BroadcastLogger#debug

```ruby
def debug(*args, &block)
  dispatch { |logger| logger.debug(*args, &block) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:81
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:230</summary>

##### ActiveSupport::BroadcastLogger#dispatch

```ruby
def dispatch(&block)
  @broadcasts.each { |logger| block.call(logger) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:122
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:695</summary>

##### Logger#debug

```ruby
def debug(progname = nil, &block)
  add(DEBUG, nil, progname, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:122
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:656</summary>

##### Logger#add

```ruby
def add(severity, message = nil, progname = nil)
  severity ||= UNKNOWN
  if @logdev.nil? or severity < level
    return true
  end
  if progname.nil?
    progname = @progname
  end
  if message.nil?
    if block_given?
      message = yield
    else
      message = progname
      progname = @progname
    end
  end
  @logdev.write(
    format_message(format_severity(severity), Time.now, progname, message))
  true
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:696
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:38</summary>

##### ActiveSupport::LoggerThreadSafeLevel#level

```ruby
def level
  local_level || super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:658
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:18</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level

```ruby
def local_level
  IsolatedExecutionState[local_level_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:39
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:695</summary>

##### Logger#debug

```ruby
def debug(progname = nil, &block)
  add(DEBUG, nil, progname, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:122
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:656</summary>

##### Logger#add

```ruby
def add(severity, message = nil, progname = nil)
  severity ||= UNKNOWN
  if @logdev.nil? or severity < level
    return true
  end
  if progname.nil?
    progname = @progname
  end
  if message.nil?
    if block_given?
      message = yield
    else
      message = progname
      progname = @progname
    end
  end
  @logdev.write(
    format_message(format_severity(severity), Time.now, progname, message))
  true
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:696
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:38</summary>

##### ActiveSupport::LoggerThreadSafeLevel#level

```ruby
def level
  local_level || super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:658
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:18</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level

```ruby
def local_level
  IsolatedExecutionState[local_level_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:39
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:171</summary>

##### ActiveSupport::Notifications::Fanout::EventObjectGroup#start

```ruby
def start(name, id, payload)
  @event = build_event(name, id, payload)
  @event.start!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:249
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:186</summary>

##### ActiveSupport::Notifications::Fanout::EventObjectGroup#build_event

```ruby
def build_event(name, id, payload)
  ActiveSupport::Notifications::Event.new name, nil, nil, id, payload
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:172
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:110</summary>

##### ActiveSupport::Notifications::Event#initialize

```ruby
def initialize(name, start, ending, transaction_id, payload)
  @name           = name
  @payload        = payload.dup
  @time           = start ? start.to_f * 1_000.0 : start
  @transaction_id = transaction_id
  @end            = ending ? ending.to_f * 1_000.0 : ending
  @cpu_time_start = 0.0
  @cpu_time_finish = 0.0
  @allocation_count_start = 0
  @allocation_count_finish = 0
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:187
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:136</summary>

##### ActiveSupport::Notifications::Event#start!

```ruby
def start!
  @time = now
  @cpu_time_start = now_cpu
  @allocation_count_start = now_allocations
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:173
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:202</summary>

##### ActiveSupport::Notifications::Event#now

```ruby
def now
  Process.clock_gettime(Process::CLOCK_MONOTONIC, :float_millisecond)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:137
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:209</summary>

##### ActiveSupport::Notifications::Event#now_cpu

```ruby
def now_cpu
  Process.clock_gettime(Process::CLOCK_THREAD_CPUTIME_ID, :float_millisecond)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:138
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:219</summary>

##### ActiveSupport::Notifications::Event#now_allocations

```ruby
def now_allocations
  GC.stat(:total_allocated_objects)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:139
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:204</summary>

##### ActiveSupport::Notifications.instrument

```ruby
def instrument(name, payload = {})
  if notifier.listening?(name)
    instrumenter.instrument(name, payload) { yield payload if block_given? }
  else
    yield payload if block_given?
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:60
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:314</summary>

##### ActiveSupport::Notifications::Fanout#listening?

```ruby
def listening?(name)
  all_listeners_for(name).any? { |s| !s.silenced?(name) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:205
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:301</summary>

##### ActiveSupport::Notifications::Fanout#all_listeners_for

```ruby
def all_listeners_for(name)
  # this is correctly done double-checked locking (Concurrent::Map's lookups have volatile semantics)
  @all_listeners_for[name] || synchronize do
    # use synchronisation when accessing @subscribers
    @all_listeners_for[name] ||=
      @string_subscribers[name] + @other_subscribers.select { |s| s.subscribed_to?(name) }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:315
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:21</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#[]

```ruby
def [](key)
  @backend[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:303
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:408</summary>

##### ActiveSupport::Notifications::Fanout::Subscribers::Evented#silenced?

```ruby
def silenced?(name)
  @silenceable && @delegate.silenced?(name)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:315
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:268</summary>

##### ActiveSupport::Notifications.instrumenter

```ruby
def instrumenter
  registry[notifier] ||= Instrumenter.new(notifier)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:206
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:273</summary>

##### ActiveSupport::Notifications.registry

```ruby
def registry
  ActiveSupport::IsolatedExecutionState[:active_support_notifications_registry] ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:269
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:274
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:54</summary>

##### ActiveSupport::Notifications::Instrumenter#instrument

```ruby
def instrument(name, payload = {})
  handle = build_handle(name, payload)
  handle.start
  begin
    yield payload if block_given?
  rescue Exception => e
    payload[:exception] = [e.class.name, e.message]
    payload[:exception_object] = e
    raise e
  ensure
    handle.finish
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:206
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:78</summary>

##### ActiveSupport::Notifications::Instrumenter#build_handle

```ruby
def build_handle(name, payload)
  @notifier.build_handle(name, @id, payload)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:55
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:276</summary>

##### ActiveSupport::Notifications::Fanout#build_handle

```ruby
def build_handle(name, id, payload)
  Handle.new(self, name, id, payload)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:79
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:234</summary>

##### ActiveSupport::Notifications::Fanout::Handle#initialize

```ruby
def initialize(notifier, name, id, payload) # :nodoc:
  @name = name
  @id = id
  @payload = payload
  @groups = notifier.groups_for(name).map do |group_klass, grouped_listeners|
    group_klass.new(grouped_listeners, name, id, payload)
  end
  @state = :initialized
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:277
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:191</summary>

##### ActiveSupport::Notifications::Fanout#groups_for

```ruby
def groups_for(name) # :nodoc:
  groups = @groups_for.compute_if_absent(name) do
    all_listeners_for(name).reject(&:silenceable).group_by(&:group_class).transform_values do |s|
      s.map(&:delegate)
    end
  end

  silenceable_groups = @silenceable_groups_for.compute_if_absent(name) do
    all_listeners_for(name).select(&:silenceable).group_by(&:group_class).transform_values do |s|
      s.map(&:delegate)
    end
  end

  unless silenceable_groups.empty?
    groups = groups.dup
    silenceable_groups.each do |group_class, subscriptions|
      active_subscriptions = subscriptions.reject { |s| s.silenced?(name) }
      unless active_subscriptions.empty?
        groups[group_class] = (groups[group_class] || []) + active_subscriptions
      end
    end
  end

  groups
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:238
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:21</summary>

##### Concurrent::Collection::MriMapBackend#compute_if_absent

```ruby
def compute_if_absent(key)
  if NULL != (stored_value = @backend.fetch(key, NULL)) # fast non-blocking path for the most likely case
    stored_value
  else
    @write_lock.synchronize { super }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:192
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/mri_map_backend.rb:21</summary>

##### Concurrent::Collection::MriMapBackend#compute_if_absent

```ruby
def compute_if_absent(key)
  if NULL != (stored_value = @backend.fetch(key, NULL)) # fast non-blocking path for the most likely case
    stored_value
  else
    @write_lock.synchronize { super }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:198
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/log_subscriber.rb:145</summary>

##### ActiveSupport::LogSubscriber#silenced?

```ruby
def silenced?(event)
  logger.nil? || @event_levels[event]&.call(logger)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:207
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:58</summary>

##### ActionView::LogSubscriber::Utils#logger

```ruby
def logger
  ActionView::Base.logger
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/log_subscriber.rb:146
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:166</summary>

##### ActionView::Base.logger

```ruby
class_attribute :logger

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:58</summary>

##### ActionView::LogSubscriber::Utils#logger

```ruby
def logger
  ActionView::Base.logger
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/log_subscriber.rb:146
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:166</summary>

##### ActionView::Base.logger

```ruby
class_attribute :logger

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:168</summary>

##### ActiveSupport::BroadcastLogger#debug?

```ruby
def debug?
  @broadcasts.any? { |logger| logger.debug? }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/log_subscriber.rb:90
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:12</summary>

##### ActiveSupport::LoggerThreadSafeLevel#debug?

```ruby
def #{severity.downcase}?                # def debug?
  Logger::#{severity} >= level           #   DEBUG >= level
end                                      # end
      EOT
    end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:169
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:38</summary>

##### ActiveSupport::LoggerThreadSafeLevel#level

```ruby
def level
  local_level || super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:13
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:18</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level

```ruby
def local_level
  IsolatedExecutionState[local_level_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:39
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:12</summary>

##### ActiveSupport::LoggerThreadSafeLevel#debug?

```ruby
def #{severity.downcase}?                # def debug?
  Logger::#{severity} >= level           #   DEBUG >= level
end                                      # end
      EOT
    end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:169
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:38</summary>

##### ActiveSupport::LoggerThreadSafeLevel#level

```ruby
def level
  local_level || super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:13
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:18</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level

```ruby
def local_level
  IsolatedExecutionState[local_level_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:39
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:120</summary>

##### ActiveSupport::Notifications::Fanout::BaseGroup#initialize

```ruby
def initialize(listeners, name, id, payload)
  @listeners = listeners
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:239
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:120</summary>

##### ActiveSupport::Notifications::Fanout::BaseGroup#initialize

```ruby
def initialize(listeners, name, id, payload)
  @listeners = listeners
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:239
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:244</summary>

##### ActiveSupport::Notifications::Fanout::Handle#start

```ruby
def start
  ensure_state! :initialized
  @state = :started

  iterate_guarding_exceptions(@groups) do |group|
    group.start(@name, @id, @payload)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:56
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:267</summary>

##### ActiveSupport::Notifications::Fanout::Handle#ensure_state!

```ruby
def ensure_state!(expected)
  if @state != expected
    raise ArgumentError, "expected state to be #{expected.inspect} but was #{@state.inspect}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:245
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:22</summary>

##### ActiveSupport::Notifications::FanoutIteration#iterate_guarding_exceptions

```ruby
def iterate_guarding_exceptions(collection)
  exceptions = nil

  collection.each do |s|
    yield s
  rescue Exception => e
    exceptions ||= []
    exceptions << e
  end

  if exceptions
    exceptions = exceptions.flat_map do |exception|
      exception.is_a?(InstrumentationSubscriberError) ? exception.exceptions : [exception]
    end
    if exceptions.size == 1
      raise exceptions.first
    else
      raise InstrumentationSubscriberError.new(exceptions), cause: exceptions.first
    end
  end

  collection
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:248
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:157</summary>

##### ActiveSupport::Notifications::Fanout::EventedGroup#start

```ruby
def start(name, id, payload)
  each do |s|
    s.start(name, id, payload)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:249
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:124</summary>

##### ActiveSupport::Notifications::Fanout::BaseGroup#each

```ruby
def each(&block)
  iterate_guarding_exceptions(@listeners, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:158
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:22</summary>

##### ActiveSupport::Notifications::FanoutIteration#iterate_guarding_exceptions

```ruby
def iterate_guarding_exceptions(collection)
  exceptions = nil

  collection.each do |s|
    yield s
  rescue Exception => e
    exceptions ||= []
    exceptions << e
  end

  if exceptions
    exceptions = exceptions.flat_map do |exception|
      exception.is_a?(InstrumentationSubscriberError) ? exception.exceptions : [exception]
    end
    if exceptions.size == 1
      raise exceptions.first
    else
      raise InstrumentationSubscriberError.new(exceptions), cause: exceptions.first
    end
  end

  collection
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:125
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:79</summary>

##### ActionView::LogSubscriber::Start#start

```ruby
def start(name, id, payload)
  return unless logger
  logger.debug do
    qualifier =
      if name == "render_template.action_view"
        ""
      elsif name == "render_layout.action_view"
        "layout "
      end

    return unless qualifier

    message = +"  Rendering #{qualifier}#{from_rails_root(payload[:identifier])}"
    message << " within #{from_rails_root(payload[:layout])}" if payload[:layout]
    message
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:159
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:58</summary>

##### ActionView::LogSubscriber::Utils#logger

```ruby
def logger
  ActionView::Base.logger
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:80
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:166</summary>

##### ActionView::Base.logger

```ruby
class_attribute :logger

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:58</summary>

##### ActionView::LogSubscriber::Utils#logger

```ruby
def logger
  ActionView::Base.logger
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:81
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:166</summary>

##### ActionView::Base.logger

```ruby
class_attribute :logger

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:59
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:121</summary>

##### ActiveSupport::BroadcastLogger#debug

```ruby
def debug(*args, &block)
  dispatch { |logger| logger.debug(*args, &block) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:81
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:230</summary>

##### ActiveSupport::BroadcastLogger#dispatch

```ruby
def dispatch(&block)
  @broadcasts.each { |logger| block.call(logger) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:122
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:695</summary>

##### Logger#debug

```ruby
def debug(progname = nil, &block)
  add(DEBUG, nil, progname, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:122
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:656</summary>

##### Logger#add

```ruby
def add(severity, message = nil, progname = nil)
  severity ||= UNKNOWN
  if @logdev.nil? or severity < level
    return true
  end
  if progname.nil?
    progname = @progname
  end
  if message.nil?
    if block_given?
      message = yield
    else
      message = progname
      progname = @progname
    end
  end
  @logdev.write(
    format_message(format_severity(severity), Time.now, progname, message))
  true
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:696
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:38</summary>

##### ActiveSupport::LoggerThreadSafeLevel#level

```ruby
def level
  local_level || super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:658
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:18</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level

```ruby
def local_level
  IsolatedExecutionState[local_level_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:39
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:695</summary>

##### Logger#debug

```ruby
def debug(progname = nil, &block)
  add(DEBUG, nil, progname, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:122
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:656</summary>

##### Logger#add

```ruby
def add(severity, message = nil, progname = nil)
  severity ||= UNKNOWN
  if @logdev.nil? or severity < level
    return true
  end
  if progname.nil?
    progname = @progname
  end
  if message.nil?
    if block_given?
      message = yield
    else
      message = progname
      progname = @progname
    end
  end
  @logdev.write(
    format_message(format_severity(severity), Time.now, progname, message))
  true
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:696
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:38</summary>

##### ActiveSupport::LoggerThreadSafeLevel#level

```ruby
def level
  local_level || super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/logger-1.6.1/lib/logger.rb:658
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:18</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level

```ruby
def local_level
  IsolatedExecutionState[local_level_key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:39
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:19
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:171</summary>

##### ActiveSupport::Notifications::Fanout::EventObjectGroup#start

```ruby
def start(name, id, payload)
  @event = build_event(name, id, payload)
  @event.start!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:249
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:186</summary>

##### ActiveSupport::Notifications::Fanout::EventObjectGroup#build_event

```ruby
def build_event(name, id, payload)
  ActiveSupport::Notifications::Event.new name, nil, nil, id, payload
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:172
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:110</summary>

##### ActiveSupport::Notifications::Event#initialize

```ruby
def initialize(name, start, ending, transaction_id, payload)
  @name           = name
  @payload        = payload.dup
  @time           = start ? start.to_f * 1_000.0 : start
  @transaction_id = transaction_id
  @end            = ending ? ending.to_f * 1_000.0 : ending
  @cpu_time_start = 0.0
  @cpu_time_finish = 0.0
  @allocation_count_start = 0
  @allocation_count_finish = 0
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:187
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:136</summary>

##### ActiveSupport::Notifications::Event#start!

```ruby
def start!
  @time = now
  @cpu_time_start = now_cpu
  @allocation_count_start = now_allocations
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:173
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:202</summary>

##### ActiveSupport::Notifications::Event#now

```ruby
def now
  Process.clock_gettime(Process::CLOCK_MONOTONIC, :float_millisecond)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:137
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:209</summary>

##### ActiveSupport::Notifications::Event#now_cpu

```ruby
def now_cpu
  Process.clock_gettime(Process::CLOCK_THREAD_CPUTIME_ID, :float_millisecond)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:138
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:219</summary>

##### ActiveSupport::Notifications::Event#now_allocations

```ruby
def now_allocations
  GC.stat(:total_allocated_objects)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:139
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:248</summary>

##### ActionView::Template#render

```ruby
def render(view, locals, buffer = nil, implicit_locals: [], add_to_stack: true, &block)
  instrument_render_template do
    compile!(view)

    if strict_locals? && @strict_local_keys && !implicit_locals.empty?
      locals_to_ignore = implicit_locals - @strict_local_keys
      locals.except!(*locals_to_ignore)
    end

    if buffer
      view._run(method_name, self, locals, buffer, add_to_stack: add_to_stack, has_strict_locals: strict_locals?, &block)
      nil
    else
      view._run(method_name, self, locals, OutputBuffer.new, add_to_stack: add_to_stack, has_strict_locals: strict_locals?, &block)&.to_s
    end
  end
rescue => e
  handle_render_error(view, e)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:66
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:548</summary>

##### ActionView::Template#instrument_render_template

```ruby
def instrument_render_template(&block)
  ActiveSupport::Notifications.instrument("!render_template.action_view", instrument_payload, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:249
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:552</summary>

##### ActionView::Template#instrument_payload

```ruby
def instrument_payload
  { virtual_path: @virtual_path, identifier: @identifier }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:549
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:204</summary>

##### ActiveSupport::Notifications.instrument

```ruby
def instrument(name, payload = {})
  if notifier.listening?(name)
    instrumenter.instrument(name, payload) { yield payload if block_given? }
  else
    yield payload if block_given?
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:549
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:314</summary>

##### ActiveSupport::Notifications::Fanout#listening?

```ruby
def listening?(name)
  all_listeners_for(name).any? { |s| !s.silenced?(name) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:205
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:301</summary>

##### ActiveSupport::Notifications::Fanout#all_listeners_for

```ruby
def all_listeners_for(name)
  # this is correctly done double-checked locking (Concurrent::Map's lookups have volatile semantics)
  @all_listeners_for[name] || synchronize do
    # use synchronisation when accessing @subscribers
    @all_listeners_for[name] ||=
      @string_subscribers[name] + @other_subscribers.select { |s| s.subscribed_to?(name) }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:315
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:21</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#[]

```ruby
def [](key)
  @backend[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:303
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:394</summary>

##### ActionView::Template#compile!

```ruby
def compile!(view)
  return if @compiled

  # Templates can be used concurrently in threaded environments
  # so compilation and any instance variable modification must
  # be synchronized
  @compile_mutex.synchronize do
    # Any thread holding this lock will be compiling the template needed
    # by the threads waiting. So re-check the @compiled flag to avoid
    # re-compilation
    return if @compiled

    mod = view.compiled_method_container

    instrument("!compile_template") do
      compile(mod)
    end

    @compiled = true
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:250
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/debug_view.rb:19</summary>

##### ActionDispatch::DebugView#compiled_method_container

```ruby
def compiled_method_container
  self.class
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:406
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:544</summary>

##### ActionView::Template#instrument

```ruby
def instrument(action, &block) # :doc:
  ActiveSupport::Notifications.instrument("#{action}.action_view", instrument_payload, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:408
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:552</summary>

##### ActionView::Template#instrument_payload

```ruby
def instrument_payload
  { virtual_path: @virtual_path, identifier: @identifier }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:545
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:204</summary>

##### ActiveSupport::Notifications.instrument

```ruby
def instrument(name, payload = {})
  if notifier.listening?(name)
    instrumenter.instrument(name, payload) { yield payload if block_given? }
  else
    yield payload if block_given?
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:545
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:314</summary>

##### ActiveSupport::Notifications::Fanout#listening?

```ruby
def listening?(name)
  all_listeners_for(name).any? { |s| !s.silenced?(name) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:205
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:301</summary>

##### ActiveSupport::Notifications::Fanout#all_listeners_for

```ruby
def all_listeners_for(name)
  # this is correctly done double-checked locking (Concurrent::Map's lookups have volatile semantics)
  @all_listeners_for[name] || synchronize do
    # use synchronisation when accessing @subscribers
    @all_listeners_for[name] ||=
      @string_subscribers[name] + @other_subscribers.select { |s| s.subscribed_to?(name) }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:315
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:21</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#[]

```ruby
def [](key)
  @backend[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:303
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:472</summary>

##### ActionView::Template#compile

```ruby
def compile(mod)
  begin
    mod.module_eval(compiled_source, identifier, offset)
  rescue SyntaxError
    # Account for when code in the template is not syntactically valid; e.g. if we're using
    # ERB and the user writes <%= foo( %>, attempting to call a helper `foo` and interpolate
    # the result into the template, but missing an end parenthesis.
    raise SyntaxErrorInTemplate.new(self, encode!)
  end

  return unless strict_locals?

  parameters = mod.instance_method(method_name).parameters - [[:req, :output_buffer]]
  # Check compiled method parameters to ensure that only kwargs
  # were provided as strict locals, preventing `locals: (foo, *foo)` etc
  # and allowing `locals: (foo:)`.

  non_kwarg_parameters = parameters.select do |parameter|
    ![:keyreq, :key, :keyrest, :nokey].include?(parameter[0])
  end

  unless non_kwarg_parameters.empty?
    mod.undef_method(method_name)

    raise ArgumentError.new(
      "#{non_kwarg_parameters.map { |_, name| "`#{name}`" }.to_sentence} set as non-keyword " \
      "#{'argument'.pluralize(non_kwarg_parameters.length)} for #{short_identifier}. " \
      "Locals can only be set as keyword arguments."
    )
  end

  unless parameters.any? { |type, _| type == :keyrest }
    parameters.map!(&:last)
    parameters.sort!
    @strict_local_keys = parameters.freeze
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:409
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:419</summary>

##### ActionView::Template#compiled_source

```ruby
def compiled_source
  set_strict_locals = strict_locals!
  source = encode!
  code = @handler.call(self, source)

  method_arguments =
    if set_strict_locals
      "output_buffer, #{set_strict_locals}"
    else
      "local_assigns, output_buffer"
    end

  # Make sure that the resulting String to be eval'd is in the
  # encoding of the code
  source = +<<-end_src
    def #{method_name}(#{method_arguments})
      @virtual_path = #{@virtual_path.inspect};#{locals_code};#{code}
    end
  end_src

  # Make sure the source is in the encoding of the returned code
  source.force_encoding(code.encoding)

  # In case we get back a String from a handler that is not in
  # BINARY or the default_internal, encode it to the default_internal
  source.encode!

  # Now, validate that the source we got back from the template
  # handler is valid in the default_internal. This is for handlers
  # that handle encoding but screw up
  unless source.valid_encoding?
    raise WrongEncodingError.new(source, Encoding.default_internal)
  end

  if Template.frozen_string_literal
    "# frozen_string_literal: true\n#{source}"
  else
    source
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:474
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:420
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:297</summary>

##### ActionView::Template#encode!

```ruby
def encode!
  source = self.source

  return source unless source.encoding == Encoding::BINARY

  # Look for # encoding: *. If we find one, we'll encode the
  # String in that encoding, otherwise, we'll use the
  # default external encoding.
  if source.sub!(LEADING_ENCODING_REGEXP, "")
    encoding = magic_encoding = $1
  else
    encoding = Encoding.default_external
  end

  # Tag the source with the default external encoding
  # or the encoding specified in the file
  source.force_encoding(encoding)

  # If the user didn't specify an encoding, and the handler
  # handles encodings, we simply pass the String as is to
  # the handler (with the default_external tag)
  if !magic_encoding && @handler.respond_to?(:handles_encoding?) && @handler.handles_encoding?
    source
  # Otherwise, if the String is valid in the encoding,
  # encode immediately to default_internal. This means
  # that if a handler doesn't handle encodings, it will
  # always get Strings in the default_internal
  elsif source.valid_encoding?
    source.encode!
  # Otherwise, since the String is invalid in the encoding
  # specified, raise an exception
  else
    raise WrongEncodingError.new(source, encoding)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:421
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:280</summary>

##### ActionView::Template#source

```ruby
def source
  @source.to_s
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:298
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/sources/file.rb:11</summary>

##### ActionView::Template::Sources::File#to_s

```ruby
def to_s
  ::File.binread @filename
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:281
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:37</summary>

##### ActionView::Template::Handlers::ERB#handles_encoding?

```ruby
def handles_encoding?
  true
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:318
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:61</summary>

##### ActionView::Template::Handlers::ERB#call

```ruby
def call(template, source)
  # First, convert to BINARY, so in case the encoding is
  # wrong, we can still find an encoding tag
  # (<%# encoding %>) inside the String using a regular
  # expression
  template_source = source.b

  erb = template_source.gsub(ENCODING_TAG, "")
  encoding = $2

  erb.force_encoding valid_encoding(source.dup, encoding)

  # Always make sure we return a String in the default_internal
  erb.encode!

  # Strip trailing newlines from the template if enabled
  erb.chomp! if strip_trailing_newlines

  options = {
    escape: (self.class.escape_ignore_list.include? template.type),
    trim: (self.class.erb_trim_mode == "-")
  }

  if ActionView::Base.annotate_rendered_view_with_filenames && template.format == :html
    options[:preamble] = "@output_buffer.safe_append='<!-- BEGIN #{template.short_identifier} -->';"
    options[:postamble] = "@output_buffer.safe_append='<!-- END #{template.short_identifier} -->';@output_buffer"
  end

  self.class.erb_implementation.new(erb, options).src
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:422
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:93</summary>

##### ActionView::Template::Handlers::ERB#valid_encoding

```ruby
def valid_encoding(string, encoding)
  # If a magic encoding comment was found, tag the
  # String with this encoding. This is for a case
  # where the original String was assumed to be,
  # for instance, UTF-8, but a magic comment
  # proved otherwise
  string.force_encoding(encoding) if encoding

  # If the String is valid, return the encoding we found
  return string.encoding if string.valid_encoding?

  # Otherwise, raise an exception
  raise WrongEncodingError.new(string, string.encoding)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:71
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:23</summary>

##### ActionView::Template::Handlers::ERB#strip_trailing_newlines

```ruby
class_attribute :strip_trailing_newlines, default: false

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:77
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:23</summary>

##### ActionView::Template::Handlers::ERB.strip_trailing_newlines

```ruby
class_attribute :strip_trailing_newlines, default: false

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:23
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:20</summary>

##### ActionView::Template::Handlers::ERB.escape_ignore_list

```ruby
class_attribute :escape_ignore_list, default: ["text/plain"]

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:80
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:268</summary>

##### ActionView::Template#type

```ruby
def type
  @type ||= Types[format]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:80
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:49</summary>

##### Mime.[]

```ruby
def [](type)
  return type if type.is_a?(Type)
  Type.lookup_by_extension(type)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:269
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:169</summary>

##### Mime::Type.lookup_by_extension

```ruby
def lookup_by_extension(extension)
  EXTENSION_LOOKUP[extension.to_s]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:51
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:290</summary>

##### Mime::Type#==

```ruby
def ==(mime_type)
  return false unless mime_type
  (@synonyms + [ self ]).any? do |synonym|
    synonym.to_s == mime_type.to_s || synonym.to_sym == mime_type.to_sym
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:80
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:266</summary>

##### Mime::Type#to_s

```ruby
def to_s
  @string
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:293
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:274</summary>

##### Mime::Type#to_sym

```ruby
def to_sym
  @symbol
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:293
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:14</summary>

##### ActionView::Template::Handlers::ERB.erb_trim_mode

```ruby
class_attribute :erb_trim_mode, default: "-"

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:81
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:163</summary>

##### ActionView::Base.annotate_rendered_view_with_filenames

```ruby
cattr_accessor :annotate_rendered_view_with_filenames, default: false

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:84
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:17</summary>

##### ActionView::Template::Handlers::ERB.erb_implementation

```ruby
class_attribute :erb_implementation, default: Erubi

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:89
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:11</summary>

##### ActionView::Template::Handlers::ERB::Erubi#initialize

```ruby
def initialize(input, properties = {})
  @newline_pending = 0

  # Dup properties so that we don't modify argument
  properties = Hash[properties]

  properties[:bufvar]     ||= "@output_buffer"
  properties[:preamble]   ||= ""
  properties[:postamble]  ||= "#{properties[:bufvar]}"

  # Tell Eruby that whether template will be compiled with `frozen_string_literal: true`
  properties[:freeze_template_literals] = !Template.frozen_string_literal

  properties[:escapefunc] = ""

  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:89
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:91</summary>

##### ActionView::Template::Handlers::ERB::Erubi#initialize

```ruby
def initialize(input, properties = {})
  @newline_pending = 0

  # Dup properties so that we don't modify argument
  properties = Hash[properties]

  properties[:bufvar]     ||= "@output_buffer"
  properties[:preamble]   ||= ""
  properties[:postamble]  ||= "#{properties[:bufvar]}"

  # Tell Eruby that whether template will be compiled with `frozen_string_literal: true`
  properties[:freeze_template_literals] = !Template.frozen_string_literal

  properties[:escapefunc] = ""

  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:26
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:30</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_text

```ruby
def add_text(text)
  return if text.empty?

  if text == "\n"
    @newline_pending += 1
  else
    with_buffer do
      src << ".safe_append='"
      src << "\n" * @newline_pending if @newline_pending > 0
      src << text.gsub(/['\\]/, '\\\\\&') << @text_end
    end
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:167
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:268</summary>

##### Erubi::Engine#with_buffer

```ruby
def with_buffer
  if @chain_appends
    unless @buffer_on_stack
      @src << '; ' << @bufvar
    end
    yield
    @buffer_on_stack = true
  else
    @src << ' ' << @bufvar
    yield
    @src << ';'
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:36
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:47</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_expression

```ruby
def add_expression(indicator, code)
  flush_newline_if_pending(src)

  with_buffer do
    if (indicator == "==") || @escape
      src << ".safe_expr_append="
    else
      src << ".append="
    end

    if BLOCK_EXPR.match?(code)
      src << " " << code
    else
      src << "(" << code << ")"
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:171
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:75</summary>

##### ActionView::Template::Handlers::ERB::Erubi#flush_newline_if_pending

```ruby
def flush_newline_if_pending(src)
  if @newline_pending > 0
    with_buffer { src << ".safe_append='#{"\n" * @newline_pending}" << @text_end }
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:48
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:268</summary>

##### Erubi::Engine#with_buffer

```ruby
def with_buffer
  if @chain_appends
    unless @buffer_on_stack
      @src << '; ' << @bufvar
    end
    yield
    @buffer_on_stack = true
  else
    @src << ' ' << @bufvar
    yield
    @src << ';'
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:50
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:30</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_text

```ruby
def add_text(text)
  return if text.empty?

  if text == "\n"
    @newline_pending += 1
  else
    with_buffer do
      src << ".safe_append='"
      src << "\n" * @newline_pending if @newline_pending > 0
      src << text.gsub(/['\\]/, '\\\\\&') << @text_end
    end
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:167
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:268</summary>

##### Erubi::Engine#with_buffer

```ruby
def with_buffer
  if @chain_appends
    unless @buffer_on_stack
      @src << '; ' << @bufvar
    end
    yield
    @buffer_on_stack = true
  else
    @src << ' ' << @bufvar
    yield
    @src << ';'
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:36
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:65</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_code

```ruby
def add_code(code)
  flush_newline_if_pending(src)
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:175
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:75</summary>

##### ActionView::Template::Handlers::ERB::Erubi#flush_newline_if_pending

```ruby
def flush_newline_if_pending(src)
  if @newline_pending > 0
    with_buffer { src << ".safe_append='#{"\n" * @newline_pending}" << @text_end }
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:66
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:223</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_code

```ruby
def add_code(code)
  flush_newline_if_pending(src)
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:67
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:286</summary>

##### Erubi::Engine#terminate_expression

```ruby
def terminate_expression
  @src << '; ' if @chain_appends
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:224
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:30</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_text

```ruby
def add_text(text)
  return if text.empty?

  if text == "\n"
    @newline_pending += 1
  else
    with_buffer do
      src << ".safe_append='"
      src << "\n" * @newline_pending if @newline_pending > 0
      src << text.gsub(/['\\]/, '\\\\\&') << @text_end
    end
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:167
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:268</summary>

##### Erubi::Engine#with_buffer

```ruby
def with_buffer
  if @chain_appends
    unless @buffer_on_stack
      @src << '; ' << @bufvar
    end
    yield
    @buffer_on_stack = true
  else
    @src << ' ' << @bufvar
    yield
    @src << ';'
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:36
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:47</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_expression

```ruby
def add_expression(indicator, code)
  flush_newline_if_pending(src)

  with_buffer do
    if (indicator == "==") || @escape
      src << ".safe_expr_append="
    else
      src << ".append="
    end

    if BLOCK_EXPR.match?(code)
      src << " " << code
    else
      src << "(" << code << ")"
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:171
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:75</summary>

##### ActionView::Template::Handlers::ERB::Erubi#flush_newline_if_pending

```ruby
def flush_newline_if_pending(src)
  if @newline_pending > 0
    with_buffer { src << ".safe_append='#{"\n" * @newline_pending}" << @text_end }
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:48
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:268</summary>

##### Erubi::Engine#with_buffer

```ruby
def with_buffer
  if @chain_appends
    unless @buffer_on_stack
      @src << '; ' << @bufvar
    end
    yield
    @buffer_on_stack = true
  else
    @src << ' ' << @bufvar
    yield
    @src << ';'
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:50
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:30</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_text

```ruby
def add_text(text)
  return if text.empty?

  if text == "\n"
    @newline_pending += 1
  else
    with_buffer do
      src << ".safe_append='"
      src << "\n" * @newline_pending if @newline_pending > 0
      src << text.gsub(/['\\]/, '\\\\\&') << @text_end
    end
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:167
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:268</summary>

##### Erubi::Engine#with_buffer

```ruby
def with_buffer
  if @chain_appends
    unless @buffer_on_stack
      @src << '; ' << @bufvar
    end
    yield
    @buffer_on_stack = true
  else
    @src << ' ' << @bufvar
    yield
    @src << ';'
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:36
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:65</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_code

```ruby
def add_code(code)
  flush_newline_if_pending(src)
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:175
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:75</summary>

##### ActionView::Template::Handlers::ERB::Erubi#flush_newline_if_pending

```ruby
def flush_newline_if_pending(src)
  if @newline_pending > 0
    with_buffer { src << ".safe_append='#{"\n" * @newline_pending}" << @text_end }
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:66
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:223</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_code

```ruby
def add_code(code)
  flush_newline_if_pending(src)
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:67
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:286</summary>

##### Erubi::Engine#terminate_expression

```ruby
def terminate_expression
  @src << '; ' if @chain_appends
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:224
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:30</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_text

```ruby
def add_text(text)
  return if text.empty?

  if text == "\n"
    @newline_pending += 1
  else
    with_buffer do
      src << ".safe_append='"
      src << "\n" * @newline_pending if @newline_pending > 0
      src << text.gsub(/['\\]/, '\\\\\&') << @text_end
    end
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:197
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:268</summary>

##### Erubi::Engine#with_buffer

```ruby
def with_buffer
  if @chain_appends
    unless @buffer_on_stack
      @src << '; ' << @bufvar
    end
    yield
    @buffer_on_stack = true
  else
    @src << ' ' << @bufvar
    yield
    @src << ';'
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:36
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:70</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_postamble

```ruby
def add_postamble(_)
  flush_newline_if_pending(src)
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:200
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:75</summary>

##### ActionView::Template::Handlers::ERB::Erubi#flush_newline_if_pending

```ruby
def flush_newline_if_pending(src)
  if @newline_pending > 0
    with_buffer { src << ".safe_append='#{"\n" * @newline_pending}" << @text_end }
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:71
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:252</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_postamble

```ruby
def add_postamble(_)
  flush_newline_if_pending(src)
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:72
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:286</summary>

##### Erubi::Engine#terminate_expression

```ruby
def terminate_expression
  @src << '; ' if @chain_appends
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:253
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:372</summary>

##### ActionView::Template#method_name

```ruby
def method_name # :nodoc:
  @method_name ||= begin
    m = +"_#{identifier_method_name}__#{@identifier.hash}_#{__id__}"
    m.tr!("-", "_")
    m
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:434
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:540</summary>

##### ActionView::Template#identifier_method_name

```ruby
def identifier_method_name
  short_identifier.tr("^a-z_", "_")
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:374
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:272</summary>

##### ActionView::Template#short_identifier

```ruby
def short_identifier
  @short_identifier ||= defined?(Rails.root) ? identifier.delete_prefix("#{Rails.root}/") : identifier
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:541
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:63</summary>

##### Rails.root

```ruby
def root
  application && application.config.root
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:273
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:43</summary>

##### Rails.application

```ruby
def application
  @application ||= (app_class.instance if app_class)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:64
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:43</summary>

##### Rails.application

```ruby
def application
  @application ||= (app_class.instance if app_class)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:64
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libapplication.rb:437</summary>

##### Rails::Application#config

```ruby
def config # :nodoc:
  @config ||= Application::Configuration.new(self.class.find_root(self.class.called_from))
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:64
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:527</summary>

##### ActionView::Template#locals_code

```ruby
def locals_code
  return "" if strict_locals?

  # Only locals with valid variable names get set directly. Others will
  # still be available in local_assigns.
  locals = @locals - Module::RUBY_RESERVED_KEYWORDS

  locals = locals.grep(/\A(?![A-Z0-9])(?:[[:alnum:]_]|[^\0-\177])+\z/)

  # Assign for the same variable is to suppress unused variable warning
  locals.each_with_object(+"") { |key, code| code << "#{key} = local_assigns[:#{key}]; #{key} = #{key};" }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:435
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:356</summary>

##### ActionView::Template#strict_locals?

```ruby
def strict_locals?
  strict_locals!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:528
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:357
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:510</summary>

##### ActionView::Template#offset

```ruby
def offset
  if Template.frozen_string_literal
    -1
  else
    0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:474
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:274</summary>

##### DEBUGGER__::Session#process_event

```ruby
def process_event evt
  # variable `@internal_info` is only used for test
  tc, output, ev, @internal_info, *ev_args = evt

  output.each{|str| @ui.puts str} if ev != :suspend

  # special event, tc is nil
  # and we don't want to set @tc to the newly created thread's ThreadClient
  if ev == :thread_begin
    th = ev_args.shift
    q = ev_args.shift
    on_thread_begin th
    q << true

    return
  end

  @tc = tc

  case ev
  when :init
    enter_subsession
    wait_command_loop
  when :load
    iseq, src = ev_args
    on_load iseq, src
    request_tc :continue

  when :trace
    trace_id, msg = ev_args
    if t = @tracers.values.find{|t| t.object_id == trace_id}
      t.puts msg
    end
    request_tc :continue

  when :suspend
    enter_subsession if ev_args.first != :replay
    output.each{|str| @ui.puts str} unless @ui.ignore_output_on_suspend?

    case ev_args.first
    when :breakpoint
      bp, i = bp_index ev_args[1]
      clean_bps unless bp
      @ui.event :suspend_bp, i, bp, @tc.id
    when :trap
      @ui.event :suspend_trap, sig = ev_args[1], @tc.id

      if sig == :SIGINT && (@intercepted_sigint_cmd.kind_of?(Proc) || @intercepted_sigint_cmd.kind_of?(String))
        @ui.puts "#{@intercepted_sigint_cmd.inspect} is registered as SIGINT handler."
        @ui.puts "`sigint` command execute it."
      end
    else
      @ui.event :suspended, @tc.id
    end

    if @displays.empty?
      wait_command_loop
    else
      request_eval :display, @displays
    end
  when :result
    raise "[BUG] not in subsession" if @subsession_stack.empty?

    case ev_args.first
    when :try_display
      failed_results = ev_args[1]
      if failed_results.size > 0
        i, _msg = failed_results.last
        if i+1 == @displays.size
          @ui.puts "canceled: #{@displays.pop}"
        end
      end

      stop_all_threads
    when :method_breakpoint, :watch_breakpoint
      bp = ev_args[1]
      if bp
        add_bp(bp)
        show_bps bp
      else
        # can't make a bp
      end
    when :trace_pass
      obj_id = ev_args[1]
      obj_inspect = ev_args[2]
      opt = ev_args[3]
      add_tracer ObjectTracer.new(@ui, obj_id, obj_inspect, **opt)
      stop_all_threads
    else
      stop_all_threads
    end

    wait_command_loop

  when :protocol_result
    process_protocol_result ev_args
    wait_command_loop
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:255
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:1747</summary>

##### DEBUGGER__::Session#on_load

```ruby
def on_load iseq, src
  DEBUGGER__.info "Load #{iseq.absolute_path || iseq.path}"

  file_path, reloaded = @sr.add(iseq, src)
  @ui.event :load, file_path, reloaded

  # check breakpoints
  if file_path
    @bps.find_all do |_key, bp|
      LineBreakpoint === bp && bp.path_is?(file_path) && (iseq.first_lineno..iseq.last_line).cover?(bp.line)
    end.each do |_key, bp|
      if !bp.iseq
        bp.try_activate iseq
      elsif reloaded
        @bps.delete bp.key # to allow duplicate

        # When we delete a breakpoint from the @bps hash, we also need to deactivate it or else its tracepoint event
        # will continue to be enabled and we'll suspend on ghost breakpoints
        bp.delete

        nbp = LineBreakpoint.copy(bp, iseq)
        add_bp nbp
      end
    end
  else # !file_path => file_path is not existing
    @bps.find_all do |_key, bp|
      LineBreakpoint === bp && !bp.iseq && DEBUGGER__.compare_path(bp.path, (iseq.absolute_path || iseq.path))
    end.each do |_key, bp|
      bp.try_activate iseq
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:299
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2383</summary>

##### DEBUGGER.info

```ruby
def self.info msg
  log :INFO, msg
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:1748
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2399</summary>

##### DEBUGGER.log

```ruby
def self.log level, msg
  if check_loglevel level
    @logfile = STDERR unless defined? @logfile
    return if @logfile.closed?

    if defined? SESSION
      pi = SESSION.process_info
      process_info = pi ? "[#{pi}]" : nil
    end

    if level == :WARN
      # :WARN on debugger is general information
      @logfile.puts "DEBUGGER#{process_info}: #{msg}"
      @logfile.flush
    else
      @logfile.puts "DEBUGGER#{process_info} (#{level}): #{msg}"
      @logfile.flush
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2384
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2387</summary>

##### DEBUGGER.check_loglevel

```ruby
def self.check_loglevel level
  lv = LOG_LEVELS[level]
  config_lv = LOG_LEVELS[CONFIG[:log_level]]
  lv <= config_lv
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2400
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:91</summary>

##### DEBUGGER__::Config#[]

```ruby
def [](key)
  config[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2389
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:218</summary>

##### DEBUGGER__::Config#config

```ruby
private def config
  self.class.config
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:92
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:65</summary>

##### DEBUGGER.config

```ruby
def self.config
  @config
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:219
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:77</summary>

##### DEBUGGER__::SourceRepository#add

```ruby
def add iseq, src
  path = (iseq.absolute_path || iseq.path)

  if path && File.exist?(path)
    reloaded = @files.has_key? path

    if src
      add_iseq iseq, src
      return path, reloaded
    else
      add_path path
      return path, reloaded
    end
  else
    add_iseq iseq, src
    nil
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:1750
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:104</summary>

##### DEBUGGER__::SourceRepository#add_iseq

```ruby
private def add_iseq iseq, src
  line = iseq.first_line
  if line > 1
    src = ("\n" * (line - 1)) + src
  end

  si = SrcInfo.new(src.each_line.map{|l| l.chomp})
  all_iseq(iseq).each{|e|
    e.instance_variable_set(:@debugger_si, si)
    e.freeze
  }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:84
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:96</summary>

##### DEBUGGER__::SourceRepository#all_iseq

```ruby
private def all_iseq iseq, rs = []
  rs << iseq
  iseq.each_child{|ci|
    all_iseq(ci, rs)
  }
  rs
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:111
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:96</summary>

##### DEBUGGER__::SourceRepository#all_iseq

```ruby
private def all_iseq iseq, rs = []
  rs << iseq
  iseq.each_child{|ci|
    all_iseq(ci, rs)
  }
  rs
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:99
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:96</summary>

##### DEBUGGER__::SourceRepository#all_iseq

```ruby
private def all_iseq iseq, rs = []
  rs << iseq
  iseq.each_child{|ci|
    all_iseq(ci, rs)
  }
  rs
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:99
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2163</summary>

##### DEBUGGER__::UI_Base#event

```ruby
def event type, *args
  case type
  when :suspend_bp
    i, bp = *args
    puts "\nStop by \##{i} #{bp}" if bp
  when :suspend_trap
    puts "\nStop by #{args.first}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:1751
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:261</summary>

##### DEBUGGER__::Session#request_tc

```ruby
def request_tc(req)
  @tc << req
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:300
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/thread_client.rb:210</summary>

##### DEBUGGER__::ThreadClient#<<

```ruby
def << req
  debug_cmd(req)
  @q_cmd << req
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:262
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/thread_client.rb:1271</summary>

##### DEBUGGER__::ThreadClient#debug_cmd

```ruby
def debug_cmd(cmds)
  DEBUGGER__.debug{
    cmd, *args = *cmds
    args = args.map { |arg| DEBUGGER__.safe_inspect(arg) }
    "#{inspect} receives Cmd { type: #{cmd.inspect}, args: #{args} } from Session"
  }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/thread_client.rb:211
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2393</summary>

##### DEBUGGER.debug

```ruby
def self.debug(&b)
  if check_loglevel :DEBUG
    log :DEBUG, b.call
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/thread_client.rb:1272
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2387</summary>

##### DEBUGGER.check_loglevel

```ruby
def self.check_loglevel level
  lv = LOG_LEVELS[level]
  config_lv = LOG_LEVELS[CONFIG[:log_level]]
  lv <= config_lv
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2394
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:91</summary>

##### DEBUGGER__::Config#[]

```ruby
def [](key)
  config[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2389
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:218</summary>

##### DEBUGGER__::Config#config

```ruby
private def config
  self.class.config
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:92
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:65</summary>

##### DEBUGGER.config

```ruby
def self.config
  @config
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:219
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:249</summary>

##### DEBUGGER__::Session#pop_event

```ruby
def pop_event
  @q_evt.pop
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:254
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:1832</summary>

##### Module.method_added

```ruby
def method_added mid; end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/blocked_host.html.erb:0
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:356</summary>

##### ActionView::Template#strict_locals?

```ruby
def strict_locals?
  strict_locals!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:482
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:357
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:356</summary>

##### ActionView::Template#strict_locals?

```ruby
def strict_locals?
  strict_locals!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:252
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:357
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:372</summary>

##### ActionView::Template#method_name

```ruby
def method_name # :nodoc:
  @method_name ||= begin
    m = +"_#{identifier_method_name}__#{@identifier.hash}_#{__id__}"
    m.tr!("-", "_")
    m
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:261
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:22</summary>

##### ActionView::OutputBuffer#initialize

```ruby
def initialize(buffer = "")
  @raw_buffer = String.new(buffer)
  @raw_buffer.encode!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:261
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:356</summary>

##### ActionView::Template#strict_locals?

```ruby
def strict_locals?
  strict_locals!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:261
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:357
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:245</summary>

##### ActionView::Base#_run

```ruby
def _run(method, template, locals, buffer, add_to_stack: true, has_strict_locals: false, &block)
  _old_output_buffer, _old_virtual_path, _old_template = @output_buffer, @virtual_path, @current_template
  @current_template = template if add_to_stack
  @output_buffer = buffer

  if has_strict_locals
    begin
      public_send(method, buffer, **locals, &block)
    rescue ArgumentError => argument_error
      raise(
        ArgumentError,
        argument_error.
          message.
            gsub("unknown keyword:", "unknown local:").
            gsub("missing keyword:", "missing local:").
            gsub("no keywords accepted", "no locals accepted")
      )
    end
  else
    public_send(method, locals, buffer, &block)
  end
ensure
  @output_buffer, @virtual_path, @current_template = _old_output_buffer, _old_virtual_path, _old_template
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:261
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/blocked_host.html.erb:0</summary>

##### ActionDispatch::DebugView#__usr_local_bundle_ruby_______gems_actionpack_________lib_action_dispatch_middleware_templates_rescues_blocked_host_html_erb___2829033849617490240_32860

```ruby

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:264
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:56</summary>

##### ActionView::OutputBuffer#safe_concat

```ruby
def safe_concat(value)
  @raw_buffer << value
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/blocked_host.html.erb:1
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:42</summary>

##### ActionView::OutputBuffer#<<

```ruby
def <<(value)
  unless value.nil?
    value = value.to_s
    @raw_buffer << if value.html_safe?
      value
    else
      CGI.escapeHTML(value)
    end
  end
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/blocked_host.html.erb:2
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:7</summary>

##### Object#html_safe?

```ruby
def html_safe?
  false
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:45
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:56</summary>

##### ActionView::OutputBuffer#safe_concat

```ruby
def safe_concat(value)
  @raw_buffer << value
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/blocked_host.html.erb:2
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:56</summary>

##### ActionView::OutputBuffer#safe_concat

```ruby
def safe_concat(value)
  @raw_buffer << value
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/blocked_host.html.erb:8
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:42</summary>

##### ActionView::OutputBuffer#<<

```ruby
def <<(value)
  unless value.nil?
    value = value.to_s
    @raw_buffer << if value.html_safe?
      value
    else
      CGI.escapeHTML(value)
    end
  end
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/blocked_host.html.erb:8
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:56</summary>

##### ActionView::OutputBuffer#safe_concat

```ruby
def safe_concat(value)
  @raw_buffer << value
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/blocked_host.html.erb:8
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:56</summary>

##### ActionView::OutputBuffer#safe_concat

```ruby
def safe_concat(value)
  @raw_buffer << value
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/blocked_host.html.erb:10
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:29</summary>

##### ActionView::OutputBuffer#to_s

```ruby
def to_s
  @raw_buffer.html_safe
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:261
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:232</summary>

##### String#html_safe

```ruby
def html_safe
  ActiveSupport::SafeBuffer.new(self)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:30
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:70</summary>

##### ActiveSupport::SafeBuffer#initialize

```ruby
def initialize(str = "")
  @html_safe = true
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:233
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:253</summary>

##### ActiveSupport::Notifications::Fanout::Handle#finish

```ruby
def finish
  finish_with_values(@name, @id, @payload)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:64
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:257</summary>

##### ActiveSupport::Notifications::Fanout::Handle#finish_with_values

```ruby
def finish_with_values(name, id, payload) # :nodoc:
  ensure_state! :started
  @state = :finished

  iterate_guarding_exceptions(@groups) do |group|
    group.finish(name, id, payload)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:254
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:267</summary>

##### ActiveSupport::Notifications::Fanout::Handle#ensure_state!

```ruby
def ensure_state!(expected)
  if @state != expected
    raise ArgumentError, "expected state to be #{expected.inspect} but was #{@state.inspect}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:258
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:22</summary>

##### ActiveSupport::Notifications::FanoutIteration#iterate_guarding_exceptions

```ruby
def iterate_guarding_exceptions(collection)
  exceptions = nil

  collection.each do |s|
    yield s
  rescue Exception => e
    exceptions ||= []
    exceptions << e
  end

  if exceptions
    exceptions = exceptions.flat_map do |exception|
      exception.is_a?(InstrumentationSubscriberError) ? exception.exceptions : [exception]
    end
    if exceptions.size == 1
      raise exceptions.first
    else
      raise InstrumentationSubscriberError.new(exceptions), cause: exceptions.first
    end
  end

  collection
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:261
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:163</summary>

##### ActiveSupport::Notifications::Fanout::EventedGroup#finish

```ruby
def finish(name, id, payload)
  each do |s|
    s.finish(name, id, payload)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:262
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:124</summary>

##### ActiveSupport::Notifications::Fanout::BaseGroup#each

```ruby
def each(&block)
  iterate_guarding_exceptions(@listeners, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:164
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:22</summary>

##### ActiveSupport::Notifications::FanoutIteration#iterate_guarding_exceptions

```ruby
def iterate_guarding_exceptions(collection)
  exceptions = nil

  collection.each do |s|
    yield s
  rescue Exception => e
    exceptions ||= []
    exceptions << e
  end

  if exceptions
    exceptions = exceptions.flat_map do |exception|
      exception.is_a?(InstrumentationSubscriberError) ? exception.exceptions : [exception]
    end
    if exceptions.size == 1
      raise exceptions.first
    else
      raise InstrumentationSubscriberError.new(exceptions), cause: exceptions.first
    end
  end

  collection
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:125
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:97</summary>

##### ActionView::LogSubscriber::Start#finish

```ruby
def finish(name, id, payload)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:165
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:176</summary>

##### ActiveSupport::Notifications::Fanout::EventObjectGroup#finish

```ruby
def finish(name, id, payload)
  @event.payload = payload
  @event.finish!

  each do |s|
    s.call(@event)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:262
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:143</summary>

##### ActiveSupport::Notifications::Event#finish!

```ruby
def finish!
  @cpu_time_finish = now_cpu
  @end = now
  @allocation_count_finish = now_allocations
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:178
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:209</summary>

##### ActiveSupport::Notifications::Event#now_cpu

```ruby
def now_cpu
  Process.clock_gettime(Process::CLOCK_THREAD_CPUTIME_ID, :float_millisecond)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:144
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:202</summary>

##### ActiveSupport::Notifications::Event#now

```ruby
def now
  Process.clock_gettime(Process::CLOCK_MONOTONIC, :float_millisecond)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:145
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:219</summary>

##### ActiveSupport::Notifications::Event#now_allocations

```ruby
def now_allocations
  GC.stat(:total_allocated_objects)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:146
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:124</summary>

##### ActiveSupport::Notifications::Fanout::BaseGroup#each

```ruby
def each(&block)
  iterate_guarding_exceptions(@listeners, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:180
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:22</summary>

##### ActiveSupport::Notifications::FanoutIteration#iterate_guarding_exceptions

```ruby
def iterate_guarding_exceptions(collection)
  exceptions = nil

  collection.each do |s|
    yield s
  rescue Exception => e
    exceptions ||= []
    exceptions << e
  end

  if exceptions
    exceptions = exceptions.flat_map do |exception|
      exception.is_a?(InstrumentationSubscriberError) ? exception.exceptions : [exception]
    end
    if exceptions.size == 1
      raise exceptions.first
    else
      raise InstrumentationSubscriberError.new(exceptions), cause: exceptions.first
    end
  end

  collection
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:125
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/server_timing.rb:15</summary>

##### ActionDispatch::ServerTiming::Subscriber#call

```ruby
def call(event)
  if events = ActiveSupport::IsolatedExecutionState[KEY]
    events << event
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:181
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/server_timing.rb:16
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/flows.rb:19</summary>

##### ActionView::OutputFlow#set

```ruby
def set(key, value)
  @content[key] = ActiveSupport::SafeBuffer.new(value.to_s)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:76
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:145</summary>

##### ActiveSupport::SafeBuffer#to_s

```ruby
def to_s
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/flows.rb:20
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:70</summary>

##### ActiveSupport::SafeBuffer#initialize

```ruby
def initialize(str = "")
  @html_safe = true
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/flows.rb:20
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:248</summary>

##### ActionView::Template#render

```ruby
def render(view, locals, buffer = nil, implicit_locals: [], add_to_stack: true, &block)
  instrument_render_template do
    compile!(view)

    if strict_locals? && @strict_local_keys && !implicit_locals.empty?
      locals_to_ignore = implicit_locals - @strict_local_keys
      locals.except!(*locals_to_ignore)
    end

    if buffer
      view._run(method_name, self, locals, buffer, add_to_stack: add_to_stack, has_strict_locals: strict_locals?, &block)
      nil
    else
      view._run(method_name, self, locals, OutputBuffer.new, add_to_stack: add_to_stack, has_strict_locals: strict_locals?, &block)&.to_s
    end
  end
rescue => e
  handle_render_error(view, e)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:77
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:548</summary>

##### ActionView::Template#instrument_render_template

```ruby
def instrument_render_template(&block)
  ActiveSupport::Notifications.instrument("!render_template.action_view", instrument_payload, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:249
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:552</summary>

##### ActionView::Template#instrument_payload

```ruby
def instrument_payload
  { virtual_path: @virtual_path, identifier: @identifier }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:549
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:204</summary>

##### ActiveSupport::Notifications.instrument

```ruby
def instrument(name, payload = {})
  if notifier.listening?(name)
    instrumenter.instrument(name, payload) { yield payload if block_given? }
  else
    yield payload if block_given?
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:549
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:314</summary>

##### ActiveSupport::Notifications::Fanout#listening?

```ruby
def listening?(name)
  all_listeners_for(name).any? { |s| !s.silenced?(name) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:205
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:301</summary>

##### ActiveSupport::Notifications::Fanout#all_listeners_for

```ruby
def all_listeners_for(name)
  # this is correctly done double-checked locking (Concurrent::Map's lookups have volatile semantics)
  @all_listeners_for[name] || synchronize do
    # use synchronisation when accessing @subscribers
    @all_listeners_for[name] ||=
      @string_subscribers[name] + @other_subscribers.select { |s| s.subscribed_to?(name) }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:315
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:21</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#[]

```ruby
def [](key)
  @backend[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:303
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:394</summary>

##### ActionView::Template#compile!

```ruby
def compile!(view)
  return if @compiled

  # Templates can be used concurrently in threaded environments
  # so compilation and any instance variable modification must
  # be synchronized
  @compile_mutex.synchronize do
    # Any thread holding this lock will be compiling the template needed
    # by the threads waiting. So re-check the @compiled flag to avoid
    # re-compilation
    return if @compiled

    mod = view.compiled_method_container

    instrument("!compile_template") do
      compile(mod)
    end

    @compiled = true
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:250
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/debug_view.rb:19</summary>

##### ActionDispatch::DebugView#compiled_method_container

```ruby
def compiled_method_container
  self.class
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:406
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:544</summary>

##### ActionView::Template#instrument

```ruby
def instrument(action, &block) # :doc:
  ActiveSupport::Notifications.instrument("#{action}.action_view", instrument_payload, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:408
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:552</summary>

##### ActionView::Template#instrument_payload

```ruby
def instrument_payload
  { virtual_path: @virtual_path, identifier: @identifier }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:545
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:204</summary>

##### ActiveSupport::Notifications.instrument

```ruby
def instrument(name, payload = {})
  if notifier.listening?(name)
    instrumenter.instrument(name, payload) { yield payload if block_given? }
  else
    yield payload if block_given?
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:545
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:314</summary>

##### ActiveSupport::Notifications::Fanout#listening?

```ruby
def listening?(name)
  all_listeners_for(name).any? { |s| !s.silenced?(name) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications.rb:205
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:301</summary>

##### ActiveSupport::Notifications::Fanout#all_listeners_for

```ruby
def all_listeners_for(name)
  # this is correctly done double-checked locking (Concurrent::Map's lookups have volatile semantics)
  @all_listeners_for[name] || synchronize do
    # use synchronisation when accessing @subscribers
    @all_listeners_for[name] ||=
      @string_subscribers[name] + @other_subscribers.select { |s| s.subscribed_to?(name) }
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:315
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/concurrent-ruby-1.3.4/lib/concurrent-ruby/concurrent/collection/map/non_concurrent_map_backend.rb:21</summary>

##### Concurrent::Collection::NonConcurrentMapBackend#[]

```ruby
def [](key)
  @backend[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:303
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:472</summary>

##### ActionView::Template#compile

```ruby
def compile(mod)
  begin
    mod.module_eval(compiled_source, identifier, offset)
  rescue SyntaxError
    # Account for when code in the template is not syntactically valid; e.g. if we're using
    # ERB and the user writes <%= foo( %>, attempting to call a helper `foo` and interpolate
    # the result into the template, but missing an end parenthesis.
    raise SyntaxErrorInTemplate.new(self, encode!)
  end

  return unless strict_locals?

  parameters = mod.instance_method(method_name).parameters - [[:req, :output_buffer]]
  # Check compiled method parameters to ensure that only kwargs
  # were provided as strict locals, preventing `locals: (foo, *foo)` etc
  # and allowing `locals: (foo:)`.

  non_kwarg_parameters = parameters.select do |parameter|
    ![:keyreq, :key, :keyrest, :nokey].include?(parameter[0])
  end

  unless non_kwarg_parameters.empty?
    mod.undef_method(method_name)

    raise ArgumentError.new(
      "#{non_kwarg_parameters.map { |_, name| "`#{name}`" }.to_sentence} set as non-keyword " \
      "#{'argument'.pluralize(non_kwarg_parameters.length)} for #{short_identifier}. " \
      "Locals can only be set as keyword arguments."
    )
  end

  unless parameters.any? { |type, _| type == :keyrest }
    parameters.map!(&:last)
    parameters.sort!
    @strict_local_keys = parameters.freeze
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:409
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:419</summary>

##### ActionView::Template#compiled_source

```ruby
def compiled_source
  set_strict_locals = strict_locals!
  source = encode!
  code = @handler.call(self, source)

  method_arguments =
    if set_strict_locals
      "output_buffer, #{set_strict_locals}"
    else
      "local_assigns, output_buffer"
    end

  # Make sure that the resulting String to be eval'd is in the
  # encoding of the code
  source = +<<-end_src
    def #{method_name}(#{method_arguments})
      @virtual_path = #{@virtual_path.inspect};#{locals_code};#{code}
    end
  end_src

  # Make sure the source is in the encoding of the returned code
  source.force_encoding(code.encoding)

  # In case we get back a String from a handler that is not in
  # BINARY or the default_internal, encode it to the default_internal
  source.encode!

  # Now, validate that the source we got back from the template
  # handler is valid in the default_internal. This is for handlers
  # that handle encoding but screw up
  unless source.valid_encoding?
    raise WrongEncodingError.new(source, Encoding.default_internal)
  end

  if Template.frozen_string_literal
    "# frozen_string_literal: true\n#{source}"
  else
    source
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:474
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:420
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:297</summary>

##### ActionView::Template#encode!

```ruby
def encode!
  source = self.source

  return source unless source.encoding == Encoding::BINARY

  # Look for # encoding: *. If we find one, we'll encode the
  # String in that encoding, otherwise, we'll use the
  # default external encoding.
  if source.sub!(LEADING_ENCODING_REGEXP, "")
    encoding = magic_encoding = $1
  else
    encoding = Encoding.default_external
  end

  # Tag the source with the default external encoding
  # or the encoding specified in the file
  source.force_encoding(encoding)

  # If the user didn't specify an encoding, and the handler
  # handles encodings, we simply pass the String as is to
  # the handler (with the default_external tag)
  if !magic_encoding && @handler.respond_to?(:handles_encoding?) && @handler.handles_encoding?
    source
  # Otherwise, if the String is valid in the encoding,
  # encode immediately to default_internal. This means
  # that if a handler doesn't handle encodings, it will
  # always get Strings in the default_internal
  elsif source.valid_encoding?
    source.encode!
  # Otherwise, since the String is invalid in the encoding
  # specified, raise an exception
  else
    raise WrongEncodingError.new(source, encoding)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:421
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:280</summary>

##### ActionView::Template#source

```ruby
def source
  @source.to_s
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:298
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/sources/file.rb:11</summary>

##### ActionView::Template::Sources::File#to_s

```ruby
def to_s
  ::File.binread @filename
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:281
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:37</summary>

##### ActionView::Template::Handlers::ERB#handles_encoding?

```ruby
def handles_encoding?
  true
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:318
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:61</summary>

##### ActionView::Template::Handlers::ERB#call

```ruby
def call(template, source)
  # First, convert to BINARY, so in case the encoding is
  # wrong, we can still find an encoding tag
  # (<%# encoding %>) inside the String using a regular
  # expression
  template_source = source.b

  erb = template_source.gsub(ENCODING_TAG, "")
  encoding = $2

  erb.force_encoding valid_encoding(source.dup, encoding)

  # Always make sure we return a String in the default_internal
  erb.encode!

  # Strip trailing newlines from the template if enabled
  erb.chomp! if strip_trailing_newlines

  options = {
    escape: (self.class.escape_ignore_list.include? template.type),
    trim: (self.class.erb_trim_mode == "-")
  }

  if ActionView::Base.annotate_rendered_view_with_filenames && template.format == :html
    options[:preamble] = "@output_buffer.safe_append='<!-- BEGIN #{template.short_identifier} -->';"
    options[:postamble] = "@output_buffer.safe_append='<!-- END #{template.short_identifier} -->';@output_buffer"
  end

  self.class.erb_implementation.new(erb, options).src
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:422
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:93</summary>

##### ActionView::Template::Handlers::ERB#valid_encoding

```ruby
def valid_encoding(string, encoding)
  # If a magic encoding comment was found, tag the
  # String with this encoding. This is for a case
  # where the original String was assumed to be,
  # for instance, UTF-8, but a magic comment
  # proved otherwise
  string.force_encoding(encoding) if encoding

  # If the String is valid, return the encoding we found
  return string.encoding if string.valid_encoding?

  # Otherwise, raise an exception
  raise WrongEncodingError.new(string, string.encoding)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:71
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:23</summary>

##### ActionView::Template::Handlers::ERB#strip_trailing_newlines

```ruby
class_attribute :strip_trailing_newlines, default: false

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:77
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:23</summary>

##### ActionView::Template::Handlers::ERB.strip_trailing_newlines

```ruby
class_attribute :strip_trailing_newlines, default: false

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:23
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:20</summary>

##### ActionView::Template::Handlers::ERB.escape_ignore_list

```ruby
class_attribute :escape_ignore_list, default: ["text/plain"]

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:80
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:268</summary>

##### ActionView::Template#type

```ruby
def type
  @type ||= Types[format]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:80
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:49</summary>

##### Mime.[]

```ruby
def [](type)
  return type if type.is_a?(Type)
  Type.lookup_by_extension(type)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:269
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:169</summary>

##### Mime::Type.lookup_by_extension

```ruby
def lookup_by_extension(extension)
  EXTENSION_LOOKUP[extension.to_s]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/mime_type.rb:51
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:14</summary>

##### ActionView::Template::Handlers::ERB.erb_trim_mode

```ruby
class_attribute :erb_trim_mode, default: "-"

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:81
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:163</summary>

##### ActionView::Base.annotate_rendered_view_with_filenames

```ruby
cattr_accessor :annotate_rendered_view_with_filenames, default: false

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:84
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:17</summary>

##### ActionView::Template::Handlers::ERB.erb_implementation

```ruby
class_attribute :erb_implementation, default: Erubi

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:89
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:11</summary>

##### ActionView::Template::Handlers::ERB::Erubi#initialize

```ruby
def initialize(input, properties = {})
  @newline_pending = 0

  # Dup properties so that we don't modify argument
  properties = Hash[properties]

  properties[:bufvar]     ||= "@output_buffer"
  properties[:preamble]   ||= ""
  properties[:postamble]  ||= "#{properties[:bufvar]}"

  # Tell Eruby that whether template will be compiled with `frozen_string_literal: true`
  properties[:freeze_template_literals] = !Template.frozen_string_literal

  properties[:escapefunc] = ""

  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb.rb:89
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:91</summary>

##### ActionView::Template::Handlers::ERB::Erubi#initialize

```ruby
def initialize(input, properties = {})
  @newline_pending = 0

  # Dup properties so that we don't modify argument
  properties = Hash[properties]

  properties[:bufvar]     ||= "@output_buffer"
  properties[:preamble]   ||= ""
  properties[:postamble]  ||= "#{properties[:bufvar]}"

  # Tell Eruby that whether template will be compiled with `frozen_string_literal: true`
  properties[:freeze_template_literals] = !Template.frozen_string_literal

  properties[:escapefunc] = ""

  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:26
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:30</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_text

```ruby
def add_text(text)
  return if text.empty?

  if text == "\n"
    @newline_pending += 1
  else
    with_buffer do
      src << ".safe_append='"
      src << "\n" * @newline_pending if @newline_pending > 0
      src << text.gsub(/['\\]/, '\\\\\&') << @text_end
    end
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:167
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:268</summary>

##### Erubi::Engine#with_buffer

```ruby
def with_buffer
  if @chain_appends
    unless @buffer_on_stack
      @src << '; ' << @bufvar
    end
    yield
    @buffer_on_stack = true
  else
    @src << ' ' << @bufvar
    yield
    @src << ';'
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:36
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:47</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_expression

```ruby
def add_expression(indicator, code)
  flush_newline_if_pending(src)

  with_buffer do
    if (indicator == "==") || @escape
      src << ".safe_expr_append="
    else
      src << ".append="
    end

    if BLOCK_EXPR.match?(code)
      src << " " << code
    else
      src << "(" << code << ")"
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:171
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:75</summary>

##### ActionView::Template::Handlers::ERB::Erubi#flush_newline_if_pending

```ruby
def flush_newline_if_pending(src)
  if @newline_pending > 0
    with_buffer { src << ".safe_append='#{"\n" * @newline_pending}" << @text_end }
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:48
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:268</summary>

##### Erubi::Engine#with_buffer

```ruby
def with_buffer
  if @chain_appends
    unless @buffer_on_stack
      @src << '; ' << @bufvar
    end
    yield
    @buffer_on_stack = true
  else
    @src << ' ' << @bufvar
    yield
    @src << ';'
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:50
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:30</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_text

```ruby
def add_text(text)
  return if text.empty?

  if text == "\n"
    @newline_pending += 1
  else
    with_buffer do
      src << ".safe_append='"
      src << "\n" * @newline_pending if @newline_pending > 0
      src << text.gsub(/['\\]/, '\\\\\&') << @text_end
    end
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:172
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:30</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_text

```ruby
def add_text(text)
  return if text.empty?

  if text == "\n"
    @newline_pending += 1
  else
    with_buffer do
      src << ".safe_append='"
      src << "\n" * @newline_pending if @newline_pending > 0
      src << text.gsub(/['\\]/, '\\\\\&') << @text_end
    end
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:167
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:268</summary>

##### Erubi::Engine#with_buffer

```ruby
def with_buffer
  if @chain_appends
    unless @buffer_on_stack
      @src << '; ' << @bufvar
    end
    yield
    @buffer_on_stack = true
  else
    @src << ' ' << @bufvar
    yield
    @src << ';'
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:36
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:47</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_expression

```ruby
def add_expression(indicator, code)
  flush_newline_if_pending(src)

  with_buffer do
    if (indicator == "==") || @escape
      src << ".safe_expr_append="
    else
      src << ".append="
    end

    if BLOCK_EXPR.match?(code)
      src << " " << code
    else
      src << "(" << code << ")"
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:171
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:75</summary>

##### ActionView::Template::Handlers::ERB::Erubi#flush_newline_if_pending

```ruby
def flush_newline_if_pending(src)
  if @newline_pending > 0
    with_buffer { src << ".safe_append='#{"\n" * @newline_pending}" << @text_end }
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:48
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:268</summary>

##### Erubi::Engine#with_buffer

```ruby
def with_buffer
  if @chain_appends
    unless @buffer_on_stack
      @src << '; ' << @bufvar
    end
    yield
    @buffer_on_stack = true
  else
    @src << ' ' << @bufvar
    yield
    @src << ';'
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:50
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:30</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_text

```ruby
def add_text(text)
  return if text.empty?

  if text == "\n"
    @newline_pending += 1
  else
    with_buffer do
      src << ".safe_append='"
      src << "\n" * @newline_pending if @newline_pending > 0
      src << text.gsub(/['\\]/, '\\\\\&') << @text_end
    end
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:172
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:30</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_text

```ruby
def add_text(text)
  return if text.empty?

  if text == "\n"
    @newline_pending += 1
  else
    with_buffer do
      src << ".safe_append='"
      src << "\n" * @newline_pending if @newline_pending > 0
      src << text.gsub(/['\\]/, '\\\\\&') << @text_end
    end
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:197
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:268</summary>

##### Erubi::Engine#with_buffer

```ruby
def with_buffer
  if @chain_appends
    unless @buffer_on_stack
      @src << '; ' << @bufvar
    end
    yield
    @buffer_on_stack = true
  else
    @src << ' ' << @bufvar
    yield
    @src << ';'
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:36
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:70</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_postamble

```ruby
def add_postamble(_)
  flush_newline_if_pending(src)
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:200
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:75</summary>

##### ActionView::Template::Handlers::ERB::Erubi#flush_newline_if_pending

```ruby
def flush_newline_if_pending(src)
  if @newline_pending > 0
    with_buffer { src << ".safe_append='#{"\n" * @newline_pending}" << @text_end }
    @newline_pending = 0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:71
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:252</summary>

##### ActionView::Template::Handlers::ERB::Erubi#add_postamble

```ruby
def add_postamble(_)
  flush_newline_if_pending(src)
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template/handlers/erb/erubi.rb:72
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:286</summary>

##### Erubi::Engine#terminate_expression

```ruby
def terminate_expression
  @src << '; ' if @chain_appends
end

# called from /usr/local/bundle/ruby/3.0.0/gems/erubi-1.13.0/lib/erubi.rb:253
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:372</summary>

##### ActionView::Template#method_name

```ruby
def method_name # :nodoc:
  @method_name ||= begin
    m = +"_#{identifier_method_name}__#{@identifier.hash}_#{__id__}"
    m.tr!("-", "_")
    m
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:434
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:540</summary>

##### ActionView::Template#identifier_method_name

```ruby
def identifier_method_name
  short_identifier.tr("^a-z_", "_")
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:374
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:272</summary>

##### ActionView::Template#short_identifier

```ruby
def short_identifier
  @short_identifier ||= defined?(Rails.root) ? identifier.delete_prefix("#{Rails.root}/") : identifier
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:541
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:63</summary>

##### Rails.root

```ruby
def root
  application && application.config.root
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:273
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:43</summary>

##### Rails.application

```ruby
def application
  @application ||= (app_class.instance if app_class)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:64
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:43</summary>

##### Rails.application

```ruby
def application
  @application ||= (app_class.instance if app_class)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:64
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/libapplication.rb:437</summary>

##### Rails::Application#config

```ruby
def config # :nodoc:
  @config ||= Application::Configuration.new(self.class.find_root(self.class.called_from))
end

# called from /usr/local/bundle/ruby/3.0.0/gems/railties-7.1.3.4/lib/rails.rb:64
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:527</summary>

##### ActionView::Template#locals_code

```ruby
def locals_code
  return "" if strict_locals?

  # Only locals with valid variable names get set directly. Others will
  # still be available in local_assigns.
  locals = @locals - Module::RUBY_RESERVED_KEYWORDS

  locals = locals.grep(/\A(?![A-Z0-9])(?:[[:alnum:]_]|[^\0-\177])+\z/)

  # Assign for the same variable is to suppress unused variable warning
  locals.each_with_object(+"") { |key, code| code << "#{key} = local_assigns[:#{key}]; #{key} = #{key};" }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:435
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:356</summary>

##### ActionView::Template#strict_locals?

```ruby
def strict_locals?
  strict_locals!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:528
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:357
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:510</summary>

##### ActionView::Template#offset

```ruby
def offset
  if Template.frozen_string_literal
    -1
  else
    0
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:474
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:274</summary>

##### DEBUGGER__::Session#process_event

```ruby
def process_event evt
  # variable `@internal_info` is only used for test
  tc, output, ev, @internal_info, *ev_args = evt

  output.each{|str| @ui.puts str} if ev != :suspend

  # special event, tc is nil
  # and we don't want to set @tc to the newly created thread's ThreadClient
  if ev == :thread_begin
    th = ev_args.shift
    q = ev_args.shift
    on_thread_begin th
    q << true

    return
  end

  @tc = tc

  case ev
  when :init
    enter_subsession
    wait_command_loop
  when :load
    iseq, src = ev_args
    on_load iseq, src
    request_tc :continue

  when :trace
    trace_id, msg = ev_args
    if t = @tracers.values.find{|t| t.object_id == trace_id}
      t.puts msg
    end
    request_tc :continue

  when :suspend
    enter_subsession if ev_args.first != :replay
    output.each{|str| @ui.puts str} unless @ui.ignore_output_on_suspend?

    case ev_args.first
    when :breakpoint
      bp, i = bp_index ev_args[1]
      clean_bps unless bp
      @ui.event :suspend_bp, i, bp, @tc.id
    when :trap
      @ui.event :suspend_trap, sig = ev_args[1], @tc.id

      if sig == :SIGINT && (@intercepted_sigint_cmd.kind_of?(Proc) || @intercepted_sigint_cmd.kind_of?(String))
        @ui.puts "#{@intercepted_sigint_cmd.inspect} is registered as SIGINT handler."
        @ui.puts "`sigint` command execute it."
      end
    else
      @ui.event :suspended, @tc.id
    end

    if @displays.empty?
      wait_command_loop
    else
      request_eval :display, @displays
    end
  when :result
    raise "[BUG] not in subsession" if @subsession_stack.empty?

    case ev_args.first
    when :try_display
      failed_results = ev_args[1]
      if failed_results.size > 0
        i, _msg = failed_results.last
        if i+1 == @displays.size
          @ui.puts "canceled: #{@displays.pop}"
        end
      end

      stop_all_threads
    when :method_breakpoint, :watch_breakpoint
      bp = ev_args[1]
      if bp
        add_bp(bp)
        show_bps bp
      else
        # can't make a bp
      end
    when :trace_pass
      obj_id = ev_args[1]
      obj_inspect = ev_args[2]
      opt = ev_args[3]
      add_tracer ObjectTracer.new(@ui, obj_id, obj_inspect, **opt)
      stop_all_threads
    else
      stop_all_threads
    end

    wait_command_loop

  when :protocol_result
    process_protocol_result ev_args
    wait_command_loop
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:255
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:1747</summary>

##### DEBUGGER__::Session#on_load

```ruby
def on_load iseq, src
  DEBUGGER__.info "Load #{iseq.absolute_path || iseq.path}"

  file_path, reloaded = @sr.add(iseq, src)
  @ui.event :load, file_path, reloaded

  # check breakpoints
  if file_path
    @bps.find_all do |_key, bp|
      LineBreakpoint === bp && bp.path_is?(file_path) && (iseq.first_lineno..iseq.last_line).cover?(bp.line)
    end.each do |_key, bp|
      if !bp.iseq
        bp.try_activate iseq
      elsif reloaded
        @bps.delete bp.key # to allow duplicate

        # When we delete a breakpoint from the @bps hash, we also need to deactivate it or else its tracepoint event
        # will continue to be enabled and we'll suspend on ghost breakpoints
        bp.delete

        nbp = LineBreakpoint.copy(bp, iseq)
        add_bp nbp
      end
    end
  else # !file_path => file_path is not existing
    @bps.find_all do |_key, bp|
      LineBreakpoint === bp && !bp.iseq && DEBUGGER__.compare_path(bp.path, (iseq.absolute_path || iseq.path))
    end.each do |_key, bp|
      bp.try_activate iseq
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:299
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2383</summary>

##### DEBUGGER.info

```ruby
def self.info msg
  log :INFO, msg
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:1748
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2399</summary>

##### DEBUGGER.log

```ruby
def self.log level, msg
  if check_loglevel level
    @logfile = STDERR unless defined? @logfile
    return if @logfile.closed?

    if defined? SESSION
      pi = SESSION.process_info
      process_info = pi ? "[#{pi}]" : nil
    end

    if level == :WARN
      # :WARN on debugger is general information
      @logfile.puts "DEBUGGER#{process_info}: #{msg}"
      @logfile.flush
    else
      @logfile.puts "DEBUGGER#{process_info} (#{level}): #{msg}"
      @logfile.flush
    end
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2384
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2387</summary>

##### DEBUGGER.check_loglevel

```ruby
def self.check_loglevel level
  lv = LOG_LEVELS[level]
  config_lv = LOG_LEVELS[CONFIG[:log_level]]
  lv <= config_lv
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2400
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:91</summary>

##### DEBUGGER__::Config#[]

```ruby
def [](key)
  config[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2389
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:218</summary>

##### DEBUGGER__::Config#config

```ruby
private def config
  self.class.config
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:92
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:65</summary>

##### DEBUGGER.config

```ruby
def self.config
  @config
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:219
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:77</summary>

##### DEBUGGER__::SourceRepository#add

```ruby
def add iseq, src
  path = (iseq.absolute_path || iseq.path)

  if path && File.exist?(path)
    reloaded = @files.has_key? path

    if src
      add_iseq iseq, src
      return path, reloaded
    else
      add_path path
      return path, reloaded
    end
  else
    add_iseq iseq, src
    nil
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:1750
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:104</summary>

##### DEBUGGER__::SourceRepository#add_iseq

```ruby
private def add_iseq iseq, src
  line = iseq.first_line
  if line > 1
    src = ("\n" * (line - 1)) + src
  end

  si = SrcInfo.new(src.each_line.map{|l| l.chomp})
  all_iseq(iseq).each{|e|
    e.instance_variable_set(:@debugger_si, si)
    e.freeze
  }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:84
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:96</summary>

##### DEBUGGER__::SourceRepository#all_iseq

```ruby
private def all_iseq iseq, rs = []
  rs << iseq
  iseq.each_child{|ci|
    all_iseq(ci, rs)
  }
  rs
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:111
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:96</summary>

##### DEBUGGER__::SourceRepository#all_iseq

```ruby
private def all_iseq iseq, rs = []
  rs << iseq
  iseq.each_child{|ci|
    all_iseq(ci, rs)
  }
  rs
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/source_repository.rb:99
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2163</summary>

##### DEBUGGER__::UI_Base#event

```ruby
def event type, *args
  case type
  when :suspend_bp
    i, bp = *args
    puts "\nStop by \##{i} #{bp}" if bp
  when :suspend_trap
    puts "\nStop by #{args.first}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:1751
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:261</summary>

##### DEBUGGER__::Session#request_tc

```ruby
def request_tc(req)
  @tc << req
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:300
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/thread_client.rb:210</summary>

##### DEBUGGER__::ThreadClient#<<

```ruby
def << req
  debug_cmd(req)
  @q_cmd << req
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:262
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/thread_client.rb:1271</summary>

##### DEBUGGER__::ThreadClient#debug_cmd

```ruby
def debug_cmd(cmds)
  DEBUGGER__.debug{
    cmd, *args = *cmds
    args = args.map { |arg| DEBUGGER__.safe_inspect(arg) }
    "#{inspect} receives Cmd { type: #{cmd.inspect}, args: #{args} } from Session"
  }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/thread_client.rb:211
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2393</summary>

##### DEBUGGER.debug

```ruby
def self.debug(&b)
  if check_loglevel :DEBUG
    log :DEBUG, b.call
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/thread_client.rb:1272
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2387</summary>

##### DEBUGGER.check_loglevel

```ruby
def self.check_loglevel level
  lv = LOG_LEVELS[level]
  config_lv = LOG_LEVELS[CONFIG[:log_level]]
  lv <= config_lv
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2394
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:91</summary>

##### DEBUGGER__::Config#[]

```ruby
def [](key)
  config[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:2389
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:218</summary>

##### DEBUGGER__::Config#config

```ruby
private def config
  self.class.config
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:92
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:65</summary>

##### DEBUGGER.config

```ruby
def self.config
  @config
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/config.rb:219
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:249</summary>

##### DEBUGGER__::Session#pop_event

```ruby
def pop_event
  @q_evt.pop
end

# called from /usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:254
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/debug-1.9.2/lib/debug/session.rb:1832</summary>

##### Module.method_added

```ruby
def method_added mid; end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/layout.erb:0
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:356</summary>

##### ActionView::Template#strict_locals?

```ruby
def strict_locals?
  strict_locals!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:482
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:357
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:356</summary>

##### ActionView::Template#strict_locals?

```ruby
def strict_locals?
  strict_locals!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:252
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:357
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:372</summary>

##### ActionView::Template#method_name

```ruby
def method_name # :nodoc:
  @method_name ||= begin
    m = +"_#{identifier_method_name}__#{@identifier.hash}_#{__id__}"
    m.tr!("-", "_")
    m
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:261
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:22</summary>

##### ActionView::OutputBuffer#initialize

```ruby
def initialize(buffer = "")
  @raw_buffer = String.new(buffer)
  @raw_buffer.encode!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:261
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:356</summary>

##### ActionView::Template#strict_locals?

```ruby
def strict_locals?
  strict_locals!
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:261
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:342</summary>

##### ActionView::Template#strict_locals!

```ruby
def strict_locals!
  if @strict_locals == NONE
    self.source.sub!(STRICT_LOCALS_REGEX, "")
    @strict_locals = $1

    return if @strict_locals.nil? # Magic comment not found

    @strict_locals = "**nil" if @strict_locals.blank?
  end

  @strict_locals
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:357
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:245</summary>

##### ActionView::Base#_run

```ruby
def _run(method, template, locals, buffer, add_to_stack: true, has_strict_locals: false, &block)
  _old_output_buffer, _old_virtual_path, _old_template = @output_buffer, @virtual_path, @current_template
  @current_template = template if add_to_stack
  @output_buffer = buffer

  if has_strict_locals
    begin
      public_send(method, buffer, **locals, &block)
    rescue ArgumentError => argument_error
      raise(
        ArgumentError,
        argument_error.
          message.
            gsub("unknown keyword:", "unknown local:").
            gsub("missing keyword:", "missing local:").
            gsub("no keywords accepted", "no locals accepted")
      )
    end
  else
    public_send(method, locals, buffer, &block)
  end
ensure
  @output_buffer, @virtual_path, @current_template = _old_output_buffer, _old_virtual_path, _old_template
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:261
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/layout.erb:0</summary>

##### ActionDispatch::DebugView#__usr_local_bundle_ruby_______gems_actionpack_________lib_action_dispatch_middleware_templates_rescues_layout_erb___1080202284111567045_32880

```ruby

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/base.rb:264
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:56</summary>

##### ActionView::OutputBuffer#safe_concat

```ruby
def safe_concat(value)
  @raw_buffer << value
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/layout.erb:1
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/helpers/rendering_helper.rb:97</summary>

##### ActionView::Helpers::RenderingHelper#_layout_for

```ruby
def _layout_for(*args, &block)
  name = args.first

  if block && !name.is_a?(Symbol)
    capture(*args, &block)
  else
    super
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:77
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/context.rb:27</summary>

##### ActionView::Helpers::RenderingHelper#_layout_for

```ruby
def _layout_for(*args, &block)
  name = args.first

  if block && !name.is_a?(Symbol)
    capture(*args, &block)
  else
    super
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/helpers/rendering_helper.rb:103
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/flows.rb:14</summary>

##### ActionView::OutputFlow#get

```ruby
def get(key)
  @content[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/context.rb:29
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:70</summary>

##### ActiveSupport::SafeBuffer#initialize

```ruby
def initialize(str = "")
  @html_safe = true
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/flows.rb:10
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:232</summary>

##### String#html_safe

```ruby
def html_safe
  ActiveSupport::SafeBuffer.new(self)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/context.rb:29
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:70</summary>

##### ActiveSupport::SafeBuffer#initialize

```ruby
def initialize(str = "")
  @html_safe = true
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:233
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:42</summary>

##### ActionView::OutputBuffer#<<

```ruby
def <<(value)
  unless value.nil?
    value = value.to_s
    @raw_buffer << if value.html_safe?
      value
    else
      CGI.escapeHTML(value)
    end
  end
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/layout.erb:257
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:145</summary>

##### ActiveSupport::SafeBuffer#to_s

```ruby
def to_s
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:56</summary>

##### ActionView::OutputBuffer#safe_concat

```ruby
def safe_concat(value)
  @raw_buffer << value
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/layout.erb:257
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/helpers/rendering_helper.rb:97</summary>

##### ActionView::Helpers::RenderingHelper#_layout_for

```ruby
def _layout_for(*args, &block)
  name = args.first

  if block && !name.is_a?(Symbol)
    capture(*args, &block)
  else
    super
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:77
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/context.rb:27</summary>

##### ActionView::Helpers::RenderingHelper#_layout_for

```ruby
def _layout_for(*args, &block)
  name = args.first

  if block && !name.is_a?(Symbol)
    capture(*args, &block)
  else
    super
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/helpers/rendering_helper.rb:103
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/flows.rb:14</summary>

##### ActionView::OutputFlow#get

```ruby
def get(key)
  @content[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/context.rb:29
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:232</summary>

##### String#html_safe

```ruby
def html_safe
  ActiveSupport::SafeBuffer.new(self)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/context.rb:29
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:70</summary>

##### ActiveSupport::SafeBuffer#initialize

```ruby
def initialize(str = "")
  @html_safe = true
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:233
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:42</summary>

##### ActionView::OutputBuffer#<<

```ruby
def <<(value)
  unless value.nil?
    value = value.to_s
    @raw_buffer << if value.html_safe?
      value
    else
      CGI.escapeHTML(value)
    end
  end
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/layout.erb:281
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:145</summary>

##### ActiveSupport::SafeBuffer#to_s

```ruby
def to_s
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:44
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:56</summary>

##### ActionView::OutputBuffer#safe_concat

```ruby
def safe_concat(value)
  @raw_buffer << value
  self
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/rescues/layout.erb:281
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:29</summary>

##### ActionView::OutputBuffer#to_s

```ruby
def to_s
  @raw_buffer.html_safe
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/template.rb:261
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:232</summary>

##### String#html_safe

```ruby
def html_safe
  ActiveSupport::SafeBuffer.new(self)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/buffers.rb:30
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:70</summary>

##### ActiveSupport::SafeBuffer#initialize

```ruby
def initialize(str = "")
  @html_safe = true
  super
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/core_ext/string/output_safety.rb:233
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:253</summary>

##### ActiveSupport::Notifications::Fanout::Handle#finish

```ruby
def finish
  finish_with_values(@name, @id, @payload)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:64
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:257</summary>

##### ActiveSupport::Notifications::Fanout::Handle#finish_with_values

```ruby
def finish_with_values(name, id, payload) # :nodoc:
  ensure_state! :started
  @state = :finished

  iterate_guarding_exceptions(@groups) do |group|
    group.finish(name, id, payload)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:254
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:267</summary>

##### ActiveSupport::Notifications::Fanout::Handle#ensure_state!

```ruby
def ensure_state!(expected)
  if @state != expected
    raise ArgumentError, "expected state to be #{expected.inspect} but was #{@state.inspect}"
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:258
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:22</summary>

##### ActiveSupport::Notifications::FanoutIteration#iterate_guarding_exceptions

```ruby
def iterate_guarding_exceptions(collection)
  exceptions = nil

  collection.each do |s|
    yield s
  rescue Exception => e
    exceptions ||= []
    exceptions << e
  end

  if exceptions
    exceptions = exceptions.flat_map do |exception|
      exception.is_a?(InstrumentationSubscriberError) ? exception.exceptions : [exception]
    end
    if exceptions.size == 1
      raise exceptions.first
    else
      raise InstrumentationSubscriberError.new(exceptions), cause: exceptions.first
    end
  end

  collection
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:261
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:163</summary>

##### ActiveSupport::Notifications::Fanout::EventedGroup#finish

```ruby
def finish(name, id, payload)
  each do |s|
    s.finish(name, id, payload)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:262
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:124</summary>

##### ActiveSupport::Notifications::Fanout::BaseGroup#each

```ruby
def each(&block)
  iterate_guarding_exceptions(@listeners, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:164
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:22</summary>

##### ActiveSupport::Notifications::FanoutIteration#iterate_guarding_exceptions

```ruby
def iterate_guarding_exceptions(collection)
  exceptions = nil

  collection.each do |s|
    yield s
  rescue Exception => e
    exceptions ||= []
    exceptions << e
  end

  if exceptions
    exceptions = exceptions.flat_map do |exception|
      exception.is_a?(InstrumentationSubscriberError) ? exception.exceptions : [exception]
    end
    if exceptions.size == 1
      raise exceptions.first
    else
      raise InstrumentationSubscriberError.new(exceptions), cause: exceptions.first
    end
  end

  collection
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:125
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/log_subscriber.rb:97</summary>

##### ActionView::LogSubscriber::Start#finish

```ruby
def finish(name, id, payload)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:165
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:176</summary>

##### ActiveSupport::Notifications::Fanout::EventObjectGroup#finish

```ruby
def finish(name, id, payload)
  @event.payload = payload
  @event.finish!

  each do |s|
    s.call(@event)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:262
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:143</summary>

##### ActiveSupport::Notifications::Event#finish!

```ruby
def finish!
  @cpu_time_finish = now_cpu
  @end = now
  @allocation_count_finish = now_allocations
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:178
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:209</summary>

##### ActiveSupport::Notifications::Event#now_cpu

```ruby
def now_cpu
  Process.clock_gettime(Process::CLOCK_THREAD_CPUTIME_ID, :float_millisecond)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:144
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:202</summary>

##### ActiveSupport::Notifications::Event#now

```ruby
def now
  Process.clock_gettime(Process::CLOCK_MONOTONIC, :float_millisecond)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:145
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:219</summary>

##### ActiveSupport::Notifications::Event#now_allocations

```ruby
def now_allocations
  GC.stat(:total_allocated_objects)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/instrumenter.rb:146
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:124</summary>

##### ActiveSupport::Notifications::Fanout::BaseGroup#each

```ruby
def each(&block)
  iterate_guarding_exceptions(@listeners, &block)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:180
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:22</summary>

##### ActiveSupport::Notifications::FanoutIteration#iterate_guarding_exceptions

```ruby
def iterate_guarding_exceptions(collection)
  exceptions = nil

  collection.each do |s|
    yield s
  rescue Exception => e
    exceptions ||= []
    exceptions << e
  end

  if exceptions
    exceptions = exceptions.flat_map do |exception|
      exception.is_a?(InstrumentationSubscriberError) ? exception.exceptions : [exception]
    end
    if exceptions.size == 1
      raise exceptions.first
    else
      raise InstrumentationSubscriberError.new(exceptions), cause: exceptions.first
    end
  end

  collection
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:125
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/server_timing.rb:15</summary>

##### ActionDispatch::ServerTiming::Subscriber#call

```ruby
def call(event)
  if events = ActiveSupport::IsolatedExecutionState[KEY]
    events << event
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/notifications/fanout.rb:181
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:37</summary>

##### ActiveSupport::IsolatedExecutionState.[]

```ruby
def [](key)
  state[key]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/server_timing.rb:16
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:38
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/abstract_renderer.rb:178</summary>

##### ActionView::AbstractRenderer#build_rendered_template

```ruby
def build_rendered_template(content, template)
  RenderedTemplate.new content, template
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/template_renderer.rb:82
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/abstract_renderer.rb:144</summary>

##### ActionView::AbstractRenderer::RenderedTemplate#initialize

```ruby
def initialize(body, template)
  @body = body
  @template = template
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionview-7.1.3.4/lib/action_view/renderer/abstract_renderer.rb:179
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:156</summary>

##### ActiveSupport::BroadcastLogger#local_level=

```ruby
def local_level=(level)
  dispatch do |logger|
    logger.local_level = level if logger.respond_to?(:local_level=)
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:47
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:230</summary>

##### ActiveSupport::BroadcastLogger#dispatch

```ruby
def dispatch(&block)
  @broadcasts.each { |logger| block.call(logger) }
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:157
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:22</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level=

```ruby
def local_level=(level)
  case level
  when Integer
  when Symbol
    level = Logger::Severity.const_get(level.to_s.upcase)
  when nil
  else
    raise ArgumentError, "Invalid log level: #{level.inspect}"
  end
  if level.nil?
    IsolatedExecutionState.delete(local_level_key)
  else
    IsolatedExecutionState[local_level_key] = level
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:158
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:32
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:49</summary>

##### ActiveSupport::IsolatedExecutionState.delete

```ruby
def delete(key)
  state.delete(key)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:32
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:50
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:22</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level=

```ruby
def local_level=(level)
  case level
  when Integer
  when Symbol
    level = Logger::Severity.const_get(level.to_s.upcase)
  when nil
  else
    raise ArgumentError, "Invalid log level: #{level.inspect}"
  end
  if level.nil?
    IsolatedExecutionState.delete(local_level_key)
  else
    IsolatedExecutionState[local_level_key] = level
  end
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/broadcast_logger.rb:158
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:51</summary>

##### ActiveSupport::LoggerThreadSafeLevel#local_level_key

```ruby
def local_level_key
  @local_level_key ||= :"logger_thread_safe_level_#{object_id}"
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:32
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:49</summary>

##### ActiveSupport::IsolatedExecutionState.delete

```ruby
def delete(key)
  state.delete(key)
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/logger_thread_safe_level.rb:32
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:69</summary>

##### ActiveSupport::IsolatedExecutionState.state

```ruby
def state
  context.active_support_execution_state ||= {}
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:50
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:57</summary>

##### ActiveSupport::IsolatedExecutionState.context

```ruby
def context
  scope.current
end

# called from /usr/local/bundle/ruby/3.0.0/gems/activesupport-7.1.3.4/lib/active_support/isolated_execution_state.rb:70
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:105</summary>

##### ActionDispatch::HostAuthorization::DefaultResponseApp#response

```ruby
def response(format, body)
  [RESPONSE_STATUS,
   { Rack::CONTENT_TYPE => "#{format}; charset=#{Response.default_charset}",
     Rack::CONTENT_LENGTH => body.bytesize.to_s },
   [body]]
end

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:94
```
</details>
<details open>
<summary>/usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/http/response.rb:86</summary>

##### ActionDispatch::Response.default_charset

```ruby
cattr_accessor :default_charset, default: "utf-8"

# called from /usr/local/bundle/ruby/3.0.0/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/host_authorization.rb:107
```
</details>
